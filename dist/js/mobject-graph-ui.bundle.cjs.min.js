/**
 * MIT License
 *
 * Copyright (c) 2024 benhar-dev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("mobject-litegraph");e.LiteGraph.debug=!1,e.LiteGraph.logging_set_level(-1),e.LiteGraph.catch_exceptions=!0,e.LiteGraph.throw_errors=!0,e.LiteGraph.allow_scripts=!1,e.LiteGraph.searchbox_extras={},e.LiteGraph.auto_sort_node_types=!0,e.LiteGraph.node_box_coloured_when_on=!0,e.LiteGraph.node_box_coloured_by_mode=!0,e.LiteGraph.dialog_close_on_mouse_leave=!1,e.LiteGraph.dialog_close_on_mouse_leave_delay=500,e.LiteGraph.shift_click_do_break_link_from=!0,e.LiteGraph.click_do_break_link_to=!1,e.LiteGraph.search_hide_on_mouse_leave=!0,e.LiteGraph.search_filter_enabled=!1,e.LiteGraph.search_show_all_on_open=!0,e.LiteGraph.show_node_tooltip=!0,e.LiteGraph.show_node_tooltip_use_descr_property=!0,e.LiteGraph.auto_load_slot_types=!0,e.LiteGraph.alt_drag_do_clone_nodes=!0,e.LiteGraph.do_add_triggers_slots=!0,e.LiteGraph.allow_multi_output_for_events=!1,e.LiteGraph.middle_click_slot_add_default_node=!0,e.LiteGraph.release_link_on_empty_shows_menu=!0,e.LiteGraph.pointerevents_method="mouse",e.LiteGraph.ctrl_shift_v_paste_connect_unselected_outputs=!0,e.LiteGraph.backspace_delete=!1,e.LiteGraph.actionHistory_enabled=!1,e.LiteGraph.actionHistoryMaxSave=40,e.LiteGraph.showCanvasOptions=!0,e.LiteGraph.use_uuids=!0,e.LiteGraph.refreshAncestorsOnTriggers=!1,e.LiteGraph.refreshAncestorsOnActions=!1,e.LiteGraph.ensureUniqueExecutionAndActionCall=!1,e.LiteGraph.use_deferred_actions=!0,e.LiteGraph.context_menu_filter_enabled=!1,e.LiteGraph.reprocess_slot_while_node_configure=!1;var t="top",i="bottom",s="right",n="left",r="auto",o=[t,i,s,n],a="start",l="end",h="clippingParents",c="viewport",d="popper",u="reference",p=o.reduce((function(e,t){return e.concat([t+"-"+a,t+"-"+l])}),[]),f=[].concat(o,[r]).reduce((function(e,t){return e.concat([t,t+"-"+a,t+"-"+l])}),[]),g="beforeRead",m="read",b="afterRead",_="beforeMain",v="main",y="afterMain",w="beforeWrite",C="write",x="afterWrite",E=[g,m,b,_,v,y,w,C,x];function k(e){return e?(e.nodeName||"").toLowerCase():null}function T(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function A(e){return e instanceof T(e).Element||e instanceof Element}function S(e){return e instanceof T(e).HTMLElement||e instanceof HTMLElement}function L(e){return"undefined"!=typeof ShadowRoot&&(e instanceof T(e).ShadowRoot||e instanceof ShadowRoot)}var I={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];S(n)&&k(n)&&(Object.assign(n.style,i),Object.keys(s).forEach((function(e){var t=s[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var s=t.elements[e],n=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});S(s)&&k(s)&&(Object.assign(s.style,r),Object.keys(n).forEach((function(e){s.removeAttribute(e)})))}))}},requires:["computeStyles"]};function O(e){return e.split("-")[0]}var N=Math.max,D=Math.min,G=Math.round;function M(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function P(){return!/^((?!chrome|android).)*safari/i.test(M())}function B(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=e.getBoundingClientRect(),n=1,r=1;t&&S(e)&&(n=e.offsetWidth>0&&G(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&G(s.height)/e.offsetHeight||1);var o=(A(e)?T(e):window).visualViewport,a=!P()&&i,l=(s.left+(a&&o?o.offsetLeft:0))/n,h=(s.top+(a&&o?o.offsetTop:0))/r,c=s.width/n,d=s.height/r;return{width:c,height:d,top:h,right:l+c,bottom:h+d,left:l,x:l,y:h}}function F(e){var t=B(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function j(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&L(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function R(e){return T(e).getComputedStyle(e)}function H(e){return["table","td","th"].indexOf(k(e))>=0}function q(e){return((A(e)?e.ownerDocument:e.document)||window.document).documentElement}function W(e){return"html"===k(e)?e:e.assignedSlot||e.parentNode||(L(e)?e.host:null)||q(e)}function z(e){return S(e)&&"fixed"!==R(e).position?e.offsetParent:null}function V(e){for(var t=T(e),i=z(e);i&&H(i)&&"static"===R(i).position;)i=z(i);return i&&("html"===k(i)||"body"===k(i)&&"static"===R(i).position)?t:i||function(e){var t=/firefox/i.test(M());if(/Trident/i.test(M())&&S(e)&&"fixed"===R(e).position)return null;var i=W(e);for(L(i)&&(i=i.host);S(i)&&["html","body"].indexOf(k(i))<0;){var s=R(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(e)||t}function U(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function K(e,t,i){return N(e,D(t,i))}function X(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Q(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var Y={name:"arrow",enabled:!0,phase:"main",fn:function(e){var r,a=e.state,l=e.name,h=e.options,c=a.elements.arrow,d=a.modifiersData.popperOffsets,u=O(a.placement),p=U(u),f=[n,s].indexOf(u)>=0?"height":"width";if(c&&d){var g=function(e,t){return X("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Q(e,o))}(h.padding,a),m=F(c),b="y"===p?t:n,_="y"===p?i:s,v=a.rects.reference[f]+a.rects.reference[p]-d[p]-a.rects.popper[f],y=d[p]-a.rects.reference[p],w=V(c),C=w?"y"===p?w.clientHeight||0:w.clientWidth||0:0,x=v/2-y/2,E=g[b],k=C-m[f]-g[_],T=C/2-m[f]/2+x,A=K(E,T,k),S=p;a.modifiersData[l]=((r={})[S]=A,r.centerOffset=A-T,r)}},effect:function(e){var t=e.state,i=e.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&j(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J(e){return e.split("-")[1]}var Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ee(e){var r,o=e.popper,a=e.popperRect,h=e.placement,c=e.variation,d=e.offsets,u=e.position,p=e.gpuAcceleration,f=e.adaptive,g=e.roundOffsets,m=e.isFixed,b=d.x,_=void 0===b?0:b,v=d.y,y=void 0===v?0:v,w="function"==typeof g?g({x:_,y:y}):{x:_,y:y};_=w.x,y=w.y;var C=d.hasOwnProperty("x"),x=d.hasOwnProperty("y"),E=n,k=t,A=window;if(f){var S=V(o),L="clientHeight",I="clientWidth";if(S===T(o)&&"static"!==R(S=q(o)).position&&"absolute"===u&&(L="scrollHeight",I="scrollWidth"),h===t||(h===n||h===s)&&c===l)k=i,y-=(m&&S===A&&A.visualViewport?A.visualViewport.height:S[L])-a.height,y*=p?1:-1;if(h===n||(h===t||h===i)&&c===l)E=s,_-=(m&&S===A&&A.visualViewport?A.visualViewport.width:S[I])-a.width,_*=p?1:-1}var O,N=Object.assign({position:u},f&&Z),D=!0===g?function(e,t){var i=e.x,s=e.y,n=t.devicePixelRatio||1;return{x:G(i*n)/n||0,y:G(s*n)/n||0}}({x:_,y:y},T(o)):{x:_,y:y};return _=D.x,y=D.y,p?Object.assign({},N,((O={})[k]=x?"0":"",O[E]=C?"0":"",O.transform=(A.devicePixelRatio||1)<=1?"translate("+_+"px, "+y+"px)":"translate3d("+_+"px, "+y+"px, 0)",O)):Object.assign({},N,((r={})[k]=x?y+"px":"",r[E]=C?_+"px":"",r.transform="",r))}var te={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,s=i.gpuAcceleration,n=void 0===s||s,r=i.adaptive,o=void 0===r||r,a=i.roundOffsets,l=void 0===a||a,h={placement:O(t.placement),variation:J(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ee(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ee(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ie={passive:!0};var se={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,s=e.options,n=s.scroll,r=void 0===n||n,o=s.resize,a=void 0===o||o,l=T(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&h.forEach((function(e){e.addEventListener("scroll",i.update,ie)})),a&&l.addEventListener("resize",i.update,ie),function(){r&&h.forEach((function(e){e.removeEventListener("scroll",i.update,ie)})),a&&l.removeEventListener("resize",i.update,ie)}},data:{}},ne={left:"right",right:"left",bottom:"top",top:"bottom"};function re(e){return e.replace(/left|right|bottom|top/g,(function(e){return ne[e]}))}var oe={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return oe[e]}))}function le(e){var t=T(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function he(e){return B(q(e)).left+le(e).scrollLeft}function ce(e){var t=R(e),i=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function de(e){return["html","body","#document"].indexOf(k(e))>=0?e.ownerDocument.body:S(e)&&ce(e)?e:de(W(e))}function ue(e,t){var i;void 0===t&&(t=[]);var s=de(e),n=s===(null==(i=e.ownerDocument)?void 0:i.body),r=T(s),o=n?[r].concat(r.visualViewport||[],ce(s)?s:[]):s,a=t.concat(o);return n?a:a.concat(ue(W(o)))}function pe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fe(e,t,i){return t===c?pe(function(e,t){var i=T(e),s=q(e),n=i.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;var h=P();(h||!h&&"fixed"===t)&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a+he(e),y:l}}(e,i)):A(t)?function(e,t){var i=B(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):pe(function(e){var t,i=q(e),s=le(e),n=null==(t=e.ownerDocument)?void 0:t.body,r=N(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=N(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-s.scrollLeft+he(e),l=-s.scrollTop;return"rtl"===R(n||i).direction&&(a+=N(i.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}(q(e)))}function ge(e,t,i,s){var n="clippingParents"===t?function(e){var t=ue(W(e)),i=["absolute","fixed"].indexOf(R(e).position)>=0&&S(e)?V(e):e;return A(i)?t.filter((function(e){return A(e)&&j(e,i)&&"body"!==k(e)})):[]}(e):[].concat(t),r=[].concat(n,[i]),o=r[0],a=r.reduce((function(t,i){var n=fe(e,i,s);return t.top=N(n.top,t.top),t.right=D(n.right,t.right),t.bottom=D(n.bottom,t.bottom),t.left=N(n.left,t.left),t}),fe(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function me(e){var r,o=e.reference,h=e.element,c=e.placement,d=c?O(c):null,u=c?J(c):null,p=o.x+o.width/2-h.width/2,f=o.y+o.height/2-h.height/2;switch(d){case t:r={x:p,y:o.y-h.height};break;case i:r={x:p,y:o.y+o.height};break;case s:r={x:o.x+o.width,y:f};break;case n:r={x:o.x-h.width,y:f};break;default:r={x:o.x,y:o.y}}var g=d?U(d):null;if(null!=g){var m="y"===g?"height":"width";switch(u){case a:r[g]=r[g]-(o[m]/2-h[m]/2);break;case l:r[g]=r[g]+(o[m]/2-h[m]/2)}}return r}function be(e,n){void 0===n&&(n={});var r=n,a=r.placement,l=void 0===a?e.placement:a,p=r.strategy,f=void 0===p?e.strategy:p,g=r.boundary,m=void 0===g?h:g,b=r.rootBoundary,_=void 0===b?c:b,v=r.elementContext,y=void 0===v?d:v,w=r.altBoundary,C=void 0!==w&&w,x=r.padding,E=void 0===x?0:x,k=X("number"!=typeof E?E:Q(E,o)),T=y===d?u:d,S=e.rects.popper,L=e.elements[C?T:y],I=ge(A(L)?L:L.contextElement||q(e.elements.popper),m,_,f),O=B(e.elements.reference),N=me({reference:O,element:S,strategy:"absolute",placement:l}),D=pe(Object.assign({},S,N)),$=y===d?D:O,G={top:I.top-$.top+k.top,bottom:$.bottom-I.bottom+k.bottom,left:I.left-$.left+k.left,right:$.right-I.right+k.right},M=e.modifiersData.offset;if(y===d&&M){var P=M[l];Object.keys(G).forEach((function(e){var n=[s,i].indexOf(e)>=0?1:-1,r=[t,i].indexOf(e)>=0?"y":"x";G[e]+=P[r]*n}))}return G}function _e(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=i.boundary,r=i.rootBoundary,a=i.padding,l=i.flipVariations,h=i.allowedAutoPlacements,c=void 0===h?f:h,d=J(s),u=d?l?p:p.filter((function(e){return J(e)===d})):o,g=u.filter((function(e){return c.indexOf(e)>=0}));0===g.length&&(g=u);var m=g.reduce((function(t,i){return t[i]=be(e,{placement:i,boundary:n,rootBoundary:r,padding:a})[O(i)],t}),{});return Object.keys(m).sort((function(e,t){return m[e]-m[t]}))}var ve={name:"flip",enabled:!0,phase:"main",fn:function(e){var o=e.state,l=e.options,h=e.name;if(!o.modifiersData[h]._skip){for(var c=l.mainAxis,d=void 0===c||c,u=l.altAxis,p=void 0===u||u,f=l.fallbackPlacements,g=l.padding,m=l.boundary,b=l.rootBoundary,_=l.altBoundary,v=l.flipVariations,y=void 0===v||v,w=l.allowedAutoPlacements,C=o.options.placement,x=O(C),E=f||(x===C||!y?[re(C)]:function(e){if(O(e)===r)return[];var t=re(e);return[ae(e),t,ae(t)]}(C)),k=[C].concat(E).reduce((function(e,t){return e.concat(O(t)===r?_e(o,{placement:t,boundary:m,rootBoundary:b,padding:g,flipVariations:y,allowedAutoPlacements:w}):t)}),[]),T=o.rects.reference,A=o.rects.popper,S=new Map,L=!0,I=k[0],N=0;N<k.length;N++){var D=k[N],$=O(D),G=J(D)===a,M=[t,i].indexOf($)>=0,P=M?"width":"height",B=be(o,{placement:D,boundary:m,rootBoundary:b,altBoundary:_,padding:g}),F=M?G?s:n:G?i:t;T[P]>A[P]&&(F=re(F));var j=re(F),R=[];if(d&&R.push(B[$]<=0),p&&R.push(B[F]<=0,B[j]<=0),R.every((function(e){return e}))){I=D,L=!1;break}S.set(D,R)}if(L)for(var H=function(e){var t=k.find((function(t){var i=S.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return I=t,"break"},q=y?3:1;q>0;q--){if("break"===H(q))break}o.placement!==I&&(o.modifiersData[h]._skip=!0,o.placement=I,o.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ye(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function we(e){return[t,s,i,n].some((function(t){return e[t]>=0}))}var Ce={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,s=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,o=be(t,{elementContext:"reference"}),a=be(t,{altBoundary:!0}),l=ye(o,s),h=ye(a,n,r),c=we(l),d=we(h);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}};var xe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var i=e.state,r=e.options,o=e.name,a=r.offset,l=void 0===a?[0,0]:a,h=f.reduce((function(e,r){return e[r]=function(e,i,r){var o=O(e),a=[n,t].indexOf(o)>=0?-1:1,l="function"==typeof r?r(Object.assign({},i,{placement:e})):r,h=l[0],c=l[1];return h=h||0,c=(c||0)*a,[n,s].indexOf(o)>=0?{x:c,y:h}:{x:h,y:c}}(r,i.rects,l),e}),{}),c=h[i.placement],d=c.x,u=c.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=d,i.modifiersData.popperOffsets.y+=u),i.modifiersData[o]=h}};var Ee={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=me({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var ke={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var r=e.state,o=e.options,l=e.name,h=o.mainAxis,c=void 0===h||h,d=o.altAxis,u=void 0!==d&&d,p=o.boundary,f=o.rootBoundary,g=o.altBoundary,m=o.padding,b=o.tether,_=void 0===b||b,v=o.tetherOffset,y=void 0===v?0:v,w=be(r,{boundary:p,rootBoundary:f,padding:m,altBoundary:g}),C=O(r.placement),x=J(r.placement),E=!x,k=U(C),T="x"===k?"y":"x",A=r.modifiersData.popperOffsets,S=r.rects.reference,L=r.rects.popper,I="function"==typeof y?y(Object.assign({},r.rects,{placement:r.placement})):y,$="number"==typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),G=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,M={x:0,y:0};if(A){if(c){var P,B="y"===k?t:n,j="y"===k?i:s,R="y"===k?"height":"width",H=A[k],q=H+w[B],W=H-w[j],z=_?-L[R]/2:0,X=x===a?S[R]:L[R],Q=x===a?-L[R]:-S[R],Y=r.elements.arrow,Z=_&&Y?F(Y):{width:0,height:0},ee=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[B],ie=ee[j],se=K(0,S[R],Z[R]),ne=E?S[R]/2-z-se-te-$.mainAxis:X-se-te-$.mainAxis,re=E?-S[R]/2+z+se+ie+$.mainAxis:Q+se+ie+$.mainAxis,oe=r.elements.arrow&&V(r.elements.arrow),ae=oe?"y"===k?oe.clientTop||0:oe.clientLeft||0:0,le=null!=(P=null==G?void 0:G[k])?P:0,he=H+re-le,ce=K(_?D(q,H+ne-le-ae):q,H,_?N(W,he):W);A[k]=ce,M[k]=ce-H}if(u){var de,ue="x"===k?t:n,pe="x"===k?i:s,fe=A[T],ge="y"===T?"height":"width",me=fe+w[ue],_e=fe-w[pe],ve=-1!==[t,n].indexOf(C),ye=null!=(de=null==G?void 0:G[T])?de:0,we=ve?me:fe-S[ge]-L[ge]-ye+$.altAxis,Ce=ve?fe+S[ge]+L[ge]-ye-$.altAxis:_e,xe=_&&ve?function(e,t,i){var s=K(e,t,i);return s>i?i:s}(we,fe,Ce):K(_?we:me,fe,_?Ce:_e);A[T]=xe,M[T]=xe-fe}r.modifiersData[l]=M}},requiresIfExists:["offset"]};function Te(e,t,i){void 0===i&&(i=!1);var s,n,r=S(t),o=S(t)&&function(e){var t=e.getBoundingClientRect(),i=G(t.width)/e.offsetWidth||1,s=G(t.height)/e.offsetHeight||1;return 1!==i||1!==s}(t),a=q(t),l=B(e,o,i),h={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!i)&&(("body"!==k(t)||ce(a))&&(h=(s=t)!==T(s)&&S(s)?{scrollLeft:(n=s).scrollLeft,scrollTop:n.scrollTop}:le(s)),S(t)?((c=B(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=he(a))),{x:l.left+h.scrollLeft-c.x,y:l.top+h.scrollTop-c.y,width:l.width,height:l.height}}function Ae(e){var t=new Map,i=new Set,s=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var s=t.get(e);s&&n(s)}})),s.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||n(e)})),s}var Se={placement:"bottom",modifiers:[],strategy:"absolute"};function Le(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ie(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,s=void 0===i?[]:i,n=t.defaultOptions,r=void 0===n?Se:n;return function(e,t,i){void 0===i&&(i=r);var n,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Se,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],h=!1,c={state:a,setOptions:function(i){var n="function"==typeof i?i(a.options):i;d(),a.options=Object.assign({},r,a.options,n),a.scrollParents={reference:A(e)?ue(e):e.contextElement?ue(e.contextElement):[],popper:ue(t)};var o,h,u=function(e){var t=Ae(e);return E.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((o=[].concat(s,a.options.modifiers),h=o.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(h).map((function(e){return h[e]}))));return a.orderedModifiers=u.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,s=void 0===i?{}:i,n=e.effect;if("function"==typeof n){var r=n({state:a,name:t,instance:c,options:s}),o=function(){};l.push(r||o)}})),c.update()},forceUpdate:function(){if(!h){var e=a.elements,t=e.reference,i=e.popper;if(Le(t,i)){a.rects={reference:Te(t,V(i),"fixed"===a.options.strategy),popper:F(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var s=0;s<a.orderedModifiers.length;s++)if(!0!==a.reset){var n=a.orderedModifiers[s],r=n.fn,o=n.options,l=void 0===o?{}:o,d=n.name;"function"==typeof r&&(a=r({state:a,options:l,name:d,instance:c})||a)}else a.reset=!1,s=-1}}},update:(n=function(){return new Promise((function(e){c.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(n())}))}))),o}),destroy:function(){d(),h=!0}};if(!Le(e,t))return c;function d(){l.forEach((function(e){return e()})),l=[]}return c.setOptions(i).then((function(e){!h&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c}}var Oe=Ie(),Ne=Ie({defaultModifiers:[se,Ee,te,I]}),De=Ie({defaultModifiers:[se,Ee,te,I,xe,ve,ke,Y,Ce]}),$e=Object.freeze({__proto__:null,popperGenerator:Ie,detectOverflow:be,createPopperBase:Oe,createPopper:De,createPopperLite:Ne,top:t,bottom:i,right:s,left:n,auto:r,basePlacements:o,start:a,end:l,clippingParents:h,viewport:c,popper:d,reference:u,variationPlacements:p,placements:f,beforeRead:g,read:m,afterRead:b,beforeMain:_,main:v,afterMain:y,beforeWrite:w,write:C,afterWrite:x,modifierPhases:E,applyStyles:I,arrow:Y,computeStyles:te,eventListeners:se,flip:ve,hide:Ce,offset:xe,popperOffsets:Ee,preventOverflow:ke});
/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const Ge=new Map,Me={set(e,t,i){Ge.has(e)||Ge.set(e,new Map);const s=Ge.get(e);s.has(t)||0===s.size?s.set(t,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,t)=>Ge.has(e)&&Ge.get(e).get(t)||null,remove(e,t){if(!Ge.has(e))return;const i=Ge.get(e);i.delete(t),0===i.size&&Ge.delete(e)}},Pe="transitionend",Be=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))),e),Fe=e=>{e.dispatchEvent(new Event(Pe))},je=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),Re=e=>je(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(Be(e)):null,He=e=>{if(!je(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},qe=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),We=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?We(e.parentNode):null},ze=()=>{},Ve=e=>{e.offsetHeight},Ue=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ke=[],Xe=()=>"rtl"===document.documentElement.dir,Qe=e=>{var t;t=()=>{const t=Ue();if(t){const i=e.NAME,s=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=s,e.jQueryInterface)}},"loading"===document.readyState?(Ke.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of Ke)e()})),Ke.push(t)):t()},Ye=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,Je=(e,t,i=!0)=>{if(!i)return void Ye(e);const s=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),n=Number.parseFloat(i);return s||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let n=!1;const r=({target:i})=>{i===t&&(n=!0,t.removeEventListener(Pe,r),Ye(e))};t.addEventListener(Pe,r),setTimeout((()=>{n||Fe(t)}),s)},Ze=(e,t,i,s)=>{const n=e.length;let r=e.indexOf(t);return-1===r?!i&&s?e[n-1]:e[0]:(r+=i?1:-1,s&&(r=(r+n)%n),e[Math.max(0,Math.min(r,n-1))])},et=/[^.]*(?=\..*)\.|.*/,tt=/\..*/,it=/::\d+$/,st={};let nt=1;const rt={mouseenter:"mouseover",mouseleave:"mouseout"},ot=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function at(e,t){return t&&`${t}::${nt++}`||e.uidEvent||nt++}function lt(e){const t=at(e);return e.uidEvent=t,st[t]=st[t]||{},st[t]}function ht(e,t,i=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===i))}function ct(e,t,i){const s="string"==typeof t,n=s?i:t||i;let r=ft(e);return ot.has(r)||(r=e),[s,n,r]}function dt(e,t,i,s,n){if("string"!=typeof t||!e)return;let[r,o,a]=ct(t,i,s);if(t in rt){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const l=lt(e),h=l[a]||(l[a]={}),c=ht(h,o,r?i:null);if(c)return void(c.oneOff=c.oneOff&&n);const d=at(o,t.replace(et,"")),u=r?function(e,t,i){return function s(n){const r=e.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return mt(n,{delegateTarget:o}),s.oneOff&&gt.off(e,n.type,t,i),i.apply(o,[n])}}(e,i,o):function(e,t){return function i(s){return mt(s,{delegateTarget:e}),i.oneOff&&gt.off(e,s.type,t),t.apply(e,[s])}}(e,o);u.delegationSelector=r?i:null,u.callable=o,u.oneOff=n,u.uidEvent=d,h[d]=u,e.addEventListener(a,u,r)}function ut(e,t,i,s,n){const r=ht(t[i],s,n);r&&(e.removeEventListener(i,r,Boolean(n)),delete t[i][r.uidEvent])}function pt(e,t,i,s){const n=t[i]||{};for(const[r,o]of Object.entries(n))r.includes(s)&&ut(e,t,i,o.callable,o.delegationSelector)}function ft(e){return e=e.replace(tt,""),rt[e]||e}const gt={on(e,t,i,s){dt(e,t,i,s,!1)},one(e,t,i,s){dt(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[n,r,o]=ct(t,i,s),a=o!==t,l=lt(e),h=l[o]||{},c=t.startsWith(".");if(void 0===r){if(c)for(const i of Object.keys(l))pt(e,l,i,t.slice(1));for(const[i,s]of Object.entries(h)){const n=i.replace(it,"");a&&!t.includes(n)||ut(e,l,o,s.callable,s.delegationSelector)}}else{if(!Object.keys(h).length)return;ut(e,l,o,r,n?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=Ue();let n=null,r=!0,o=!0,a=!1;t!==ft(t)&&s&&(n=s.Event(t,i),s(e).trigger(n),r=!n.isPropagationStopped(),o=!n.isImmediatePropagationStopped(),a=n.isDefaultPrevented());const l=mt(new Event(t,{bubbles:r,cancelable:!0}),i);return a&&l.preventDefault(),o&&e.dispatchEvent(l),l.defaultPrevented&&n&&n.preventDefault(),l}};function mt(e,t={}){for(const[i,s]of Object.entries(t))try{e[i]=s}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>s})}return e}function bt(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function _t(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const vt={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${_t(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${_t(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=bt(e.dataset[s])}return t},getDataAttribute:(e,t)=>bt(e.getAttribute(`data-bs-${_t(t)}`))};class yt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=je(t)?vt.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...je(t)?vt.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,n]of Object.entries(t)){const t=e[s],r=je(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${r}" but expected type "${n}".`)}var i}}class wt extends yt{constructor(e,t){super(),(e=Re(e))&&(this._element=e,this._config=this._getConfig(t),Me.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Me.remove(this._element,this.constructor.DATA_KEY),gt.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){Je(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Me.get(Re(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ct=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map((e=>Be(e))).join(","):null},xt={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let s=e.parentNode.closest(t);for(;s;)i.push(s),s=s.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!qe(e)&&He(e)))},getSelectorFromElement(e){const t=Ct(e);return t&&xt.findOne(t)?t:null},getElementFromSelector(e){const t=Ct(e);return t?xt.findOne(t):null},getMultipleElementsFromSelector(e){const t=Ct(e);return t?xt.find(t):[]}},Et=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;gt.on(document,i,`[data-bs-dismiss="${s}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),qe(this))return;const n=xt.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(n)[t]()}))},kt=".bs.alert",Tt=`close${kt}`,At=`closed${kt}`;class St extends wt{static get NAME(){return"alert"}close(){if(gt.trigger(this._element,Tt).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),gt.trigger(this._element,At),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=St.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}Et(St,"close"),Qe(St);const Lt='[data-bs-toggle="button"]';class It extends wt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=It.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}gt.on(document,"click.bs.button.data-api",Lt,(e=>{e.preventDefault();const t=e.target.closest(Lt);It.getOrCreateInstance(t).toggle()})),Qe(It);const Ot=".bs.swipe",Nt=`touchstart${Ot}`,Dt=`touchmove${Ot}`,$t=`touchend${Ot}`,Gt=`pointerdown${Ot}`,Mt=`pointerup${Ot}`,Pt={endCallback:null,leftCallback:null,rightCallback:null},Bt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ft extends yt{constructor(e,t){super(),this._element=e,e&&Ft.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Pt}static get DefaultType(){return Bt}static get NAME(){return"swipe"}dispose(){gt.off(this._element,Ot)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ye(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Ye(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(gt.on(this._element,Gt,(e=>this._start(e))),gt.on(this._element,Mt,(e=>this._end(e))),this._element.classList.add("pointer-event")):(gt.on(this._element,Nt,(e=>this._start(e))),gt.on(this._element,Dt,(e=>this._move(e))),gt.on(this._element,$t,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const jt=".bs.carousel",Rt=".data-api",Ht="ArrowLeft",qt="ArrowRight",Wt="next",zt="prev",Vt="left",Ut="right",Kt=`slide${jt}`,Xt=`slid${jt}`,Qt=`keydown${jt}`,Yt=`mouseenter${jt}`,Jt=`mouseleave${jt}`,Zt=`dragstart${jt}`,ei=`load${jt}${Rt}`,ti=`click${jt}${Rt}`,ii="carousel",si="active",ni=".active",ri=".carousel-item",oi=ni+ri,ai={[Ht]:Ut,[qt]:Vt},li={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},hi={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ci extends wt{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=xt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ii&&this.cycle()}static get Default(){return li}static get DefaultType(){return hi}static get NAME(){return"carousel"}next(){this._slide(Wt)}nextWhenVisible(){!document.hidden&&He(this._element)&&this.next()}prev(){this._slide(zt)}pause(){this._isSliding&&Fe(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?gt.one(this._element,Xt,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void gt.one(this._element,Xt,(()=>this.to(e)));const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?Wt:zt;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&gt.on(this._element,Qt,(e=>this._keydown(e))),"hover"===this._config.pause&&(gt.on(this._element,Yt,(()=>this.pause())),gt.on(this._element,Jt,(()=>this._maybeEnableCycle()))),this._config.touch&&Ft.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of xt.find(".carousel-item img",this._element))gt.on(e,Zt,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(Vt)),rightCallback:()=>this._slide(this._directionToOrder(Ut)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Ft(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=ai[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=xt.findOne(ni,this._indicatorsElement);t.classList.remove(si),t.removeAttribute("aria-current");const i=xt.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(si),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===Wt,n=t||Ze(this._getItems(),i,s,this._config.wrap);if(n===i)return;const r=this._getItemIndex(n),o=t=>gt.trigger(this._element,t,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:r});if(o(Kt).defaultPrevented)return;if(!i||!n)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=n;const l=s?"carousel-item-start":"carousel-item-end",h=s?"carousel-item-next":"carousel-item-prev";n.classList.add(h),Ve(n),i.classList.add(l),n.classList.add(l);this._queueCallback((()=>{n.classList.remove(l,h),n.classList.add(si),i.classList.remove(si,h,l),this._isSliding=!1,o(Xt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return xt.findOne(oi,this._element)}_getItems(){return xt.find(ri,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Xe()?e===Vt?zt:Wt:e===Vt?Wt:zt}_orderToDirection(e){return Xe()?e===zt?Vt:Ut:e===zt?Ut:Vt}static jQueryInterface(e){return this.each((function(){const t=ci.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}gt.on(document,ti,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=xt.getElementFromSelector(this);if(!t||!t.classList.contains(ii))return;e.preventDefault();const i=ci.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===vt.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),gt.on(window,ei,(()=>{const e=xt.find('[data-bs-ride="carousel"]');for(const t of e)ci.getOrCreateInstance(t)})),Qe(ci);const di=".bs.collapse",ui=`show${di}`,pi=`shown${di}`,fi=`hide${di}`,gi=`hidden${di}`,mi=`click${di}.data-api`,bi="show",_i="collapse",vi="collapsing",yi=`:scope .${_i} .${_i}`,wi='[data-bs-toggle="collapse"]',Ci={parent:null,toggle:!0},xi={parent:"(null|element)",toggle:"boolean"};class Ei extends wt{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=xt.find(wi);for(const e of i){const t=xt.getSelectorFromElement(e),i=xt.find(t).filter((e=>e===this._element));null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ci}static get DefaultType(){return xi}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Ei.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(gt.trigger(this._element,ui).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(_i),this._element.classList.add(vi),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(_i,bi),this._element.style[t]="",gt.trigger(this._element,pi)}),this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(gt.trigger(this._element,fi).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ve(this._element),this._element.classList.add(vi),this._element.classList.remove(_i,bi);for(const e of this._triggerArray){const t=xt.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(_i),gt.trigger(this._element,gi)}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(bi)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Re(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(wi);for(const t of e){const e=xt.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=xt.find(yi,this._config.parent);return xt.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const i=Ei.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}))}}gt.on(document,mi,wi,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of xt.getMultipleElementsFromSelector(this))Ei.getOrCreateInstance(e,{toggle:!1}).toggle()})),Qe(Ei);const ki="dropdown",Ti=".bs.dropdown",Ai=".data-api",Si="ArrowUp",Li="ArrowDown",Ii=`hide${Ti}`,Oi=`hidden${Ti}`,Ni=`show${Ti}`,Di=`shown${Ti}`,$i=`click${Ti}${Ai}`,Gi=`keydown${Ti}${Ai}`,Mi=`keyup${Ti}${Ai}`,Pi="show",Bi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fi=`${Bi}.${Pi}`,ji=".dropdown-menu",Ri=Xe()?"top-end":"top-start",Hi=Xe()?"top-start":"top-end",qi=Xe()?"bottom-end":"bottom-start",Wi=Xe()?"bottom-start":"bottom-end",zi=Xe()?"left-start":"right-start",Vi=Xe()?"right-start":"left-start",Ui={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ki={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Xi extends wt{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=xt.next(this._element,ji)[0]||xt.prev(this._element,ji)[0]||xt.findOne(ji,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ui}static get DefaultType(){return Ki}static get NAME(){return ki}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qe(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!gt.trigger(this._element,Ni,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))gt.on(e,"mouseover",ze);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Pi),this._element.classList.add(Pi),gt.trigger(this._element,Di,e)}}hide(){if(qe(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!gt.trigger(this._element,Ii,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))gt.off(e,"mouseover",ze);this._popper&&this._popper.destroy(),this._menu.classList.remove(Pi),this._element.classList.remove(Pi),this._element.setAttribute("aria-expanded","false"),vt.removeDataAttribute(this._menu,"popper"),gt.trigger(this._element,Oi,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!je(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${ki.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===$e)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:je(this._config.reference)?e=Re(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=De(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Pi)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return zi;if(e.classList.contains("dropstart"))return Vi;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Hi:Ri:t?Wi:qi}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(vt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ye(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=xt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>He(e)));i.length&&Ze(i,t,e===Li,!i.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Xi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=xt.find(Fi);for(const i of t){const t=Xi.getInstance(i);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),n=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!n||"outside"===t._config.autoClose&&n)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const r={relatedTarget:t._element};"click"===e.type&&(r.clickEvent=e),t._completeHide(r)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,s=[Si,Li].includes(e.key);if(!s&&!i)return;if(t&&!i)return;e.preventDefault();const n=this.matches(Bi)?this:xt.prev(this,Bi)[0]||xt.next(this,Bi)[0]||xt.findOne(Bi,e.delegateTarget.parentNode),r=Xi.getOrCreateInstance(n);if(s)return e.stopPropagation(),r.show(),void r._selectMenuItem(e);r._isShown()&&(e.stopPropagation(),r.hide(),n.focus())}}gt.on(document,Gi,Bi,Xi.dataApiKeydownHandler),gt.on(document,Gi,ji,Xi.dataApiKeydownHandler),gt.on(document,$i,Xi.clearMenus),gt.on(document,Mi,Xi.clearMenus),gt.on(document,$i,Bi,(function(e){e.preventDefault(),Xi.getOrCreateInstance(this).toggle()})),Qe(Xi);const Qi="backdrop",Yi="show",Ji=`mousedown.bs.${Qi}`,Zi={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},es={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ts extends yt{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Zi}static get DefaultType(){return es}static get NAME(){return Qi}show(e){if(!this._config.isVisible)return void Ye(e);this._append();const t=this._getElement();this._config.isAnimated&&Ve(t),t.classList.add(Yi),this._emulateAnimation((()=>{Ye(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(Yi),this._emulateAnimation((()=>{this.dispose(),Ye(e)}))):Ye(e)}dispose(){this._isAppended&&(gt.off(this._element,Ji),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Re(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),gt.on(e,Ji,(()=>{Ye(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){Je(e,this._getElement(),this._config.isAnimated)}}const is=".bs.focustrap",ss=`focusin${is}`,ns=`keydown.tab${is}`,rs="backward",os={autofocus:!0,trapElement:null},as={autofocus:"boolean",trapElement:"element"};class ls extends yt{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return os}static get DefaultType(){return as}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),gt.off(document,is),gt.on(document,ss,(e=>this._handleFocusin(e))),gt.on(document,ns,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,gt.off(document,is))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=xt.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===rs?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?rs:"forward")}}const hs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cs=".sticky-top",ds="padding-right",us="margin-right";class ps{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ds,(t=>t+e)),this._setElementAttributes(hs,ds,(t=>t+e)),this._setElementAttributes(cs,us,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ds),this._resetElementAttributes(hs,ds),this._resetElementAttributes(cs,us)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const n=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(n))}px`)}))}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&vt.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const i=vt.getDataAttribute(e,t);null!==i?(vt.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(je(e))t(e);else for(const i of xt.find(e,this._element))t(i)}}const fs=".bs.modal",gs=`hide${fs}`,ms=`hidePrevented${fs}`,bs=`hidden${fs}`,_s=`show${fs}`,vs=`shown${fs}`,ys=`resize${fs}`,ws=`click.dismiss${fs}`,Cs=`mousedown.dismiss${fs}`,xs=`keydown.dismiss${fs}`,Es=`click${fs}.data-api`,ks="modal-open",Ts="show",As="modal-static",Ss={backdrop:!0,focus:!0,keyboard:!0},Ls={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Is extends wt{constructor(e,t){super(e,t),this._dialog=xt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ps,this._addEventListeners()}static get Default(){return Ss}static get DefaultType(){return Ls}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;gt.trigger(this._element,_s,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ks),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;gt.trigger(this._element,gs).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ts),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){gt.off(window,fs),gt.off(this._dialog,fs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ts({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=xt.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),Ve(this._element),this._element.classList.add(Ts);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,gt.trigger(this._element,vs,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){gt.on(this._element,xs,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),gt.on(window,ys,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),gt.on(this._element,Cs,(e=>{gt.one(this._element,ws,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ks),this._resetAdjustments(),this._scrollBar.reset(),gt.trigger(this._element,bs)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(gt.trigger(this._element,ms).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(As)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(As),this._queueCallback((()=>{this._element.classList.remove(As),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=Xe()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=Xe()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=Is.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}gt.on(document,Es,'[data-bs-toggle="modal"]',(function(e){const t=xt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),gt.one(t,_s,(e=>{e.defaultPrevented||gt.one(t,bs,(()=>{He(this)&&this.focus()}))}));const i=xt.findOne(".modal.show");i&&Is.getInstance(i).hide();Is.getOrCreateInstance(t).toggle(this)})),Et(Is),Qe(Is);const Os=".bs.offcanvas",Ns=".data-api",Ds=`load${Os}${Ns}`,$s="show",Gs="showing",Ms="hiding",Ps=".offcanvas.show",Bs=`show${Os}`,Fs=`shown${Os}`,js=`hide${Os}`,Rs=`hidePrevented${Os}`,Hs=`hidden${Os}`,qs=`resize${Os}`,Ws=`click${Os}${Ns}`,zs=`keydown.dismiss${Os}`,Vs={backdrop:!0,keyboard:!0,scroll:!1},Us={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ks extends wt{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vs}static get DefaultType(){return Us}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(gt.trigger(this._element,Bs,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ps).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Gs);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add($s),this._element.classList.remove(Gs),gt.trigger(this._element,Fs,{relatedTarget:e})}),this._element,!0)}hide(){if(!this._isShown)return;if(gt.trigger(this._element,js).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ms),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove($s,Ms),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ps).reset(),gt.trigger(this._element,Hs)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new ts({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():gt.trigger(this._element,Rs)}:null})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_addEventListeners(){gt.on(this._element,zs,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():gt.trigger(this._element,Rs))}))}static jQueryInterface(e){return this.each((function(){const t=Ks.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}gt.on(document,Ws,'[data-bs-toggle="offcanvas"]',(function(e){const t=xt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),qe(this))return;gt.one(t,Hs,(()=>{He(this)&&this.focus()}));const i=xt.findOne(Ps);i&&i!==t&&Ks.getInstance(i).hide();Ks.getOrCreateInstance(t).toggle(this)})),gt.on(window,Ds,(()=>{for(const e of xt.find(Ps))Ks.getOrCreateInstance(e).show()})),gt.on(window,qs,(()=>{for(const e of xt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ks.getOrCreateInstance(e).hide()})),Et(Ks),Qe(Ks);const Xs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Qs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ys=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Js=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Qs.has(i)||Boolean(Ys.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(i)))};const Zs={allowList:Xs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},en={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},tn={entry:"(string|element|function|null)",selector:"(string|element)"};class sn extends yt{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Zs}static get DefaultType(){return en}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},tn)}_setContent(e,t,i){const s=xt.findOne(i,e);s&&((t=this._resolvePossibleFunction(t))?je(t)?this._putElementInTemplate(Re(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(const e of n){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const s=[].concat(...e.attributes),n=[].concat(t["*"]||[],t[i]||[]);for(const t of s)Js(t,n)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ye(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const nn=new Set(["sanitize","allowList","sanitizeFn"]),rn="fade",on="show",an=".tooltip-inner",ln=".modal",hn="hide.bs.modal",cn="hover",dn="focus",un={AUTO:"auto",TOP:"top",RIGHT:Xe()?"left":"right",BOTTOM:"bottom",LEFT:Xe()?"right":"left"},pn={allowList:Xs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},fn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class gn extends wt{constructor(e,t){if(void 0===$e)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pn}static get DefaultType(){return fn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),gt.off(this._element.closest(ln),hn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=gt.trigger(this._element,this.constructor.eventName("show")),t=(We(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),gt.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(on),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))gt.on(e,"mouseover",ze);this._queueCallback((()=>{gt.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(gt.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(on),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))gt.off(e,"mouseover",ze);this._activeTrigger.click=!1,this._activeTrigger[dn]=!1,this._activeTrigger[cn]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),gt.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(rn,on),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(rn),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new sn({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[an]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(rn)}_isShown(){return this.tip&&this.tip.classList.contains(on)}_createPopper(e){const t=Ye(this._config.placement,[this,e,this._element]),i=un[t.toUpperCase()];return De(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Ye(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...Ye(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)gt.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===cn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===cn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");gt.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?dn:cn]=!0,t._enter()})),gt.on(this._element,i,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?dn:cn]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},gt.on(this._element.closest(ln),hn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=vt.getDataAttributes(this._element);for(const e of Object.keys(t))nn.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:Re(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=gn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Qe(gn);const mn=".popover-header",bn=".popover-body",_n={...gn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},vn={...gn.DefaultType,content:"(null|string|element|function)"};class yn extends gn{static get Default(){return _n}static get DefaultType(){return vn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[mn]:this._getTitle(),[bn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=yn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Qe(yn);const wn=".bs.scrollspy",Cn=`activate${wn}`,xn=`click${wn}`,En=`load${wn}.data-api`,kn="active",Tn="[href]",An=".nav-link",Sn=`${An}, .nav-item > ${An}, .list-group-item`,Ln={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},In={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class On extends wt{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ln}static get DefaultType(){return In}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Re(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(gt.off(this._config.target,xn),gt.on(this._config.target,xn,Tn,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const e=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&e){if(i(r),!s)return}else n||e||i(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=xt.find(Tn,this._config.target);for(const t of e){if(!t.hash||qe(t))continue;const e=xt.findOne(decodeURI(t.hash),this._element);He(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(kn),this._activateParents(e),gt.trigger(this._element,Cn,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))xt.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(kn);else for(const t of xt.parents(e,".nav, .list-group"))for(const e of xt.prev(t,Sn))e.classList.add(kn)}_clearActiveClass(e){e.classList.remove(kn);const t=xt.find(`${Tn}.${kn}`,e);for(const e of t)e.classList.remove(kn)}static jQueryInterface(e){return this.each((function(){const t=On.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}gt.on(window,En,(()=>{for(const e of xt.find('[data-bs-spy="scroll"]'))On.getOrCreateInstance(e)})),Qe(On);const Nn=".bs.tab",Dn=`hide${Nn}`,$n=`hidden${Nn}`,Gn=`show${Nn}`,Mn=`shown${Nn}`,Pn=`click${Nn}`,Bn=`keydown${Nn}`,Fn=`load${Nn}`,jn="ArrowLeft",Rn="ArrowRight",Hn="ArrowUp",qn="ArrowDown",Wn="Home",zn="End",Vn="active",Un="fade",Kn="show",Xn=".dropdown-toggle",Qn=`:not(${Xn})`,Yn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Jn=`${`.nav-link${Qn}, .list-group-item${Qn}, [role="tab"]${Qn}`}, ${Yn}`,Zn=`.${Vn}[data-bs-toggle="tab"], .${Vn}[data-bs-toggle="pill"], .${Vn}[data-bs-toggle="list"]`;class er extends wt{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),gt.on(this._element,Bn,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?gt.trigger(t,Dn,{relatedTarget:e}):null;gt.trigger(e,Gn,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Vn),this._activate(xt.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),gt.trigger(e,Mn,{relatedTarget:t})):e.classList.add(Kn)}),e,e.classList.contains(Un))}_deactivate(e,t){if(!e)return;e.classList.remove(Vn),e.blur(),this._deactivate(xt.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),gt.trigger(e,$n,{relatedTarget:t})):e.classList.remove(Kn)}),e,e.classList.contains(Un))}_keydown(e){if(![jn,Rn,Hn,qn,Wn,zn].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!qe(e)));let i;if([Wn,zn].includes(e.key))i=t[e.key===Wn?0:t.length-1];else{const s=[Rn,qn].includes(e.key);i=Ze(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),er.getOrCreateInstance(i).show())}_getChildren(){return xt.find(Jn,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=xt.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const s=(e,s)=>{const n=xt.findOne(e,i);n&&n.classList.toggle(s,t)};s(Xn,Vn),s(".dropdown-menu",Kn),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Vn)}_getInnerElement(e){return e.matches(Jn)?e:xt.findOne(Jn,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=er.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}gt.on(document,Pn,Yn,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),qe(this)||er.getOrCreateInstance(this).show()})),gt.on(window,Fn,(()=>{for(const e of xt.find(Zn))er.getOrCreateInstance(e)})),Qe(er);const tr=".bs.toast",ir=`mouseover${tr}`,sr=`mouseout${tr}`,nr=`focusin${tr}`,rr=`focusout${tr}`,or=`hide${tr}`,ar=`hidden${tr}`,lr=`show${tr}`,hr=`shown${tr}`,cr="hide",dr="show",ur="showing",pr={animation:"boolean",autohide:"boolean",delay:"number"},fr={animation:!0,autohide:!0,delay:5e3};class gr extends wt{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return fr}static get DefaultType(){return pr}static get NAME(){return"toast"}show(){if(gt.trigger(this._element,lr).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(cr),Ve(this._element),this._element.classList.add(dr,ur),this._queueCallback((()=>{this._element.classList.remove(ur),gt.trigger(this._element,hr),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(gt.trigger(this._element,or).defaultPrevented)return;this._element.classList.add(ur),this._queueCallback((()=>{this._element.classList.add(cr),this._element.classList.remove(ur,dr),gt.trigger(this._element,ar)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(dr),super.dispose()}isShown(){return this._element.classList.contains(dr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){gt.on(this._element,ir,(e=>this._onInteraction(e,!0))),gt.on(this._element,sr,(e=>this._onInteraction(e,!1))),gt.on(this._element,nr,(e=>this._onInteraction(e,!0))),gt.on(this._element,rr,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=gr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}Et(gr),Qe(gr);const mr={font:{normal:"12px sans-serif",bold:"bold 12px sans-serif",monospace:"12px monospace",italic:"italic 12px sans-serif"},text:{color:"#FFF",disabled:"#AAA",label:"#CCC",value:"#0FF"},box:{padding:5,borderRadius:4,background:"rgba(0, 0, 0, 0.7)",border:"#FFF"},selection:{border:"#FFF",fill:"rgba(0, 0, 0, 0.25)",labelBg:"rgba(0, 0, 0, 0.7)",labelText:"#FFF",dashed:[4,3],lineWidth:2,diagonalLineWidth:1,labelFont:"bold 12px sans-serif",labelPadding:5},checkerboard:{light:"#404040",dark:"#303030",size:10},arrows:{color:"#AAA",size:12}};class br{static fitTextWithinWidth(e,t,i){if(e.measureText(t).width<=i)return t;let s=0,n=t.length;for(;s<n;){const r=Math.floor((s+n)/2),o=t.slice(0,r)+"…";e.measureText(o).width<=i?s=r+1:n=r}return t.slice(0,s-1)+"…"}static drawRoundedRect(e,t,i,s,n,{fill:r=null,stroke:o=null,radius:a=mr.box.borderRadius,lineWidth:l=1,shadowColor:h=null,shadowBlur:c=0,shadowOffsetX:d=0,shadowOffsetY:u=0}={}){(r||o)&&(e.save(),e.lineWidth=l,h&&(e.shadowColor=h,e.shadowBlur=c,e.shadowOffsetX=d,e.shadowOffsetY=u),e.beginPath(),e.roundRect(t,i,s,n,a),r&&(e.fillStyle=r,e.fill()),o&&(e.strokeStyle=o,e.stroke()),e.restore())}static drawText(e,t,i,s,{font:n=mr.font.normal,color:r=mr.text.color,align:o="left",baseline:a="top"}={}){e.save(),e.font=n,e.fillStyle=r,e.textAlign=o,e.textBaseline=a,e.fillText(t,i,s),e.restore()}static drawArrow(e,t,i,s,{height:n=mr.arrows.size,color:r=mr.arrows.color,margin:o=2}={}){const a=n/2;e.save(),e.fillStyle=r,e.beginPath(),"left"===t?(e.moveTo(i-o,s),e.lineTo(i+a-o,s-a),e.lineTo(i+a-o,s+a)):"right"===t&&(e.moveTo(i+o,s),e.lineTo(i-a+o,s-a),e.lineTo(i-a+o,s+a)),e.closePath(),e.fill(),e.restore()}static drawTextBox(e,t,i,s,{font:n=mr.font.bold,padding:r=mr.box.padding,bg:o=mr.box.background,border:a=mr.box.border,fg:l=mr.text.color,radius:h=mr.box.borderRadius}={}){e.save(),e.font=n,e.textAlign="center",e.textBaseline="middle";const c=e.measureText(t).width+2*r;br.drawRoundedRect(e,i-c/2,s-10,c,20,{fill:o,stroke:a,radius:h}),e.fillStyle=l,e.fillText(t,i,s),e.restore()}}class _r{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){const i=this.listeners[e];if(!i)return;const s=i.indexOf(t);-1!==s&&i.splice(s,1)}emit(e,...t){const i=this.listeners[e];i&&i.forEach((e=>{e(...t)}))}}function vr(e,t){if(e===t)return!0;if(null==e||null==t||"object"!=typeof e||"object"!=typeof t)return!1;const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const n of i)if(!s.includes(n)||!vr(e[n],t[n]))return!1;return!0}const yr="display",wr="control";class Cr{eventEmitter=new _r;_value=null;parent=null;constructor(e,t,i){if(this.name=e,this.parent=t,this.options=i,this.port_name=null,this.parent&&this.options&&this.options.parameter){if(!(this.options.parameter.metadata||[]).some((e=>"suppressInput"===e.name&&!0===e.value))){const t=xr(i.parameter.datatype),s=this.port=this.parent.addInput(e,t);s.widget_name=this.name,this.port_name=s.name}}}get value(){return this._value}set value(e){if(!vr(e,this._value)){const t=this._value;this._value=e,this.eventEmitter.emit("valueChanged",e,t),this.parent&&this.options&&this.options.property&&this.parent.setProperty(this.options.property,e),this.parent?.setDirtyCanvas(!0,!0)}}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}triggerParentResetSize(){this.parent&&this.parent.resetSize()}}function xr(e){let t=e.identifier?`${e.typeName} (${e.identifier})`:e.typeName;return e.baseDatatype&&(t+=`,${xr(e.baseDatatype)}`),t}class Er{constructor(){this.widgets=new Map}_createKey(e,t,i=void 0){return`${e}:${t}${i?`:${i}`:""}`}add(e,t,i=void 0){const s=e.capability,n=this._createKey(t,s,i);this.widgets.has(n)||this.widgets.set(n,new Set),this.widgets.get(n).add(e)}_getWidgetsByKey(e){return Array.from(this.widgets.get(e)||[])}get(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*"),r=this._getWidgetsByKey(s),o=this._getWidgetsByKey(n);return Array.from(new Set([...r,...o]))}getDisplaysOfType(e,t=void 0){return this.get(e,yr,t)}getControlsOfType(e,t=void 0){return this.get(e,wr,t)}has(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*");return this.widgets.has(s)||this.widgets.has(n)}hasDisplay(e,t){return this.has(e,yr,t)}hasControl(e,t){return this.has(e,wr,t)}remove(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*");this.widgets.delete(s),this.widgets.delete(n)}[Symbol.iterator](){const e=this.widgets.entries();return{next:()=>{const{done:t,value:i}=e.next();if(t)return{done:t};const[s,n]=i,[r,o,a]=s.split(":");return{value:[r,o,a,Array.from(n)],done:!1}}}}}class kr{constructor(){this.handlers=[]}addHandler(e){this.handlers.push(e)}removeHandler(e){const t=this.handlers.indexOf(e);t>-1&&this.handlers.splice(t,1)}handle(e,t){let i=0;const s=()=>{if(i<this.handlers.length){this.handlers[i++].handle(e,t,s)}};s()}}class Tr{handle(e,t,i){i()}}function Ar(e){let t=e.identifier?`${e.typeName} (${e.identifier})`:e.typeName;return e.baseDatatype&&(t+=`,${Ar(e.baseDatatype)}`),t}class Sr extends Tr{handle(e,t,i){t.inputPorts&&t.inputPorts.forEach((t=>{const i=Ar(t.datatype);e.addInput(t.name,i)})),i()}}class Lr extends Tr{handle(e,t,i){t.outputPorts&&t.outputPorts.forEach((t=>{const i=Ar(t.datatype);e.addOutput(t.name,i)})),i()}}class Ir extends Tr{constructor(e){super(),this.widgets=e}handle(e,t,i){const s=new Set(t.contents?t.contents.map((e=>e.name)):[]);t.parameters&&t.parameters.forEach((i=>{const n=i.name,r=i.datatype.typeName,o=i.datatype.identifier,a=i.datatype.identifier?`${i.datatype.typeName} (${i.datatype.identifier})`:i.datatype.typeName,l=i.defaultValue;let h;e.addProperty(n,l,a),s.has(n)&&(h=t.contents.find((e=>e.name===n)));const c=this.widgets.getControlsOfType(r,o);if(!c.length)throw new Error(`Unable to find widget of type :  ${a}`);const d=new c[0](n,e,{property:n,parameter:i,content:h});e.addCustomWidget(d)})),i()}}class Or extends Tr{constructor(e){super(),this.widgets=e}handle(e,t,i){const s=new Set(t.parameters?t.parameters.map((e=>e.name)):[]);t.contents&&t.contents.forEach((t=>{if(s.has(t.name))return;const i=t.name,n=t.datatype.typeName,r=t.datatype.identifier||"",o=t.datatype.identifier?`${t.datatype.typeName} (${t.datatype.identifier})`:t.datatype.typeName,a=this.widgets.getDisplaysOfType(n,r);if(!a.length)throw new Error(`Unable to find widget of type :  ${o}`);const l=new a[0](i,e,{content:t});e.addCustomWidget(l)})),i()}}class Nr extends e.LGraphNode{eventEmitter=new _r;constructor(e){super(e),this._shape=2,this.extensions=[],this.registerCallbackHandlers();(new $r).applyExtensions("node",this),this.eventEmitter.emit("constructorComplete",this)}addCustomWidget(e){super.addCustomWidget(e),e.registerWithParent&&e.registerWithParent(this),this.eventEmitter.emit("customWidgetAdded",e)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}update(e){this.eventEmitter.emit("nodeStatusUpdated",e)}setPropertyDefaultValue(e,t){console.log("tried setting default",e,t)}resetSize(){this.setSize(this.computeSize())}onDropFile(t,i=null){if(this.widgets&&this.widgets.length)if(null!==i){const e=this.widgets.find((e=>e.name===i));if(e&&e.onDropFile&&e.onDropFile(t))return void this.eventEmitter.emit("dropFileHandledByWidget",t,e)}else for(const e of this.widgets)if(e.onDropFile&&e.onDropFile(t))return void this.eventEmitter.emit("dropFileHandledByWidget",t,e);e.LiteGraph.log_warn(`Node ${this.type} was registered to handle a dropped file, but failed to handle it.`)}onConfigure(){this.widgets&&this.widgets.forEach((e=>{e&&e.postConfigure&&e.postConfigure()}))}registerCallbackHandlers(){this.registerCallbackHandler("onConfigure",(e=>{this.eventEmitter.emit("onConfigure",this)})),this.registerCallbackHandler("onAdded",(e=>{this.eventEmitter.emit("added",this)})),this.registerCallbackHandler("onRemoved",(e=>{this.eventEmitter.emit("removed",this)})),this.registerCallbackHandler("onPropertyChanged",((e,t,i,s)=>{this.eventEmitter.emit("propertyChanged",this,t,i,s)}))}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}}class Dr{constructor(e){this.widgets=e,this.handlers=new kr}registerHandler(e){this.handlers.addHandler(e)}removeHandler(e){this.handlers.removeHandler(e)}validateBlueprint(e){return[this.checkBlueprintHasPath.bind(this),this.checkBlueprintParametersAreSupported.bind(this),this.checkBlueprintContentsAreSupported.bind(this)].every((t=>t(e)))}getNodeNameFromBlueprint(e){return e.path.split("/").pop()}getNodePathFromBlueprint(e){return e.path.split("/").slice(0,-1).join("/")}getNodeTypeFromBlueprint(e){return e.path}checkBlueprintHasPath(e){return e.path}checkBlueprintParametersAreSupported(e){return!e.node.parameters||e.node.parameters.every((e=>{const{typeName:t,identifier:i}=e.datatype;return this.widgets.hasControl(t,i)}))}checkBlueprintContentsAreSupported(e){if(!e.node.contents)return!0;const t=new Set((e.node?.parameters||[]).map((e=>`${e.datatype.typeName}-${e.datatype.identifier}`)));return e.node.contents.every((e=>{const{typeName:i,identifier:s}=e.datatype,n=`${i}-${s}`;return!(!t.has(n)||!this.widgets.hasControl(i,s))||this.widgets.hasDisplay(i,s)}))}create(e){if(!this.validateBlueprint(e))return;const t=this,i=t.getNodeNameFromBlueprint(e);return class extends Nr{static title=i;static desc="";constructor(){super(i),t.handlers.handle(this,e.node)}}}}class $r{static instance;constructor(){if($r.instance)return $r.instance;if(void 0===e.LiteGraph)throw new Error("LiteGraph is not available in the global scope.");return this.liteGraph=e.LiteGraph,this.liteGraph.initialize(),this.nodeExtensions=[],this.canvasExtensions=[],this.editorExtensions=[],this.widgets=new Er,this.nodeClassFactory=new Dr(this.widgets),this.nodeClassFactory.registerHandler(new Sr),this.nodeClassFactory.registerHandler(new Lr),this.nodeClassFactory.registerHandler(new Ir(this.widgets)),this.nodeClassFactory.registerHandler(new Or(this.widgets)),this.liteGraph.computeTextWidth=function(e,t){if(!e)return 0;let i=e.toString();return void 0===t?this.NODE_TEXT_SIZE*i.length*.6:this.NODE_TEXT_SIZE*i.length*t},$r.instance=new Proxy(this,{get:(e,t,i)=>Reflect.has(e,t)?Reflect.get(e,t,i):(...i)=>"function"==typeof e.liteGraph[t]?e.liteGraph[t].apply(e.liteGraph,i):e.liteGraph[t]}),$r.instance}install(e,t){e.install(this,t)}installNodeBlueprints(e){e&&Array.isArray(e)&&e.forEach((e=>{this.installNodeBlueprint(e)}))}installNodeBlueprint(e){if(e){const t=this.nodeClassFactory.getNodeTypeFromBlueprint(e);if(!t)return void this.log_warn("Failed to determine node type from blueprint.");const i=this.nodeClassFactory.create(e);if(!i)return void this.log_warn("Unable to create node class from blueprint.",t,e);this.registerNodeType(t,i)}else this.log_warn("No blueprint provided to installNodeBlueprint.")}registerWidgetType(e,t,i){this.widgets.add(e,t,i)}registerFileAssociation(e,t,i=null){for(let s of e)s&&"string"==typeof s&&(this.liteGraph.node_types_by_file_extension[s.toLowerCase()]={type:t,widgetName:i})}registerNodeExtension(e,t={}){this.nodeExtensions.push([e,t])}registerCanvasExtension(e,t={}){this.canvasExtensions.push([e,t])}registerEditorExtension(e,t={}){this.editorExtensions.push([e,t])}applyExtensions(e,t){let i;switch(e){case"node":i=this.nodeExtensions;break;case"canvas":i=this.canvasExtensions;break;case"editor":i=this.editorExtensions;break;default:throw new Error(`Unknown extension type: ${e}`)}i.forEach((([e,i])=>{t.applyExtension(e,i)}))}getVersion(){return this.liteGraph.VERSION}}class Gr extends e.LGraphCanvas{eventEmitter=new _r;constructor(e,t,i){super(e,t,i),this.extensions=[];(new $r).applyExtensions("canvas",this)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}setDefaultViewpoint(){if(!this.graph||!this.graph._nodes||0===this.graph._nodes.length)return this.ds.offset[0]=0,this.ds.offset[1]=0,this.ds.scale=1,void this.setDirty(!0,!0);let e,t;this.graph._nodes.forEach((i=>{const s=i.getBounding(undefined,!0);void 0===e||void 0===t?(e=s[0],t=s[1]):(e=Math.min(e,s[0]),t=Math.min(t,s[1]))})),this.ds.offset[0]=10-e,this.ds.offset[1]=10-t,this.ds.scale=1,this.setDirty(!0,!0)}}class Mr{static Convert(e){const t=JSON.parse(JSON.stringify(e.serialize())),i=this.#e(t.nodes),s=this.#t(i,t.links);return this.#i({...t,nodes:i,links:s})}static#e(e){return e.map((e=>({...e,id:String(e.id)})))}static#t(e,t){return t.map((t=>{const[i,s,n,r,o,a]=t,l=String(i),h=String(s),c=String(r),d=e.find((e=>e.id===h)),u=e.find((e=>e.id===c)),p=d&&d.outputs[n]?.name||"unknown",f=u&&u.inputs[o]?.name||"unknown";return[l,h,p,c,f,a]}))}static#i(e){const{extra:t,version:i,config:s,last_node_id:n,last_link_id:r,...o}=e;return o.nodes=o.nodes.map((e=>{const{flags:t,shape:i,size:s,pos:n,properties:r,inputs:o,outputs:a,...l}=e;return r&&Object.keys(r).length&&(l.properties=r),o&&o.length&&(l.inputs=o),a&&a.length&&(l.outputs=a),l})),o}}class Pr extends e.LGraph{#s=null;emitOnNodePropertyChangeBound=null;constructor(e){super(e),this.eventEmitter=new _r,this.#s=null,this.isConfiguring=!1,this.emitOnNodePropertyChangeBound=this.emitOnNodePropertyChange.bind(this),this.updateGraphUuid()}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}get uuid(){return this.#s}set uuid(e){this.#s=e}get isEmpty(){return 0===this._nodes.length}updateGraphUuid(){this.#s=e.LiteGraph.uuidv4()}update(e){const t=e&&Array.isArray(e.nodes)?new Map(e.nodes.map((e=>[e.id,e]))):new Map;this._nodes.forEach((e=>{const i=t.get(e.id)||{};e.update(i)}))}getMissingNodeTypes(t){const i=t.nodes||[],s=[];return i.forEach((t=>{const i=t.type;e.LiteGraph.getNodeType(i)||s.push(i)})),s.length>0?[...new Set(s)]:null}configure(e,t){const i=this.getMissingNodeTypes(e);if(i){const e=i.map((e=>`<li>${e}</li>`)).join("");throw new Error(`${`The following node types are missing:<ul>${e}</ul>Please check that the required blueprints are loaded.`}`)}this.eventEmitter.emit("beforeGraphConfigure",this),this.isConfiguring=!0,super.configure(e,t),this.isConfiguring=!1,this.eventEmitter.emit("graphConfigure",this)}serialize(){let e=super.serialize();return e.uuid=this.#s,e}exportForBackend(){return Mr.Convert(this)}clear(){super.clear(),this.eventEmitter&&this.eventEmitter.emit("clear",this)}onNodeAdded(e){this.isConfiguring||this.updateGraphUuid(),e.on("propertyChanged",this.emitOnNodePropertyChangeBound),this.eventEmitter.emit("nodeAdded",this,e)}onNodeRemoved(e){this.isConfiguring||this.updateGraphUuid(),e.off("propertyChanged",this.emitOnNodePropertyChangeBound),this.eventEmitter.emit("nodeRemoved",this,e)}onConnectionChange(e){this.isConfiguring||this.updateGraphUuid(),this.eventEmitter.emit("connectionChange",this,e)}onBeforeChange(){this.eventEmitter.emit("beforeChange",this)}onAfterChange(){this.eventEmitter.emit("afterChange",this)}emitOnNodePropertyChange(e,t,i,s){this.eventEmitter.emit("nodePropertyChanged",this,e,t,i,s)}}class Br{constructor(e){this.toastContainer=e}generateToastId(){const e=Math.floor(1e3*Math.random());return`${(new Date).getTime()}-${e}-toast`}showToast(e,t,i,s={}){const n=this.generateToastId();let r,o,a,l,h,c="";switch(i){case"error":r="bg-danger",o="text-white",a="btn-close-white",l=4e3,h=!0;break;case"warning":r="bg-warning",o="text-black",a="btn-close-black",l=4e3,h=!0;break;case"success":r="bg-success",o="text-white",a="btn-close-white",l=4e3,h=!0;break;case"info":r="bg-light",o="text-black",a="btn-close-black",l=4e3,h=!0;break;case"okCancel":r="bg-light",o="text-black",a="btn-close-black",l=0,h=!1,c=`\n          <div class="d-flex justify-content-end mt-2">\n            <button class="btn btn-primary btn-sm me-2" id="${n}-ok-btn">\n              OK\n            </button>\n            <button class="btn btn-secondary btn-sm" id="${n}-cancel-btn">\n              Cancel\n            </button>\n          </div>\n        `;break;default:r="bg-secondary",o="text-white",a="btn-close-white"}const d=`\n            <div id="${n}" class="toast ${r} ${o}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="${h}" data-bs-delay="${l}">\n                <div class="toast-header ${r} ${o}">\n                    <strong class="me-auto">${e}</strong>\n                    <button type="button" class="btn-close ${a}" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n                <div class="toast-body ${o}">${t}${c}</div>\n            </div>\n        `;let u=document.createElement("div");u.innerHTML=d,this.toastContainer.appendChild(u),$(`#${n}`).toast("show"),this.setupToastEventListeners(n,i,s)}setupToastEventListeners(e,t,i){"okCancel"===t&&(document.getElementById(`${e}-ok-btn`).addEventListener("click",(()=>{i.onOk&&i.onOk(),$(`#${e}`).toast("hide")})),document.getElementById(`${e}-cancel-btn`).addEventListener("click",(()=>{i.onCancel&&i.onCancel(),$(`#${e}`).toast("hide")}))),$(`#${e}`).on("hidden.bs.toast",(function(){this.remove()}))}showWarning(e,t){this.showToast(e,t,"warning")}showError(e,t){this.showToast(e,t,"error")}showSuccess(e,t){this.showToast(e,t,"success")}showInfo(e,t){this.showToast(e,t,"info")}showMessage(e,t){this.showToast(e,t,"")}showOkCancel(e,t,i){this.showToast(e,t,"okCancel",i)}}class Fr{constructor(e){this.name=e,this.container=document.createElement("div"),this.container.className="btn-group",this.container.setAttribute("role","group"),this.container.setAttribute("aria-label",`${e} button group`)}addButton(e){const t=e.render();t.classList.add("btn","btn-primary"),this.container.appendChild(t)}render(){return this.container}addSeparator(){const e=document.createElement("div");e.className="vr",this.container.appendChild(e)}}class jr{constructor(e,t,i,s,n){this.id=e,this.label=t,this.iconClass=i,this.onClick=s,this.tooltip=n||t,this.button=null}render(){this.button=document.createElement("button"),this.button.id=this.id,this.button.className="mgui mgui-toolbar-button btn btn-primary",this.button.title=this.tooltip;let e="";return this.iconClass&&(e+=`<i class="${this.iconClass}"></i> `),e+=`<span class="button-label">${this.label}</span>`,this.button.innerHTML=e,this.onClick&&this.button.addEventListener("click",(e=>{this.onClick(e),e.currentTarget.blur()})),this.button}toggleButtonState(e){this.button&&(this.button.disabled=!e,this.button.classList.toggle("disabled",!e))}enable(){this.toggleButtonState(!0)}disable(){this.toggleButtonState(!1)}addClass(e){this.button&&this.button.classList.add(e)}removeClass(e){this.button&&this.button.classList.remove(e)}}class Rr{render(){const e=document.createElement("div");return e.className="mgui-toolbar-separator",e}}class Hr{constructor(e){this.editor=e,this.getBlueprintsButton,this.editor.on("toolbarReady",(()=>{this.getBlueprintsButton=this.editor.addButton("GetBlueprints",{label:"Blueprints",iconClass:"fa-solid fa-layer-group",onClick:this.onBlueprintsClicked.bind(this),tooltip:"Get Blueprints",section:"left"}),this.onBlueprintsClicked()}))}async onBlueprintsClicked(){const e=new $r;LiteGraph.log_log("api get blueprints"),this.editor.showInfo("Loading Blueprints","Please wait while the blueprints are fetched from the server."),this.getBlueprintsButton.disable();try{const t=await this.editor.apiSend("GetBlueprints");LiteGraph.log_log("api get blueprints reply",t),e.installNodeBlueprints(t.blueprints),t?.blueprints?.length&&this.editor.showSuccess("Blueprints loaded successfully",`${t.blueprints.length} blueprints were received.`)}catch(e){this.editor.showError("Failed to get blueprints",e)}finally{this.getBlueprintsButton.enable()}}}class qr{constructor(e){this.editor=e,this.setupEditorListeners()}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.editor.addButton("New",{label:"New",iconClass:"fa-solid fa-file",onClick:this.onNewClicked.bind(this),tooltip:"New Graph",section:"left",group:"fileOperations"}),this.editor.addButton("Open",{label:"Open",iconClass:"fa-solid fa-folder-open",onClick:this.onOpenClicked.bind(this),tooltip:"Open Graph",section:"left",group:"fileOperations"}),this.editor.addButton("Save",{label:"Save",iconClass:"fa-solid fa-floppy-disk",onClick:this.onSaveClicked.bind(this),tooltip:"Save Graph",section:"left",group:"fileOperations"})}))}onNewClicked(){this.editor.clearGraph()}supportsFilePicker(){return!(!window.showOpenFilePicker||!window.showSaveFilePicker)}getOrCreateGraphFileInput(){const e="graph-upload";let t=document.getElementById(e);return t||(t=document.createElement("input"),t.type="file",t.style.display="none",t.id=e,t.accept=".mgraph",document.body.appendChild(t)),t}async onOpenClicked(){if(this.supportsFilePicker())try{const[e]=await window.showOpenFilePicker({types:[{description:"Graph Files",accept:{"application/mgraph":[".mgraph"]}}],multiple:!1}),t=await e.getFile(),i=await t.text(),s=JSON.parse(i);try{this.editor.loadGraph(s),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${t.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}}catch(e){if("AbortError"===e.name)return;return this.editor.showError("Open Failed : File Access","There was an error while trying to access or read the file. Please check the console for more information."),void console.error(e)}else{const e=this.getOrCreateGraphFileInput();e.value="",e.onchange=async t=>{if(!e.files||!e.files.length)return;const i=e.files[0];if(!i.name.toLowerCase().endsWith(".mgraph"))return this.editor.showError("Open Failed : Wrong File Type",'Please select a ".mgraph" file.'),void(e.value="");try{const e=await i.text(),t=JSON.parse(e);this.editor.loadGraph(t),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${i.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}},e.click()}}sanitizeFilename(e){return e.replace(/[\/\\:*?"<>|]/g,"")}async onSaveClicked(){const e=this.editor.serializeGraph(),t=JSON.stringify(e),i="untitled";let s=i;if(e&&e.extra&&e.extra.filemeta&&e.extra.filemeta.name){const t=e.extra.filemeta.name;s=this.sanitizeFilename(t),s||(s=i)}if(this.supportsFilePicker())try{const e=await window.showSaveFilePicker({suggestedName:s+".mgraph",types:[{description:"Graph Files",accept:{"application/mgraph":[".mgraph"]}}]}),i=await e.createWritable();await i.write(t),await i.close()}catch(e){if("AbortError"===e.name)return;console.error("Failed to save file:",e)}else{const e=new Blob([t],{type:"application/mgraph"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download=s+".mgraph",document.body.appendChild(i),i.click(),setTimeout((()=>{document.body.removeChild(i),URL.revokeObjectURL(i.href)}),0)}}}class Wr{constructor(e){this.editor=e,this.currentGraph=null,this.graphIsConfiguring=!1,this.pollingTimeoutId=null,this.pollingPeriodInMs=1e3,this.requestQueueMaxSize=1,this.requestQueue=[],this.processingRequest=!1,this.graphCreatePending=!1,this.graphCreateDirty=!1,this.activeGraphAction=null,this.handleClear=this.handleClear.bind(this),this.handleConnectionChange=this.handleConnectionChange.bind(this),this.handleNodeAdded=this.handleNodeAdded.bind(this),this.handleNodeRemoved=this.handleNodeRemoved.bind(this),this.handlePropertyChange=this.handlePropertyChange.bind(this),this.handleBeforeGraphConfigure=this.handleBeforeGraphConfigure.bind(this),this.handleGraphConfigure=this.handleGraphConfigure.bind(this),this.setupEditorListeners(),this.setupToolbarControls(),this.switchGraph(this.editor.getGraph())}setupEditorListeners(){this.editor.on("graphSet",(e=>{this.switchGraph(e)}))}setupToolbarControls(){}switchGraph(e){this.currentGraph&&this.unregisterGraphListeners(this.currentGraph),this.currentGraph=e,this.currentGraph&&this.registerGraphListeners(e)}unregisterGraphListeners(e){e.off("clear",this.handleClear),e.off("connectionChange",this.handleConnectionChange),e.off("nodeAdded",this.handleNodeAdded),e.off("nodeRemoved",this.handleNodeRemoved),e.off("nodePropertyChanged",this.handlePropertyChange),e.off("beforeGraphConfigure",this.handleBeforeGraphConfigure),e.off("graphConfigure",this.handleGraphConfigure)}registerGraphListeners(e){e.on("clear",this.handleClear),e.on("connectionChange",this.handleConnectionChange),e.on("nodeAdded",this.handleNodeAdded),e.on("nodeRemoved",this.handleNodeRemoved),e.on("nodePropertyChanged",this.handlePropertyChange),e.on("beforeGraphConfigure",this.handleBeforeGraphConfigure),e.on("graphConfigure",this.handleGraphConfigure)}enqueueRequest(e,...t){this.requestQueue.length>=this.requestQueueMaxSize&&(this.requestQueue=this.requestQueue.slice(1-this.requestQueueMaxSize)),this.requestQueue.push({requestFunction:e,args:t}),this.processRequests()}async processRequests(){if(this.processingRequest||0===this.requestQueue.length)return;this.processingRequest=!0;const{requestFunction:e,args:t}=this.requestQueue.shift();try{await e.apply(this,t)}catch(e){console.error("processRequests error",e)}finally{this.processingRequest=!1,this.processRequests()}}handleBeforeGraphConfigure(){this.graphIsConfiguring=!0}handleGraphConfigure(e){this.graphIsConfiguring=!1,this.enqueueGraphCreate(e)}handleClear(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleConnectionChange(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleNodeAdded(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleNodeRemoved(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handlePropertyChange(e,t,i,s){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueRequest(this.updateParameterValue,e,t,i,s)}enqueueGraphCreate(e){this.graphCreatePending?this.graphCreateDirty=!0:(this.graphCreatePending=!0,this.enqueueRequest((async e=>{await this.createGraph(e),this.graphCreatePending=!1,this.graphCreateDirty&&(this.graphCreateDirty=!1,this.enqueueGraphCreate(e))}),e))}async createGraph(t){this.activeGraphAction=t.uuid,this.stopPolling();const i=t.exportForBackend();e.LiteGraph.log_log("api create graph",t.uuid,i);try{const e=await this.editor.apiSend("CreateGraph",{graph:i});e.uuid===t.uuid&&this.currentGraph.uuid===t.uuid&&(t.update(e),this.startPolling())}catch(e){console.error("createGraph error",e)}finally{this.activeGraphAction=null}}async updateParameterValue(t,i,s,n){this.activeGraphAction=t.uuid,this.stopPolling(),e.LiteGraph.log_log("api update property",i,s,n);try{const r=await this.editor.apiSend("UpdateParameterValue",{graphUuid:t.uuid,nodeId:i.id,parameterName:s,parameterValue:n});if(r!==this.currentGraph.uuid)return void e.LiteGraph.log_info(`Update response UUID (${r}) does not match current graph (${this.currentGraph.uuid}), ignoring.`);this.startPolling()}catch(i){switch(i.code){case"INVALID_GRAPH_INSTANCE_ID":case"NO_GRAPH_INSTANCE_AVAILABLE":case"GRAPH_UUID_MISSMATCH":t.uuid===this.currentGraph.uuid?(e.LiteGraph.log_info(`api update failed [${i.code}], resending full graph`),await this.createGraph(t)):e.LiteGraph.log_info("Skipped createGraph fallback, graph is no longer active");break;default:console.error("Update parameter value failed:",i)}}finally{this.activeGraphAction=null}}stopPolling(){this.pollingTimeoutId&&(clearTimeout(this.pollingTimeoutId),this.pollingTimeoutId=null,e.LiteGraph.log_log("polling stopped"))}isPolling(){return Boolean(this.pollingTimeoutId)}startPolling(){if(this.currentGraph.isEmpty)return void this.stopPolling();const t=this.currentGraph.uuid,i=async()=>{if(this.isPolling())try{const s=await this.editor.apiSend("GetStatus",{graphUuid:t});if(e.LiteGraph.log_log("polling reply >",s),s.uuid!==t||this.currentGraph.uuid!==t)return e.LiteGraph.log_info("polling response rejected (uuid mismatch)"),void this.stopPolling();this.currentGraph.update(s),this.pollingTimeoutId=setTimeout(i,this.pollingPeriodInMs)}catch(e){console.error("polling error",e),this.stopPolling()}};e.LiteGraph.log_log("polling started"),this.pollingTimeoutId=setTimeout(i,this.pollingPeriodInMs)}}class zr{constructor(e){this.editor=e,this.editorCanvas=e.getGraphCanvas(),this.editor.on("toolbarReady",(()=>{this.getBlueprintsButton=this.editor.addButton("ToggleExecuteOrder",{label:"",iconClass:"fa-solid fa-share-nodes",onClick:this.onToggleExecuteOrderClicked.bind(this),tooltip:"Toggle Execution Order Display",section:"left"})}))}onToggleExecuteOrderClicked(){this.editorCanvas.render_execution_order=!this.editorCanvas.render_execution_order,this.editorCanvas.setDirty(!0,!0)}}class Vr{constructor(e){this.node=e,this.defaultColor=e.color,this.defaultBgColor=e.bgcolor,this.defaultTooltip=e.properties.tooltip,this.errorStyle={bgcolor:"#96000c",color:"#750000"},e.on("nodeStatusUpdated",this.handleStatusUpdate.bind(this))}hasPrecheckAlarms(e){if(Array.isArray(e.extensions))for(let t of e.extensions)if("precheck"===t.name&&Array.isArray(t.alarms)&&t.alarms.length>0)return!0;return!1}getFirstAlarm(e){for(const t of e.extensions??[])if("precheck"===t.name&&t.alarms?.length>0){const e=t.alarms[0];return`${e.message} : ${e.reason}`}return null}handleStatusUpdate(e){const t=this.node.color,i=this.node.bgcolor;this.hasPrecheckAlarms(e)?(this.node.color=this.errorStyle.color,this.node.bgcolor=this.errorStyle.bgcolor,this.node.properties.tooltip=this.getFirstAlarm(e)):(this.node.color=this.defaultColor,this.node.bgcolor=this.defaultBgColor,this.node.properties.tooltip=this.defaultTooltip),t===this.node.color&&i===this.node.bgcolor||this.node.setDirtyCanvas(!0,!0)}}const Ur=[];function Kr(e){const t=new Set;return[function(){const i=Ur[Ur.length-1];return i&&function(e,t){t.add(e),e.dependencies.add(t)}(i,t),e},function(i){e=i;for(const e of[...t])e.execute()}]}function Xr(e){const t={execute(){!function(e){for(const t of e.dependencies)t.delete(e);e.dependencies.clear()}(t),Ur.push(t),e(),Ur.pop()},dependencies:new Set};t.execute()}function Qr(e,t){return e.length===t.length&&e.every(((e,i)=>e===t[i]))}function Yr(e,t){e.value=t,e.dispatchEvent(new Event("change"))}function Jr(e,t){const i=document.createElement(e);return Object.assign(i,t)}function Zr(e,t){return"string"==typeof e?e.split(t):Array.isArray(e)?e.flatMap((e=>"string"==typeof e?e.split(t):[])):[]}const eo="use-bootstrap-tag",to=`${eo}-target`;function io(e){const t=e,i=t.nextElementSibling;i&&i.classList.contains(eo)&&i.remove();const s=Jr("div");t.insertAdjacentElement("afterend",s);const n=t.dataset,r={separator:n.ubTagSeparator||",",variant:n.ubTagVariant||"secondary",xPosition:n.ubTagXPosition||"right",isDuplicate:void 0!==n.ubTagDuplicate,max:+n.ubTagMax>0?+n.ubTagMax:void 0,noInputOnblur:void 0!==n.ubTagNoInputOnblur},o=()=>s.querySelectorAll("button"),a=e=>{e.classList.add("duplicate"),setTimeout((()=>{e.classList.remove("duplicate")}),150)},l=()=>t.value,h=()=>l().split(r.separator).filter((e=>""!==e)),c=e=>{const i=h(),s=Zr(e,r.separator);if(!r.max||i.length<r.max){const e=[];!r.isDuplicate&&i.forEach(((t,i)=>s.includes(t)&&e.push(i)));const n=[];s.forEach((e=>{i.includes(e)?r.isDuplicate&&n.push(e):n.push(e)})),i.push(...n),Qr(h(),i)||(Yr(t,i.join(r.separator)),n.forEach((e=>{const t=o()[i.lastIndexOf(e)],s=t.offsetHeight;t.style.height=0,setTimeout((()=>t.style.height=`${s}px`),0),setTimeout((()=>t.style.removeProperty("height")),150)}))),r.isDuplicate||e.forEach((e=>a(o()[e])))}else s.length>0&&o().forEach(a)},d=e=>{const i=h();Zr(e,r.separator).forEach((e=>function(e,t){const i=e.lastIndexOf(t);-1!==i&&e.splice(i,1)}(i,e))),Qr(h(),i)||Yr(t,i.join(r.separator))},u=t.classList,p=t.disabled;t.tabIndex=-1,u.add(to);const[f,g]=Kr(t.value),[m,b]=Kr(!1),[_,v]=Kr(""),y=()=>f().split(r.separator).filter((e=>""!==e.trim())),w=()=>y().length?"":t.placeholder;s.className=`${eo} d-flex flex-wrap align-items-center gap-1 ${u.value}`.replace(to,""),Xr((()=>{m()?s.classList.add("focus"):s.classList.remove("focus")}));const C=()=>{var e;return null==(e=s.querySelector("input"))?void 0:e.focus()},x=e=>{e>=0&&d(y()[e])},E=(e=!1)=>{const t=_().trim();""===t&&v(""),(_().includes(r.separator)||e&&""!==_())&&(c(t.split(r.separator).filter((e=>""!==e.trim()))),v(""))},k=Jr("button",{type:"button",className:`align-items-center gap-1 d-inline-flex py-0 border-0 btn btn-${r.variant}`,disabled:p});u.contains("form-control-sm")&&k.classList.add("btn-sm"),u.contains("form-control-lg")&&k.classList.add("btn-lg"),"left"===r.xPosition&&k.classList.add("flex-row-reverse");const T=Jr("span",{className:"d-inline-flex",role:"button",tabIndex:-1,innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>'});if(Xr((()=>{var e;e=y(),o().forEach((e=>e.remove())),e.reverse().forEach(((t,i)=>{const n=e.length-1-i,r=k.cloneNode();if(r.innerHTML=t,r.onfocus=()=>{r.classList.add("active"),b(!0)},r.onblur=()=>{r.classList.remove("active"),b(!1)},r.onkeydown=({key:e})=>{if("Backspace"===e||"Delete"===e){x(n);const t="Backspace"===e?n-1:y().length===n?-1:n;-1===t?C():o()[t].focus()}},!p){const e=T.cloneNode(!0);e.onclick=()=>{x(n),C()},r.append(e)}s.prepend(r)}))})),!p){const e=Jr("div",{className:"input-wrapper"}),t=Jr("span"),i=Jr("input",{type:"text"});i.onfocus=()=>{b(!0)},i.onblur=()=>{b(!1),r.noInputOnblur?v(""):E(!0)},i.onkeydown=e=>{""===_()&&"Backspace"===e.key&&x(y().length-1),""!==_()&&"Enter"===e.key&&(E(!0),e.preventDefault())},i.oninput=()=>{v(i.value),E()},Xr((()=>{t.innerHTML=_()||w()||"i",i.placeholder=w(),i.value=_()})),e.append(t,i),s.append(e)}return s.onclick=e=>{"BUTTON"!==e.target.tagName&&C()},t.addEventListener("change",(()=>{g(t.value)})),t.addEventListener("focus",C),{getValue:l,getValues:h,addValue:c,removeValue:d}}class so{constructor(e){this.editor=e,this.setupEditorListeners()}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.fileMetaDisplayControl=new no("FileMetaDisplayControl",this.onClick.bind(this)),this.editor.addToolbarControl(this.fileMetaDisplayControl,{section:"right"}),this.editor.on("graphSet",(e=>{this.fileMetaDisplayControl.update(e)})),this.editor.on("graphLoaded",(e=>{this.fileMetaDisplayControl.update(e)})),this.editor.on("graphCleared",(e=>{this.fileMetaDisplayControl.update(e)}))}))}onClick(){const e=this.editor.graph;if(!e)return;const t=e.extra&&e.extra.filemeta&&e.extra.filemeta.name||"",i=e.extra&&e.extra.filemeta&&e.extra.filemeta.description||"",s=(e.extra&&e.extra.filemeta&&e.extra.filemeta.tags||[]).join(", ");this.editor.showModal({title:"Edit Graph Details",body:`\n    <form id="metadataForm">\n        <div class="mgui mb-3">\n          <label for="fileMetaName" class="form-label">Name</label>\n          <input type="text" class="form-control" id="fileMetaName" placeholder="Enter name" required value="${t}" autofocus>\n        </div>\n        <div class="mgui mb-3">\n          <label for="fileMetaDescription" class="form-label">Description</label>\n          <textarea class="form-control" id="fileMetaDescription" rows="2" placeholder="Enter description">${i}</textarea>\n        </div>\n        <div class="mgui mb-3 active">\n          <label for="fileMetaTags" class="form-label">Tags</label>\n          <div class="input-wrapper">\n            <input type="text" class="form-control active" id="fileMetaTags" placeholder="Enter tags (comma separated)" value="${s}" \n            data-ub-tag-separator=","\n            data-ub-tag-variant="primary"\n            data-ub-tag-x-position="left"\n            data-ub-tag-no-input-onblur>\n          </div>\n        </div>\n        <button type="submit" class="d-none"></button>\n      </form>\n\n  `,buttons:[{label:"Cancel",type:"secondary",onClick:e=>{e.hide()}},{label:"Ok",type:"primary",onClick:e=>{const t=e._element.querySelector("#fileMetaName").value,i=e._element.querySelector("#fileMetaDescription").value,s=e._element.querySelector("#fileMetaTags").value,n=this.editor.graph;n.extra.filemeta=n.extra.filemeta||{},n.extra.filemeta.name=t.trim()&&t||"Untitled",n.extra.filemeta.description=i,n.extra.filemeta.tags=s.split(",").map((e=>e.trim())),this.fileMetaDisplayControl.update(n),e.hide()}}],preShow:(e,t)=>{io(e._element.querySelector("#fileMetaTags"))}})}}class no{constructor(e,t){this.container=document.createElement("div"),this.container.id=e,this.container.innerHTML='\n      <div class="metadata-summary" style="cursor: pointer;">\n        <div class="d-flex align-items-center">\n          <span class="summary-name text-truncate">Untitled</span>\n          <i class="far fa-edit edit-icon" style="margin-left: 10px;"></i>\n        </div>\n      </div>',this.summaryName=this.container.querySelector(".summary-name"),this.metadataSummary=this.container.querySelector(".metadata-summary"),"function"==typeof t&&this.metadataSummary.addEventListener("click",(()=>t()))}render(){return this.container}update(e){const t=e&&e.extra&&e.extra.filemeta||{};this.summaryName.textContent=t.name||"Untitled",this.metadataSummary.onclick=()=>{"function"==typeof this.onClickSummary&&this.onClickSummary()}}}class ro{constructor(e,t={}){this.editor=e,this.examplesPath=t.ServerExamplesEditorExtensionUrl||"./example/list",this.setupEditorListeners(),this.examples=[],this.modal=null,this.searchInputField=null,this.resultsContainer=null,this.resultsCount=null,this.searchInTitle=null,this.searchInDescription=null,this.searchInTags=null,this.searchInNodes=null,this.sortSelect=null,this.currentSortMode="latest",localStorage.setItem("searchInTitle","true"),localStorage.setItem("searchInDescription","true"),localStorage.setItem("searchInTags","true"),localStorage.setItem("searchInNodes","false")}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.editor.addButton("Examples",{label:"Examples",iconClass:"fa-solid fa-book-open",onClick:this.onExampleButtonClicked.bind(this),tooltip:"Open Examples Search",section:"left"});const e=this;!function t(i=20,s=2e3){fetch(e.examplesPath).then((e=>{if(503!==e.status){if(e.ok)return e.json();throw new Error(`Server responded with status: ${e.status}`)}if(!(i>0))throw new Error("Maximum retries reached. Server still busy.");console.warn("Server busy. Retrying in 2 seconds..."),setTimeout((()=>t(i-1,s)),s)})).then((t=>{if(t){const i=t.examples.map((e=>({name:e?.name||"Untitled Example",description:e?.description||"No description available",tags:e?.tags||[],url:e?.url||"#",nodes:e?.nodes||[],lastModified:e?.lastModified||null})));e.examples=i}})).catch((t=>{console.error("Error fetching examples:",t),this.editor.showError("Error fetching examples:",t.message),e.examples=[]}))}()}))}async onExampleButtonClicked(){this.editor.showModal({title:"Example Search",body:'\n      <form id="exampleSearch">\n        <div class="input-group mb-4">\n          <input\n            type="text"\n            id="searchInput"\n            class="form-control form-control-lg"\n            placeholder="Search examples..."\n            aria-label="Search graphs"\n            autofocus\n          />\n        </div>\n        <div class="row">\n          \x3c!-- Left Panel - Search Criteria --\x3e\n          <div class="col-md-3">\n            <div class="border-end pe-3">\n              <h6 class="mb-3 text-muted">Search In</h6>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="titleCheck" checked />\n                <label class="form-check-label" for="titleCheck">Title</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="descCheck" checked />\n                <label class="form-check-label" for="descCheck">Description</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="tagsCheck" checked />\n                <label class="form-check-label" for="tagsCheck">Tags</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="nodesCheck" />\n                <label class="form-check-label" for="nodesCheck">Node Types</label>\n              </div>\n            </div>\n          </div>\n  \n          \x3c!-- Right Panel - Search Results --\x3e\n          <div class="col-md-9 search-results">\n            <div class="d-flex justify-content-between align-items-center mb-2">\n              <h6 class="text-muted m-0">\n                Results (<span id="resultsCount">0</span>)\n              </h6>\n\n              <div class="d-flex align-items-center">\n                <label for="sortSelect" class="me-2 mb-0 text-muted small">Sort by:</label>\n                <select id="sortSelect" class="form-select form-select-sm w-auto">\n                  <option value="latest">Latest</option>\n                  <option value="alpha">Alphabetical</option>\n                </select>\n              </div>\n            </div>\n\n            <div class="mb-2 text-muted small">\n              Click on a result to open\n            </div>\n\n            <div id="resultsContainer" class="d-flex flex-column border rounded p-2" style="max-height: 60vh; overflow-y: auto;">\n              \x3c!-- Results will be dynamically inserted here --\x3e\n            </div>\n          </div>\n        <button type="submit" class="d-none"></button>\n      </form>\n      ',buttons:[{label:"Close",type:"primary",onClick:e=>{e.hide()}}],dialogClass:"modal-lg",preShow:(e,t)=>{this.modal=e,this.searchInputField=e._element.querySelector("#searchInput"),this.resultsContainer=e._element.querySelector("#resultsContainer"),this.resultsCount=e._element.querySelector("#resultsCount"),this.searchInTitle=e._element.querySelector("#titleCheck"),this.searchInDescription=e._element.querySelector("#descCheck"),this.searchInTags=e._element.querySelector("#tagsCheck"),this.searchInNodes=e._element.querySelector("#nodesCheck"),this.sortSelect=e._element.querySelector("#sortSelect"),this.currentSortMode=localStorage.getItem("exampleSortMode")||"latest",this.sortSelect.value=this.currentSortMode,this.sortSelect.addEventListener("change",(()=>{this.currentSortMode=this.sortSelect.value,this.search()})),this.searchInTitle.checked="true"===localStorage.getItem("searchInTitle"),this.searchInDescription.checked="true"===localStorage.getItem("searchInDescription"),this.searchInTags.checked="true"===localStorage.getItem("searchInTags"),this.searchInNodes.checked="true"===localStorage.getItem("searchInNodes"),this.searchInputField.addEventListener("input",this.handleInputChange),this.searchInputField.addEventListener("keypress",this.handleKeypress),this.searchInTitle.addEventListener("change",this.handleCheckboxChange),this.searchInDescription.addEventListener("change",this.handleCheckboxChange),this.searchInTags.addEventListener("change",this.handleCheckboxChange),this.searchInNodes.addEventListener("change",this.handleCheckboxChange)},onShow:()=>{this.search()},onHidden:()=>{localStorage.setItem("searchInTitle",this.searchInTitle.checked?"true":"false"),localStorage.setItem("searchInDescription",this.searchInDescription.checked?"true":"false"),localStorage.setItem("searchInTags",this.searchInTags.checked?"true":"false"),localStorage.setItem("searchInNodes",this.searchInNodes.checked?"true":"false"),localStorage.setItem("exampleSortMode",this.currentSortMode),this.searchInputField.removeEventListener("input",this.handleInputChange),this.searchInputField.removeEventListener("keypress",this.handleKeypress),this.searchInTitle.removeEventListener("change",this.handleCheckboxChange),this.searchInDescription.removeEventListener("change",this.handleCheckboxChange),this.searchInTags.removeEventListener("change",this.handleCheckboxChange),this.searchInNodes.removeEventListener("change",this.handleCheckboxChange),this.modal=null,this.searchInputField=null,this.resultsContainer=null,this.resultsCount=null,this.searchInTitle=null,this.searchInDescription=null,this.searchInTags=null,this.searchInNodes=null,this.sortSelect=null}})}handleInputChange=e=>{this.search()};handleCheckboxChange=()=>{this.search()};handleKeypress=e=>{if("Enter"===e.key){e.preventDefault();const t=this.resultsContainer.firstChild;t&&t.click()}};search(){const e=this.searchInputField.value.trim().toLowerCase();this.resultsContainer.innerHTML="";let t=this.examples.filter((t=>{let i=!1;return this.searchInTitle.checked&&t.name&&t.name.toLowerCase().includes(e)&&(i=!0),this.searchInDescription.checked&&t.description&&t.description.toLowerCase().includes(e)&&(i=!0),this.searchInTags.checked&&t.tags&&t.tags.some((t=>t.toLowerCase().includes(e)))&&(i=!0),this.searchInNodes.checked&&t.nodes&&t.nodes.some((t=>t.toLowerCase().includes(e)))&&(i=!0),i}));"alpha"===this.currentSortMode?t.sort(((e,t)=>e.name.localeCompare(t.name))):"latest"===this.currentSortMode&&t.sort(((e,t)=>{const i=new Date(e.lastModified||0).getTime();return new Date(t.lastModified||0).getTime()-i})),t.forEach((t=>{const i=document.createElement("div");i.className="card shadow-sm mb-3  example-card position-relative",i.innerHTML=`\n       ${this.isNew(t.lastModified)?'<div class="ribbon-new"><span>NEW</span></div>':""}\n        <div class="card-body">\n       \n          <h5 class="card-title">${this.highlight(t.name,e,this.searchInTitle.checked)}\n          </h5>\n          <p class="card-text">${this.highlight(t.description,e,this.searchInDescription.checked)}</p>\n          ${this.searchInTags.checked?t.tags.map((t=>`<span class="badge bg-info me-1">${this.highlight(t,e,this.searchInTags.checked)}</span>`)).join(""):""}\n            ${this.searchInNodes.checked?t.nodes.map((t=>`<span class="badge bg-secondary me-1">${this.highlight(t,e,!0)}</span>`)).join(""):""}\n        <p class="card-text text-muted small mt-2 mb-0">\n          Last modified: ${this.formatDate(t.lastModified)}\n        </p>\n        </div>\n      `,this.resultsContainer.appendChild(i),i.onclick=()=>{this.modal.hide(),this.onExampleClicked(t)}})),this.resultsCount.innerHTML=`${t.length}`}isNew(e){if(!e)return!1;return(new Date-new Date(e))/864e5<=14}formatDate(e){if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}highlight(e,t,i){if(!i)return e;if(!t)return e;const s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`(${s})`,"gi");return e.replace(n,(e=>`<mark>${e}</mark>`))}async onExampleClicked(e){try{const t=await fetch(`${e.url}`),i=await t.json();try{this.editor.loadGraph(i),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${e.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}}catch(e){return this.editor.showError("Open Failed : Fetch Error","There was an error while trying to download the file. Please check the console for more information."),void console.error(e)}}}exports.CheckboxComponent=class{constructor(e,t,i){this.eventEmitter=new _r,this.label=e,this.colorGenerator=i,this._isChecked=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor(),this.checkboxSize=20,this.checkboxMargin=5,this.checkboxColor=this.colorGenerator.getValueColor(),this.checkboxX=0,this.checkboxY=0,this.labelEndPosition=0}get isChecked(){return this._isChecked}set isChecked(e){this._isChecked=e,this.eventEmitter.emit("onChange",this._isChecked)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}isClickInZone(e){return e[0]>=this.checkboxX&&e[0]<=this.checkboxX+this.labelEndPosition&&e[1]>=this.checkboxY&&e[1]<=this.checkboxY+this.checkboxSize}onMouse(e,t){"pointerdown"===e.type&&this.isClickInZone(t)&&(this.isChecked=!this.isChecked)}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){this.drawLabel(e,s,n),this.drawCheckbox(e,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor;const s=2*this.margin+5;e.fillText(this.label,s,t+.7*i);const n=s+e.measureText(this.label).width;this.labelEndPosition=n}drawCheckbox(e,t,i){this.checkboxY=t+(i-this.checkboxSize)/2,this.checkboxX=this.margin,e.fillStyle=this.backgroundColor,e.strokeStyle=this.outlineColor,e.beginPath(),e.roundRect(this.checkboxX,this.checkboxY,this.checkboxSize,this.checkboxSize,2),e.fill(),e.stroke(),this._isChecked&&(e.strokeStyle=this.checkboxColor,e.beginPath(),e.moveTo(this.checkboxX+3,this.checkboxY+this.checkboxSize/2),e.lineTo(this.checkboxX+this.checkboxSize/3,this.checkboxY+this.checkboxSize-3),e.lineTo(this.checkboxX+this.checkboxSize-3,this.checkboxY+3),e.stroke())}},exports.ColorGenerator=class{LABEL_BRIGHTNESS=70;LABEL_SATURATION=0;VALUE_BRIGHTNESS=90;VALUE_SATURATION=0;BORDER_BRIGHTNESS=50;BORDER_SATURATION=0;BACKGROUND_BRIGHTNESS=10;BACKGROUND_SATURATION=0;constructor(e,t=""){this.type=e,this.other=t}generateHsl(e,t){let i=0;for(let e=0;e<this.type.length;e++)i=this.type.charCodeAt(e)+((i<<5)-i);for(let e=0;e<this.other.length;e++)i=this.other.charCodeAt(e)+((i<<5)-i);return`hsl(${Math.abs(i)%360}, ${e}%, ${t}%)`}getLabelColor(){return this.generateHsl(this.LABEL_SATURATION,this.LABEL_BRIGHTNESS)}getValueColor(){return this.generateHsl(this.VALUE_SATURATION,this.VALUE_BRIGHTNESS)}getBorderColor(){return this.generateHsl(this.BORDER_SATURATION,this.BORDER_BRIGHTNESS)}getBackgroundColor(){return this.generateHsl(this.BACKGROUND_SATURATION,this.BACKGROUND_BRIGHTNESS)}},exports.ComboboxComponent=class{constructor(e,t,i,s){this.eventEmitter=new _r,this.label=e,this.options=i,this.colorGenerator=s,this._selection=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get selection(){return this._text}set selection(e){this._selection=e,this.eventEmitter.emit("onChange",this._selection)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}onMouse(t,i){const s=this;if("pointerdown"===t.type){var n=t.target.data.getCanvasWindow();new e.LiteGraph.ContextMenu(this.options,{scale:1,event:t,className:"dark",callback:function(e){s.selection=e}},n)}}computeSize(t,i){if(void 0!==t&&void 0!==i)return new Float32Array([t,20]);let s=new Float32Array([220,20]);var n=0;return this.options.forEach((t=>{n=Math.max(n,e.LiteGraph.computeTextWidth(t,.6))})),s[0]=n,s[0]+=e.LiteGraph.computeTextWidth(this.label),s[0]+=70,s[1]=e.LiteGraph.NODE_WIDGET_HEIGHT,s}draw(e,t,i,s,n){e.textAlign="left";const r=i-2*this.margin;this.drawBackground(e,s,r,n),this.drawLabel(e,s,n),this.drawValue(e,r,s,n),this.drawDownArrow(e,s,i,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin+10,t+.7*i)}drawDownArrow(e,t,i,s){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(i-this.margin-12,t+s-5),e.lineTo(i-this.margin-18,t+5),e.lineTo(i-this.margin-6,t+5),e.fill()}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._selection,t-5,i+.7*s)}},exports.ControlWidget=class extends Cr{static capability=wr;constructor(e,t,i={}){super(e,t,i)}},exports.DefaultPack=class{install(e=new $r,t){this.registerBundledPacks(e,t),this.registerGraphExtensions(e,t),this.registerCanvasExtensions(e,t),this.registerEditorExtensions(e,t),this.registerNodeExtensions(e,t),this.registerWidgets(e,t)}registerBundledPacks(e,t={}){}registerGraphExtensions(e,t={}){}registerCanvasExtensions(e,t={}){}registerEditorExtensions(e,t={}){const i={GetBlueprintsExtension:!0,FileOperationsExtension:!0,EditorAutoUpdateExtension:!0,ShowExecuteOrderExtension:!0,FileMetaExtension:!0,ServerExamplesEditorExtension:!1,...t};i.GetBlueprintsExtension&&e.registerEditorExtension(Hr),i.FileOperationsExtension&&e.registerEditorExtension(qr),i.EditorAutoUpdateExtension&&e.registerEditorExtension(Wr),i.ShowExecuteOrderExtension&&e.registerEditorExtension(zr),i.FileMetaExtension&&e.registerEditorExtension(so),i.ServerExamplesEditorExtension&&e.registerEditorExtension(ro,i)}registerNodeExtensions(e,t={}){({PreExecutionCheckExtension:!0,...t}).PreExecutionCheckExtension&&e.registerNodeExtension(Vr)}registerWidgets(e,t={}){}registerFileAssociation(e,t={}){}},exports.DisplayWidget=class extends Cr{static capability=yr;constructor(e,t,i={}){super(e,t,i),i.content&&this.registerForContentUpdates(t,i.content)}registerForContentUpdates(e,t){t&&e&&e.on("nodeStatusUpdated",(i=>{const s=i.contents?.find((e=>e.name===t.name))?.value;this.value=s,e?.setDirtyCanvas(!0,!0)}))}},exports.GraphCanvas=Gr,exports.GraphEditor=class{constructor(e,t){this.eventEmitter=new _r,this.connection=t,this.rootElement=null,this.parentDiv=null,this.toolbarElement=null,this.mainWindowElement=null,this.footerElement=null,this.canvasElement=null,this.toastContainer=null,this.toasts=null,this.graphCanvas=null,this.graph=new Pr,this.toolbarControls=[],this.extensions=[],this.makeEditorWindow(e),this.disableScrolling(),this.setGraph(this.graph);return(new $r).applyExtensions("editor",this),this.eventEmitter.emit("toolbarReady"),this.eventEmitter.emit("instantiated",this),this}handleTouchMove(e){e.preventDefault()}enableScrolling(){this.canvasElement.removeEventListener("touchmove",this.handleTouchMove,{passive:!1})}disableScrolling(){this.canvasElement.addEventListener("touchmove",this.handleTouchMove,{passive:!1})}loadGraph(e){this.eventEmitter.emit("graphLoadInitiated",this.graph),this.graph.configure(e),this.graphCanvas.setDefaultViewpoint(),this.eventEmitter.emit("graphLoaded",this.graph)}clearGraph(){this.eventEmitter.emit("graphClearInitiated",this.graph),this.graph.clear(),this.eventEmitter.emit("graphCleared",this.graph)}serializeGraph(){const e=this.graph.serialize();return this.eventEmitter.emit("graphSerialized",e),e}getGraph(){return this.graph}getGraphCanvas(){return this.graphCanvas}setGraph(e){return this.graph&&this.eventEmitter.emit("graphReplaced",this.graph),this.graph=e,this.graphCanvas.setGraph(this.graph,!0),this.eventEmitter.emit("graphSet",this.graph),e}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}addButton(e,t){const i=new jr(e,t.label,t.iconClass,t.onClick,t.tooltip);if(t.group){this.getOrCreateButtonGroup(t.group,t.section||"left",t.groupPosition).addButton(i)}else this.addToolbarControl(i,{section:t.section,position:t.position,referenceId:t.referenceId});return i}getOrCreateButtonGroup(e,t="left",i="end"){if(this.buttonGroups||(this.buttonGroups={left:{},center:{},right:{}}),!this.buttonGroups[t][e]){const s=new Fr(e);this.addToolbarControl(s,{section:t,position:i,referenceId:e}),this.buttonGroups[t][e]=s}return this.buttonGroups[t][e]}addSeparator(e="left"){const t=new Rr;return this.addToolbarControl(t,{section:e}),t}addToolbarControl(e,t={}){const{section:i="left",position:s="end",referenceId:n=null}=t,r=this.toolbarElement.querySelector(`.mgui-toolbar-section.${i}`);if(!r)return console.warn(`Toolbar section '${i}' not found. Appending to left.`),this.addToolbarControl(e,{...t,section:"left"});const o=e.render();if(e.section=i,"start"===s)r.insertBefore(o,r.firstChild);else if(n){const e=r.querySelector(`#${n}`);e?r.insertBefore(o,"before"===s?e:e.nextSibling):r.appendChild(o)}else r.appendChild(o);return this.toolbarControls.push(e),this.resizeCanvas(),o}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}makeEditorWindow(e,t={}){const i=this.rootElement=document.createElement("div");i.className="mgui mgui-editor",i.innerHTML='\n    \n    <div class="mgui-editor-toolbar ">\n      <div class="mgui-toolbar-section left"></div>\n      <div class="mgui-toolbar-section center"></div>\n      <div class="mgui-toolbar-section right"></div>\n    </div>\n    <div class="mgui-editor-main-window">\n        <canvas class="mgui-editor-graphcanvas"></canvas>   \n        <div class="toast-container" aria-live="polite" aria-atomic="true">\n    </div>\n    </div>\n    <div class="mgui-editor-footer">\n        <div class="mgui-editor-tools mgui-editor-tools-left"></div>\n        <div class="mgui-editor-tools mgui-editor-tools-right"></div>\n    </div>\n    <div class="mgui-modal-container"></div>',this.toolbarElement=i.querySelector(".mgui-editor-toolbar"),this.mainWindowElement=i.querySelector(".mgui-editor-main-window"),this.footerElement=i.querySelector(".mgui-editor-footer"),this.toastContainer=i.querySelector(".toast-container"),this.toasts=new Br(this.toastContainer);const s=this.canvasElement=i.querySelector(".mgui-editor-graphcanvas");if(this.graphCanvas=new Gr(s),this.graphCanvas.render_canvas_border=!1,this.parentDiv=document.getElementById(e),!this.parentDiv)throw new Error("Editor has no parentElement to bind to");this.parentDiv?.appendChild(i),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this))}resizeCanvas(){const e=window.getComputedStyle(this.toolbarElement),t=window.getComputedStyle(this.footerElement),i=this.toolbarElement.offsetHeight+parseInt(e.marginTop)+parseInt(e.marginBottom),s=this.footerElement.offsetHeight+parseInt(t.marginTop)+parseInt(t.marginBottom),n=this.parentDiv.clientHeight-i-s;this.mainWindowElement.style.height=n+"px",this.canvasElement.height=n,this.canvasElement.style.height=n+"px",this.graphCanvas.resize()}showModal(e){const t=`mgui-modal-${Date.now()}`,i=e.dialogClass?` ${e.dialogClass}`:"",s=e.buttons.map((e=>`\n      <button type="button" \n              class="btn btn-${e.type||"secondary"}"\n              ${e.dismiss?'data-dismiss="modal"':""}>\n        ${e.label}\n      </button>\n    `)).join(""),n=`\n      <div class="modal fade" id="${t}" tabindex="-1" \n           aria-labelledby="${t}-label" aria-hidden="true">\n        <div class="modal-dialog ${i}">\n          <div class="modal-content">\n            <div class="modal-header">\n              <h5 class="modal-title" id="${t}-label">${e.title}</h5>\n              <button type="button" class="btn-close" \n                      data-dismiss="modal" \n                      aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n              ${e.body}\n            </div>\n            <div class="modal-footer">\n              ${s}\n            </div>\n          </div>\n        </div>\n      </div>`;this.rootElement.querySelector(".mgui-modal-container").insertAdjacentHTML("beforeend",n);const r=document.getElementById(t),o=new bootstrap.Modal(r,{keyboard:!0,focus:!1});$(r).on("show.bs.modal",(()=>{e.onShow&&e.onShow(o,r)})),$(r).on("shown.bs.modal",(()=>{r.querySelector("[autofocus]")?.focus(),e.onShown&&e.onShown(o,r)})),$(r).on("hide.bs.modal",(()=>{e.onHide&&e.onHide(o,r)})),$(r).on("hidden.bs.modal",(()=>{e.onHidden&&e.onHidden(o,r),r.remove()})),e.buttons.forEach(((e,t)=>{if(!e.dismiss){r.querySelectorAll(".modal-footer button")[t].addEventListener("click",(t=>{e.onClick?e.onClick(o):o.hide()}))}}));const a=r.querySelector("form");a&&a.addEventListener("submit",(t=>{t.preventDefault();const i=e.buttons.find((e=>"primary"===e.type));i&&(i.onClick?i.onClick(o):o.hide())})),e.preShow&&e.preShow(o,r),o.show()}showWarning(e,t){this.toasts.showWarning(e,t)}showError(e,t){this.toasts.showError(e,t)}showSuccess(e,t){this.toasts.showSuccess(e,t)}showInfo(e,t){this.toasts.showInfo(e,t)}showMessage(e,t){this.toasts.showMessage(e,t)}showOkCancel(e,t,i){this.toasts.showOkCancel(e,t,i)}async apiSend(e,t){return this.connection.send(e,t)}},exports.GraphFramework=$r,exports.LedComponent=class{constructor(e,t,i){this.label=e,this.colorGenerator=i,this._isActive=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.trueIndicatorColor="#39e75f",this.falseIndicatorColor="#777"}get isActive(){return this._isActive}set isActive(e){this._isActive=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){const r=i-2*this.margin;this.drawLabel(e,s,n),this.drawValue(e,r,s,n),this.drawIndicator(e,r,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._isActive?"true":"false",t+this.margin-20,i+.7*s)}drawIndicator(e,t,i,s){const n=this._isActive?this.trueIndicatorColor:this.falseIndicatorColor,r=.6*s,o=e.createRadialGradient(t+this.margin-5,i+.5*s,0,t+this.margin-5,i+.5*s,r);o.addColorStop(0,n),o.addColorStop(1,"rgba(0, 0, 0, 0)"),this._isActive&&(e.fillStyle=o,e.beginPath(),e.arc(t+this.margin-5,i+.5*s,r,0,2*Math.PI),e.fill()),e.fillStyle=n,e.beginPath(),e.arc(t+this.margin-5,i+.5*s,.35*s,0,2*Math.PI),e.fill(),e.strokeStyle="#222",e.stroke()}},exports.NumberLimiter=class{#n;#r;#o;#a;#l;#h;#c;constructor(e,t,i,s=null,n=2){this.#n=e,this.#r=t,this.#o=i,this.#a=s,this.#l=n,this.#d(),this.value=i}#u(e){return"odd"===this.#a&&e%2==0||"even"===this.#a&&e%2!=0}#p(e,t){return this.#u(e)?e+t:e}#d(){this.#h=this.#p(this.#n,1),this.#c=this.#p(this.#r,-1)}incrementBy(e){let t=this.#o+e;this.#u(t)&&(t+=1),this.value=t}decrementBy(e){let t=this.#o-e;this.#u(t)&&(t-=1),this.value=t}get value(){return this.#o}set value(e){this.#u(e)&&(e+=1),e=parseFloat(e.toFixed(this.#l)),this.#o=Math.min(Math.max(e,this.#h),this.#c)}setValue(e){this.value=e}getValue(){return this.value}},exports.NumericDisplayComponent=class{constructor(e,t,i,s){this.label=e,this.precision=i,this.colorGenerator=s,this._value=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.valueFont="12px Arial",this.margin=20,this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueTextColor=this.colorGenerator.getValueColor()}get value(){return this._value}set value(e){this._value=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const r=i-2*this.margin;this.drawLabel(e,s,n),this.drawValue(e,r,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(Number(this._value).toFixed(this.precision),t+this.margin-5,i+.7*s)}},exports.NumericInputComponent=class{constructor(e,t,i,s,n){this.eventEmitter=new _r,this.label=e,this.precision=i,this.limiter=s,this.colorGenerator=n,this.isDragging=!1,this.startX=0,this.step=this.calculateStep(i),this.setupDefaults(),this.limiter.value=t}setupDefaults(){this.labelFont="12px Arial",this.valueFont="12px Arial",this.margin=20,this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueTextColor=this.colorGenerator.getValueColor(),this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor(),this.arrowColor=this.colorGenerator.getValueColor()}get value(){return this.limiter.value}set value(e){e!=this.limiter.value&&(this.limiter.value=e,this.notifyValueChange())}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}computeSize(e,t){return void 0!==e&&void 0!==t?new Float32Array([e,20]):new Float32Array([220,20])}onMouse(e,t,i){const s=t[0],n=i.size[0],r=this.getMultiplier(e);"pointerdown"===e.type?this.handleMouseDown(s,n,r):"pointermove"===e.type?this.handleMouseMove(s,r):"pointerup"===e.type&&this.handleMouseUp(s,n,e)}calculateStep(e){return Math.pow(10,-Math.abs(e))}getMultiplier(e){return e.shiftKey&&e.ctrlKey?100:e.shiftKey?10:1}handleMouseDown(e,t,i){this.isMyMouseEvent=!0,this.isDragging=!1,this.startX=e,this.adjustValueByPosition(e,t,i)}handleMouseMove(e,t){if(this.isMyMouseEvent&&Math.abs(e-this.startX)>1){const i=Math.floor(e-this.startX);this.limiter.incrementBy(i*this.step*t),this.startX=e,this.isDragging=!0}}handleMouseUp(e,t,i){!this.isDragging&&this.isInsideInputArea(e,t)&&this.promptForValue(i),this.isDragging=!1,this.isMyMouseEvent=!1,this.notifyValueChange()}isInsideInputArea(e,t){return e>40&&e<t-40}adjustValueByPosition(e,t,i){e<40?this.limiter.decrementBy(this.step*i):e>t-40&&this.limiter.incrementBy(this.step*i)}promptForValue(e){let t=this;e.target.data.prompt("Value",this.value.toString(),(function(e){const i=Number(e);isNaN(i)?console.error("Invalid input: Input is not a number."):t.value=i}),e)}notifyValueChange(){this.eventEmitter.emit("onChange",this.value)}draw(e,t,i,s,n){e.textAlign="left";const r=i-2*this.margin;this.drawBackground(e,s,r,n),this.drawLeftArrow(e,s,n),this.drawRightArrow(e,s,i,n),this.drawLabel(e,s,n),this.drawValue(e,r,s,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLeftArrow(e,t,i){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(this.margin+16,t+5),e.lineTo(this.margin+6,t+.5*i),e.lineTo(this.margin+16,t+i-5),e.fill()}drawRightArrow(e,t,i,s){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(i-this.margin-16,t+5),e.lineTo(i-this.margin-6,t+.5*s),e.lineTo(i-this.margin-16,t+s-5),e.fill()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,2*this.margin+5,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(Number(this.value).toFixed(this.precision),t-5,i+.7*s)}},exports.SingleLineTextDisplayComponent=class{constructor(e,t,i){this.label=e,this.colorGenerator=i,this._text=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get text(){return this._text}set text(e){this._text=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const r=i-2*this.margin;this.drawLabel(e,s,n),this.drawText(e,r,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawText(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._text,t+this.margin,i+.7*s)}},exports.SingleLineTextInputComponent=class{constructor(e,t,i){this.eventEmitter=new _r,this.label=e,this.colorGenerator=i,this._text=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get text(){return this._text}set text(e){this._text=e,this.eventEmitter.emit("onChange",this._text)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}onMouse(e,t){const i=this;"pointerdown"===e.type&&e.target.data.prompt("Value",this._text,(function(e){i.text=e}),e)}computeSize(e,t){return void 0!==e&&void 0!==t?new Float32Array([e,20]):new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const r=i-2*this.margin;this.drawBackground(e,s,r,n),this.drawLabel(e,s,n),this.drawText(e,r,s,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin+10,t+.7*i)}drawText(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._text,this.margin+t-10,i+.7*s)}},exports.ToolbarButton=jr,exports.UiDraw=br,exports.UiTheme=mr,exports.clamp=function(e,t,i){return Math.max(t,Math.min(i,e))};
