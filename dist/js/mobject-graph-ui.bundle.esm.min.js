/**
 * MIT License
 *
 * Copyright (c) 2024 benhar-dev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

import{LiteGraph as e,LGraphNode as t,LGraphCanvas as i,LGraph as s}from"mobject-litegraph";e.debug=!1,e.logging_set_level(-1),e.catch_exceptions=!0,e.throw_errors=!0,e.allow_scripts=!1,e.searchbox_extras={},e.auto_sort_node_types=!0,e.node_box_coloured_when_on=!0,e.node_box_coloured_by_mode=!0,e.dialog_close_on_mouse_leave=!1,e.dialog_close_on_mouse_leave_delay=500,e.shift_click_do_break_link_from=!0,e.click_do_break_link_to=!1,e.search_hide_on_mouse_leave=!0,e.search_filter_enabled=!1,e.search_show_all_on_open=!0,e.show_node_tooltip=!0,e.show_node_tooltip_use_descr_property=!0,e.auto_load_slot_types=!0,e.alt_drag_do_clone_nodes=!0,e.do_add_triggers_slots=!0,e.allow_multi_output_for_events=!1,e.middle_click_slot_add_default_node=!0,e.release_link_on_empty_shows_menu=!0,e.pointerevents_method="mouse",e.ctrl_shift_v_paste_connect_unselected_outputs=!0,e.backspace_delete=!1,e.actionHistory_enabled=!1,e.actionHistoryMaxSave=40,e.showCanvasOptions=!0,e.use_uuids=!0,e.refreshAncestorsOnTriggers=!1,e.refreshAncestorsOnActions=!1,e.ensureUniqueExecutionAndActionCall=!1,e.use_deferred_actions=!0,e.context_menu_filter_enabled=!1,e.reprocess_slot_while_node_configure=!1;var n="top",o="bottom",r="right",a="left",l="auto",h=[n,o,r,a],c="start",d="end",u="clippingParents",p="viewport",f="popper",g="reference",m=h.reduce((function(e,t){return e.concat([t+"-"+c,t+"-"+d])}),[]),b=[].concat(h,[l]).reduce((function(e,t){return e.concat([t,t+"-"+c,t+"-"+d])}),[]),_="beforeRead",v="read",y="afterRead",w="beforeMain",C="main",E="afterMain",x="beforeWrite",k="write",T="afterWrite",A=[_,v,y,w,C,E,x,k,T];function S(e){return e?(e.nodeName||"").toLowerCase():null}function I(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function O(e){return e instanceof I(e).Element||e instanceof Element}function L(e){return e instanceof I(e).HTMLElement||e instanceof HTMLElement}function N(e){return"undefined"!=typeof ShadowRoot&&(e instanceof I(e).ShadowRoot||e instanceof ShadowRoot)}var D={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];L(n)&&S(n)&&(Object.assign(n.style,i),Object.keys(s).forEach((function(e){var t=s[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var s=t.elements[e],n=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});L(s)&&S(s)&&(Object.assign(s.style,o),Object.keys(n).forEach((function(e){s.removeAttribute(e)})))}))}},requires:["computeStyles"]};function M(e){return e.split("-")[0]}var P=Math.max,B=Math.min,F=Math.round;function G(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function j(){return!/^((?!chrome|android).)*safari/i.test(G())}function R(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=e.getBoundingClientRect(),n=1,o=1;t&&L(e)&&(n=e.offsetWidth>0&&F(s.width)/e.offsetWidth||1,o=e.offsetHeight>0&&F(s.height)/e.offsetHeight||1);var r=(O(e)?I(e):window).visualViewport,a=!j()&&i,l=(s.left+(a&&r?r.offsetLeft:0))/n,h=(s.top+(a&&r?r.offsetTop:0))/o,c=s.width/n,d=s.height/o;return{width:c,height:d,top:h,right:l+c,bottom:h+d,left:l,x:l,y:h}}function H(e){var t=R(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function q(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&N(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function z(e){return I(e).getComputedStyle(e)}function W(e){return["table","td","th"].indexOf(S(e))>=0}function V(e){return((O(e)?e.ownerDocument:e.document)||window.document).documentElement}function U(e){return"html"===S(e)?e:e.assignedSlot||e.parentNode||(N(e)?e.host:null)||V(e)}function K(e){return L(e)&&"fixed"!==z(e).position?e.offsetParent:null}function X(e){for(var t=I(e),i=K(e);i&&W(i)&&"static"===z(i).position;)i=K(i);return i&&("html"===S(i)||"body"===S(i)&&"static"===z(i).position)?t:i||function(e){var t=/firefox/i.test(G());if(/Trident/i.test(G())&&L(e)&&"fixed"===z(e).position)return null;var i=U(e);for(N(i)&&(i=i.host);L(i)&&["html","body"].indexOf(S(i))<0;){var s=z(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(e)||t}function Q(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Y(e,t,i){return P(e,B(t,i))}function J(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Z(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var ee={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,s=e.name,l=e.options,c=i.elements.arrow,d=i.modifiersData.popperOffsets,u=M(i.placement),p=Q(u),f=[a,r].indexOf(u)>=0?"height":"width";if(c&&d){var g=function(e,t){return J("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Z(e,h))}(l.padding,i),m=H(c),b="y"===p?n:a,_="y"===p?o:r,v=i.rects.reference[f]+i.rects.reference[p]-d[p]-i.rects.popper[f],y=d[p]-i.rects.reference[p],w=X(c),C=w?"y"===p?w.clientHeight||0:w.clientWidth||0:0,E=v/2-y/2,x=g[b],k=C-m[f]-g[_],T=C/2-m[f]/2+E,A=Y(x,T,k),S=p;i.modifiersData[s]=((t={})[S]=A,t.centerOffset=A-T,t)}},effect:function(e){var t=e.state,i=e.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&q(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(e){return e.split("-")[1]}var ie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(e){var t,i=e.popper,s=e.popperRect,l=e.placement,h=e.variation,c=e.offsets,u=e.position,p=e.gpuAcceleration,f=e.adaptive,g=e.roundOffsets,m=e.isFixed,b=c.x,_=void 0===b?0:b,v=c.y,y=void 0===v?0:v,w="function"==typeof g?g({x:_,y:y}):{x:_,y:y};_=w.x,y=w.y;var C=c.hasOwnProperty("x"),E=c.hasOwnProperty("y"),x=a,k=n,T=window;if(f){var A=X(i),S="clientHeight",O="clientWidth";if(A===I(i)&&"static"!==z(A=V(i)).position&&"absolute"===u&&(S="scrollHeight",O="scrollWidth"),l===n||(l===a||l===r)&&h===d)k=o,y-=(m&&A===T&&T.visualViewport?T.visualViewport.height:A[S])-s.height,y*=p?1:-1;if(l===a||(l===n||l===o)&&h===d)x=r,_-=(m&&A===T&&T.visualViewport?T.visualViewport.width:A[O])-s.width,_*=p?1:-1}var L,N=Object.assign({position:u},f&&ie),D=!0===g?function(e,t){var i=e.x,s=e.y,n=t.devicePixelRatio||1;return{x:F(i*n)/n||0,y:F(s*n)/n||0}}({x:_,y:y},I(i)):{x:_,y:y};return _=D.x,y=D.y,p?Object.assign({},N,((L={})[k]=E?"0":"",L[x]=C?"0":"",L.transform=(T.devicePixelRatio||1)<=1?"translate("+_+"px, "+y+"px)":"translate3d("+_+"px, "+y+"px, 0)",L)):Object.assign({},N,((t={})[k]=E?y+"px":"",t[x]=C?_+"px":"",t.transform="",t))}var ne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,s=i.gpuAcceleration,n=void 0===s||s,o=i.adaptive,r=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,h={placement:M(t.placement),variation:te(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,se(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,se(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},oe={passive:!0};var re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,s=e.options,n=s.scroll,o=void 0===n||n,r=s.resize,a=void 0===r||r,l=I(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach((function(e){e.addEventListener("scroll",i.update,oe)})),a&&l.addEventListener("resize",i.update,oe),function(){o&&h.forEach((function(e){e.removeEventListener("scroll",i.update,oe)})),a&&l.removeEventListener("resize",i.update,oe)}},data:{}},ae={left:"right",right:"left",bottom:"top",top:"bottom"};function le(e){return e.replace(/left|right|bottom|top/g,(function(e){return ae[e]}))}var he={start:"end",end:"start"};function ce(e){return e.replace(/start|end/g,(function(e){return he[e]}))}function de(e){var t=I(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ue(e){return R(V(e)).left+de(e).scrollLeft}function pe(e){var t=z(e),i=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function fe(e){return["html","body","#document"].indexOf(S(e))>=0?e.ownerDocument.body:L(e)&&pe(e)?e:fe(U(e))}function ge(e,t){var i;void 0===t&&(t=[]);var s=fe(e),n=s===(null==(i=e.ownerDocument)?void 0:i.body),o=I(s),r=n?[o].concat(o.visualViewport||[],pe(s)?s:[]):s,a=t.concat(r);return n?a:a.concat(ge(U(r)))}function me(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function be(e,t,i){return t===p?me(function(e,t){var i=I(e),s=V(e),n=i.visualViewport,o=s.clientWidth,r=s.clientHeight,a=0,l=0;if(n){o=n.width,r=n.height;var h=j();(h||!h&&"fixed"===t)&&(a=n.offsetLeft,l=n.offsetTop)}return{width:o,height:r,x:a+ue(e),y:l}}(e,i)):O(t)?function(e,t){var i=R(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):me(function(e){var t,i=V(e),s=de(e),n=null==(t=e.ownerDocument)?void 0:t.body,o=P(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),r=P(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-s.scrollLeft+ue(e),l=-s.scrollTop;return"rtl"===z(n||i).direction&&(a+=P(i.clientWidth,n?n.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(V(e)))}function _e(e,t,i,s){var n="clippingParents"===t?function(e){var t=ge(U(e)),i=["absolute","fixed"].indexOf(z(e).position)>=0&&L(e)?X(e):e;return O(i)?t.filter((function(e){return O(e)&&q(e,i)&&"body"!==S(e)})):[]}(e):[].concat(t),o=[].concat(n,[i]),r=o[0],a=o.reduce((function(t,i){var n=be(e,i,s);return t.top=P(n.top,t.top),t.right=B(n.right,t.right),t.bottom=B(n.bottom,t.bottom),t.left=P(n.left,t.left),t}),be(e,r,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ve(e){var t,i=e.reference,s=e.element,l=e.placement,h=l?M(l):null,u=l?te(l):null,p=i.x+i.width/2-s.width/2,f=i.y+i.height/2-s.height/2;switch(h){case n:t={x:p,y:i.y-s.height};break;case o:t={x:p,y:i.y+i.height};break;case r:t={x:i.x+i.width,y:f};break;case a:t={x:i.x-s.width,y:f};break;default:t={x:i.x,y:i.y}}var g=h?Q(h):null;if(null!=g){var m="y"===g?"height":"width";switch(u){case c:t[g]=t[g]-(i[m]/2-s[m]/2);break;case d:t[g]=t[g]+(i[m]/2-s[m]/2)}}return t}function ye(e,t){void 0===t&&(t={});var i=t,s=i.placement,a=void 0===s?e.placement:s,l=i.strategy,c=void 0===l?e.strategy:l,d=i.boundary,m=void 0===d?u:d,b=i.rootBoundary,_=void 0===b?p:b,v=i.elementContext,y=void 0===v?f:v,w=i.altBoundary,C=void 0!==w&&w,E=i.padding,x=void 0===E?0:E,k=J("number"!=typeof x?x:Z(x,h)),T=y===f?g:f,A=e.rects.popper,S=e.elements[C?T:y],I=_e(O(S)?S:S.contextElement||V(e.elements.popper),m,_,c),L=R(e.elements.reference),N=ve({reference:L,element:A,strategy:"absolute",placement:a}),D=me(Object.assign({},A,N)),$=y===f?D:L,M={top:I.top-$.top+k.top,bottom:$.bottom-I.bottom+k.bottom,left:I.left-$.left+k.left,right:$.right-I.right+k.right},P=e.modifiersData.offset;if(y===f&&P){var B=P[a];Object.keys(M).forEach((function(e){var t=[r,o].indexOf(e)>=0?1:-1,i=[n,o].indexOf(e)>=0?"y":"x";M[e]+=B[i]*t}))}return M}function we(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=i.boundary,o=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?b:l,d=te(s),u=d?a?m:m.filter((function(e){return te(e)===d})):h,p=u.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=u);var f=p.reduce((function(t,i){return t[i]=ye(e,{placement:i,boundary:n,rootBoundary:o,padding:r})[M(i)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}var Ce={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var h=i.mainAxis,d=void 0===h||h,u=i.altAxis,p=void 0===u||u,f=i.fallbackPlacements,g=i.padding,m=i.boundary,b=i.rootBoundary,_=i.altBoundary,v=i.flipVariations,y=void 0===v||v,w=i.allowedAutoPlacements,C=t.options.placement,E=M(C),x=f||(E===C||!y?[le(C)]:function(e){if(M(e)===l)return[];var t=le(e);return[ce(e),t,ce(t)]}(C)),k=[C].concat(x).reduce((function(e,i){return e.concat(M(i)===l?we(t,{placement:i,boundary:m,rootBoundary:b,padding:g,flipVariations:y,allowedAutoPlacements:w}):i)}),[]),T=t.rects.reference,A=t.rects.popper,S=new Map,I=!0,O=k[0],L=0;L<k.length;L++){var N=k[L],D=M(N),$=te(N)===c,P=[n,o].indexOf(D)>=0,B=P?"width":"height",F=ye(t,{placement:N,boundary:m,rootBoundary:b,altBoundary:_,padding:g}),G=P?$?r:a:$?o:n;T[B]>A[B]&&(G=le(G));var j=le(G),R=[];if(d&&R.push(F[D]<=0),p&&R.push(F[G]<=0,F[j]<=0),R.every((function(e){return e}))){O=N,I=!1;break}S.set(N,R)}if(I)for(var H=function(e){var t=k.find((function(t){var i=S.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return O=t,"break"},q=y?3:1;q>0;q--){if("break"===H(q))break}t.placement!==O&&(t.modifiersData[s]._skip=!0,t.placement=O,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ee(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function xe(e){return[n,r,o,a].some((function(t){return e[t]>=0}))}var ke={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,s=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,r=ye(t,{elementContext:"reference"}),a=ye(t,{altBoundary:!0}),l=Ee(r,s),h=Ee(a,n,o),c=xe(l),d=xe(h);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}};var Te={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,s=e.name,o=i.offset,l=void 0===o?[0,0]:o,h=b.reduce((function(e,i){return e[i]=function(e,t,i){var s=M(e),o=[a,n].indexOf(s)>=0?-1:1,l="function"==typeof i?i(Object.assign({},t,{placement:e})):i,h=l[0],c=l[1];return h=h||0,c=(c||0)*o,[a,r].indexOf(s)>=0?{x:c,y:h}:{x:h,y:c}}(i,t.rects,l),e}),{}),c=h[t.placement],d=c.x,u=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=h}};var Ae={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=ve({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var Se={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name,l=i.mainAxis,h=void 0===l||l,d=i.altAxis,u=void 0!==d&&d,p=i.boundary,f=i.rootBoundary,g=i.altBoundary,m=i.padding,b=i.tether,_=void 0===b||b,v=i.tetherOffset,y=void 0===v?0:v,w=ye(t,{boundary:p,rootBoundary:f,padding:m,altBoundary:g}),C=M(t.placement),E=te(t.placement),x=!E,k=Q(C),T="x"===k?"y":"x",A=t.modifiersData.popperOffsets,S=t.rects.reference,I=t.rects.popper,O="function"==typeof y?y(Object.assign({},t.rects,{placement:t.placement})):y,L="number"==typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(A){if(h){var $,F="y"===k?n:a,G="y"===k?o:r,j="y"===k?"height":"width",R=A[k],q=R+w[F],z=R-w[G],W=_?-I[j]/2:0,V=E===c?S[j]:I[j],U=E===c?-I[j]:-S[j],K=t.elements.arrow,J=_&&K?H(K):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=Z[F],ie=Z[G],se=Y(0,S[j],J[j]),ne=x?S[j]/2-W-se-ee-L.mainAxis:V-se-ee-L.mainAxis,oe=x?-S[j]/2+W+se+ie+L.mainAxis:U+se+ie+L.mainAxis,re=t.elements.arrow&&X(t.elements.arrow),ae=re?"y"===k?re.clientTop||0:re.clientLeft||0:0,le=null!=($=null==N?void 0:N[k])?$:0,he=R+oe-le,ce=Y(_?B(q,R+ne-le-ae):q,R,_?P(z,he):z);A[k]=ce,D[k]=ce-R}if(u){var de,ue="x"===k?n:a,pe="x"===k?o:r,fe=A[T],ge="y"===T?"height":"width",me=fe+w[ue],be=fe-w[pe],_e=-1!==[n,a].indexOf(C),ve=null!=(de=null==N?void 0:N[T])?de:0,we=_e?me:fe-S[ge]-I[ge]-ve+L.altAxis,Ce=_e?fe+S[ge]+I[ge]-ve-L.altAxis:be,Ee=_&&_e?function(e,t,i){var s=Y(e,t,i);return s>i?i:s}(we,fe,Ce):Y(_?we:me,fe,_?Ce:be);A[T]=Ee,D[T]=Ee-fe}t.modifiersData[s]=D}},requiresIfExists:["offset"]};function Ie(e,t,i){void 0===i&&(i=!1);var s,n,o=L(t),r=L(t)&&function(e){var t=e.getBoundingClientRect(),i=F(t.width)/e.offsetWidth||1,s=F(t.height)/e.offsetHeight||1;return 1!==i||1!==s}(t),a=V(t),l=R(e,r,i),h={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!i)&&(("body"!==S(t)||pe(a))&&(h=(s=t)!==I(s)&&L(s)?{scrollLeft:(n=s).scrollLeft,scrollTop:n.scrollTop}:de(s)),L(t)?((c=R(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=ue(a))),{x:l.left+h.scrollLeft-c.x,y:l.top+h.scrollTop-c.y,width:l.width,height:l.height}}function Oe(e){var t=new Map,i=new Set,s=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var s=t.get(e);s&&n(s)}})),s.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||n(e)})),s}var Le={placement:"bottom",modifiers:[],strategy:"absolute"};function Ne(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function De(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,s=void 0===i?[]:i,n=t.defaultOptions,o=void 0===n?Le:n;return function(e,t,i){void 0===i&&(i=o);var n,r,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Le,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],h=!1,c={state:a,setOptions:function(i){var n="function"==typeof i?i(a.options):i;d(),a.options=Object.assign({},o,a.options,n),a.scrollParents={reference:O(e)?ge(e):e.contextElement?ge(e.contextElement):[],popper:ge(t)};var r,h,u=function(e){var t=Oe(e);return A.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((r=[].concat(s,a.options.modifiers),h=r.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(h).map((function(e){return h[e]}))));return a.orderedModifiers=u.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,s=void 0===i?{}:i,n=e.effect;if("function"==typeof n){var o=n({state:a,name:t,instance:c,options:s}),r=function(){};l.push(o||r)}})),c.update()},forceUpdate:function(){if(!h){var e=a.elements,t=e.reference,i=e.popper;if(Ne(t,i)){a.rects={reference:Ie(t,X(i),"fixed"===a.options.strategy),popper:H(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var s=0;s<a.orderedModifiers.length;s++)if(!0!==a.reset){var n=a.orderedModifiers[s],o=n.fn,r=n.options,l=void 0===r?{}:r,d=n.name;"function"==typeof o&&(a=o({state:a,options:l,name:d,instance:c})||a)}else a.reset=!1,s=-1}}},update:(n=function(){return new Promise((function(e){c.forceUpdate(),e(a)}))},function(){return r||(r=new Promise((function(e){Promise.resolve().then((function(){r=void 0,e(n())}))}))),r}),destroy:function(){d(),h=!0}};if(!Ne(e,t))return c;function d(){l.forEach((function(e){return e()})),l=[]}return c.setOptions(i).then((function(e){!h&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c}}var $e=De(),Me=De({defaultModifiers:[re,Ae,ne,D]}),Pe=De({defaultModifiers:[re,Ae,ne,D,Te,Ce,Se,ee,ke]}),Be=Object.freeze({__proto__:null,popperGenerator:De,detectOverflow:ye,createPopperBase:$e,createPopper:Pe,createPopperLite:Me,top:n,bottom:o,right:r,left:a,auto:l,basePlacements:h,start:c,end:d,clippingParents:u,viewport:p,popper:f,reference:g,variationPlacements:m,placements:b,beforeRead:_,read:v,afterRead:y,beforeMain:w,main:C,afterMain:E,beforeWrite:x,write:k,afterWrite:T,modifierPhases:A,applyStyles:D,arrow:ee,computeStyles:ne,eventListeners:re,flip:Ce,hide:ke,offset:Te,popperOffsets:Ae,preventOverflow:Se});
/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const Fe=new Map,Ge={set(e,t,i){Fe.has(e)||Fe.set(e,new Map);const s=Fe.get(e);s.has(t)||0===s.size?s.set(t,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,t)=>Fe.has(e)&&Fe.get(e).get(t)||null,remove(e,t){if(!Fe.has(e))return;const i=Fe.get(e);i.delete(t),0===i.size&&Fe.delete(e)}},je="transitionend",Re=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))),e),He=e=>{e.dispatchEvent(new Event(je))},qe=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),ze=e=>qe(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(Re(e)):null,We=e=>{if(!qe(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},Ve=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),Ue=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Ue(e.parentNode):null},Ke=()=>{},Xe=e=>{e.offsetHeight},Qe=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ye=[],Je=()=>"rtl"===document.documentElement.dir,Ze=e=>{var t;t=()=>{const t=Qe();if(t){const i=e.NAME,s=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=s,e.jQueryInterface)}},"loading"===document.readyState?(Ye.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of Ye)e()})),Ye.push(t)):t()},et=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,tt=(e,t,i=!0)=>{if(!i)return void et(e);const s=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),n=Number.parseFloat(i);return s||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let n=!1;const o=({target:i})=>{i===t&&(n=!0,t.removeEventListener(je,o),et(e))};t.addEventListener(je,o),setTimeout((()=>{n||He(t)}),s)},it=(e,t,i,s)=>{const n=e.length;let o=e.indexOf(t);return-1===o?!i&&s?e[n-1]:e[0]:(o+=i?1:-1,s&&(o=(o+n)%n),e[Math.max(0,Math.min(o,n-1))])},st=/[^.]*(?=\..*)\.|.*/,nt=/\..*/,ot=/::\d+$/,rt={};let at=1;const lt={mouseenter:"mouseover",mouseleave:"mouseout"},ht=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ct(e,t){return t&&`${t}::${at++}`||e.uidEvent||at++}function dt(e){const t=ct(e);return e.uidEvent=t,rt[t]=rt[t]||{},rt[t]}function ut(e,t,i=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===i))}function pt(e,t,i){const s="string"==typeof t,n=s?i:t||i;let o=bt(e);return ht.has(o)||(o=e),[s,n,o]}function ft(e,t,i,s,n){if("string"!=typeof t||!e)return;let[o,r,a]=pt(t,i,s);if(t in lt){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};r=e(r)}const l=dt(e),h=l[a]||(l[a]={}),c=ut(h,r,o?i:null);if(c)return void(c.oneOff=c.oneOff&&n);const d=ct(r,t.replace(st,"")),u=o?function(e,t,i){return function s(n){const o=e.querySelectorAll(t);for(let{target:r}=n;r&&r!==this;r=r.parentNode)for(const a of o)if(a===r)return vt(n,{delegateTarget:r}),s.oneOff&&_t.off(e,n.type,t,i),i.apply(r,[n])}}(e,i,r):function(e,t){return function i(s){return vt(s,{delegateTarget:e}),i.oneOff&&_t.off(e,s.type,t),t.apply(e,[s])}}(e,r);u.delegationSelector=o?i:null,u.callable=r,u.oneOff=n,u.uidEvent=d,h[d]=u,e.addEventListener(a,u,o)}function gt(e,t,i,s,n){const o=ut(t[i],s,n);o&&(e.removeEventListener(i,o,Boolean(n)),delete t[i][o.uidEvent])}function mt(e,t,i,s){const n=t[i]||{};for(const[o,r]of Object.entries(n))o.includes(s)&&gt(e,t,i,r.callable,r.delegationSelector)}function bt(e){return e=e.replace(nt,""),lt[e]||e}const _t={on(e,t,i,s){ft(e,t,i,s,!1)},one(e,t,i,s){ft(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[n,o,r]=pt(t,i,s),a=r!==t,l=dt(e),h=l[r]||{},c=t.startsWith(".");if(void 0===o){if(c)for(const i of Object.keys(l))mt(e,l,i,t.slice(1));for(const[i,s]of Object.entries(h)){const n=i.replace(ot,"");a&&!t.includes(n)||gt(e,l,r,s.callable,s.delegationSelector)}}else{if(!Object.keys(h).length)return;gt(e,l,r,o,n?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=Qe();let n=null,o=!0,r=!0,a=!1;t!==bt(t)&&s&&(n=s.Event(t,i),s(e).trigger(n),o=!n.isPropagationStopped(),r=!n.isImmediatePropagationStopped(),a=n.isDefaultPrevented());const l=vt(new Event(t,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),r&&e.dispatchEvent(l),l.defaultPrevented&&n&&n.preventDefault(),l}};function vt(e,t={}){for(const[i,s]of Object.entries(t))try{e[i]=s}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>s})}return e}function yt(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function wt(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const Ct={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${wt(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${wt(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=yt(e.dataset[s])}return t},getDataAttribute:(e,t)=>yt(e.getAttribute(`data-bs-${wt(t)}`))};class Et{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=qe(t)?Ct.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...qe(t)?Ct.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,n]of Object.entries(t)){const t=e[s],o=qe(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}var i}}class xt extends Et{constructor(e,t){super(),(e=ze(e))&&(this._element=e,this._config=this._getConfig(t),Ge.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ge.remove(this._element,this.constructor.DATA_KEY),_t.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){tt(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ge.get(ze(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const kt=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map((e=>Re(e))).join(","):null},Tt={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let s=e.parentNode.closest(t);for(;s;)i.push(s),s=s.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!Ve(e)&&We(e)))},getSelectorFromElement(e){const t=kt(e);return t&&Tt.findOne(t)?t:null},getElementFromSelector(e){const t=kt(e);return t?Tt.findOne(t):null},getMultipleElementsFromSelector(e){const t=kt(e);return t?Tt.find(t):[]}},At=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;_t.on(document,i,`[data-bs-dismiss="${s}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Ve(this))return;const n=Tt.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(n)[t]()}))},St=".bs.alert",It=`close${St}`,Ot=`closed${St}`;class Lt extends xt{static get NAME(){return"alert"}close(){if(_t.trigger(this._element,It).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),_t.trigger(this._element,Ot),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=Lt.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}At(Lt,"close"),Ze(Lt);const Nt='[data-bs-toggle="button"]';class Dt extends xt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=Dt.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}_t.on(document,"click.bs.button.data-api",Nt,(e=>{e.preventDefault();const t=e.target.closest(Nt);Dt.getOrCreateInstance(t).toggle()})),Ze(Dt);const $t=".bs.swipe",Mt=`touchstart${$t}`,Pt=`touchmove${$t}`,Bt=`touchend${$t}`,Ft=`pointerdown${$t}`,Gt=`pointerup${$t}`,jt={endCallback:null,leftCallback:null,rightCallback:null},Rt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ht extends Et{constructor(e,t){super(),this._element=e,e&&Ht.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return jt}static get DefaultType(){return Rt}static get NAME(){return"swipe"}dispose(){_t.off(this._element,$t)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),et(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&et(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(_t.on(this._element,Ft,(e=>this._start(e))),_t.on(this._element,Gt,(e=>this._end(e))),this._element.classList.add("pointer-event")):(_t.on(this._element,Mt,(e=>this._start(e))),_t.on(this._element,Pt,(e=>this._move(e))),_t.on(this._element,Bt,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qt=".bs.carousel",zt=".data-api",Wt="ArrowLeft",Vt="ArrowRight",Ut="next",Kt="prev",Xt="left",Qt="right",Yt=`slide${qt}`,Jt=`slid${qt}`,Zt=`keydown${qt}`,ei=`mouseenter${qt}`,ti=`mouseleave${qt}`,ii=`dragstart${qt}`,si=`load${qt}${zt}`,ni=`click${qt}${zt}`,oi="carousel",ri="active",ai=".active",li=".carousel-item",hi=ai+li,ci={[Wt]:Qt,[Vt]:Xt},di={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ui={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pi extends xt{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Tt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===oi&&this.cycle()}static get Default(){return di}static get DefaultType(){return ui}static get NAME(){return"carousel"}next(){this._slide(Ut)}nextWhenVisible(){!document.hidden&&We(this._element)&&this.next()}prev(){this._slide(Kt)}pause(){this._isSliding&&He(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?_t.one(this._element,Jt,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void _t.one(this._element,Jt,(()=>this.to(e)));const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?Ut:Kt;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&_t.on(this._element,Zt,(e=>this._keydown(e))),"hover"===this._config.pause&&(_t.on(this._element,ei,(()=>this.pause())),_t.on(this._element,ti,(()=>this._maybeEnableCycle()))),this._config.touch&&Ht.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of Tt.find(".carousel-item img",this._element))_t.on(e,ii,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(Xt)),rightCallback:()=>this._slide(this._directionToOrder(Qt)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Ht(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=ci[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Tt.findOne(ai,this._indicatorsElement);t.classList.remove(ri),t.removeAttribute("aria-current");const i=Tt.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(ri),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===Ut,n=t||it(this._getItems(),i,s,this._config.wrap);if(n===i)return;const o=this._getItemIndex(n),r=t=>_t.trigger(this._element,t,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(r(Yt).defaultPrevented)return;if(!i||!n)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=n;const l=s?"carousel-item-start":"carousel-item-end",h=s?"carousel-item-next":"carousel-item-prev";n.classList.add(h),Xe(n),i.classList.add(l),n.classList.add(l);this._queueCallback((()=>{n.classList.remove(l,h),n.classList.add(ri),i.classList.remove(ri,h,l),this._isSliding=!1,r(Jt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Tt.findOne(hi,this._element)}_getItems(){return Tt.find(li,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Je()?e===Xt?Kt:Ut:e===Xt?Ut:Kt}_orderToDirection(e){return Je()?e===Kt?Xt:Qt:e===Kt?Qt:Xt}static jQueryInterface(e){return this.each((function(){const t=pi.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}_t.on(document,ni,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=Tt.getElementFromSelector(this);if(!t||!t.classList.contains(oi))return;e.preventDefault();const i=pi.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===Ct.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),_t.on(window,si,(()=>{const e=Tt.find('[data-bs-ride="carousel"]');for(const t of e)pi.getOrCreateInstance(t)})),Ze(pi);const fi=".bs.collapse",gi=`show${fi}`,mi=`shown${fi}`,bi=`hide${fi}`,_i=`hidden${fi}`,vi=`click${fi}.data-api`,yi="show",wi="collapse",Ci="collapsing",Ei=`:scope .${wi} .${wi}`,xi='[data-bs-toggle="collapse"]',ki={parent:null,toggle:!0},Ti={parent:"(null|element)",toggle:"boolean"};class Ai extends xt{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=Tt.find(xi);for(const e of i){const t=Tt.getSelectorFromElement(e),i=Tt.find(t).filter((e=>e===this._element));null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ki}static get DefaultType(){return Ti}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Ai.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(_t.trigger(this._element,gi).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(wi),this._element.classList.add(Ci),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ci),this._element.classList.add(wi,yi),this._element.style[t]="",_t.trigger(this._element,mi)}),this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(_t.trigger(this._element,bi).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Xe(this._element),this._element.classList.add(Ci),this._element.classList.remove(wi,yi);for(const e of this._triggerArray){const t=Tt.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ci),this._element.classList.add(wi),_t.trigger(this._element,_i)}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(yi)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=ze(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(xi);for(const t of e){const e=Tt.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=Tt.find(Ei,this._config.parent);return Tt.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const i=Ai.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}))}}_t.on(document,vi,xi,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of Tt.getMultipleElementsFromSelector(this))Ai.getOrCreateInstance(e,{toggle:!1}).toggle()})),Ze(Ai);const Si="dropdown",Ii=".bs.dropdown",Oi=".data-api",Li="ArrowUp",Ni="ArrowDown",Di=`hide${Ii}`,$i=`hidden${Ii}`,Mi=`show${Ii}`,Pi=`shown${Ii}`,Bi=`click${Ii}${Oi}`,Fi=`keydown${Ii}${Oi}`,Gi=`keyup${Ii}${Oi}`,ji="show",Ri='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Hi=`${Ri}.${ji}`,qi=".dropdown-menu",zi=Je()?"top-end":"top-start",Wi=Je()?"top-start":"top-end",Vi=Je()?"bottom-end":"bottom-start",Ui=Je()?"bottom-start":"bottom-end",Ki=Je()?"left-start":"right-start",Xi=Je()?"right-start":"left-start",Qi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Yi={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ji extends xt{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Tt.next(this._element,qi)[0]||Tt.prev(this._element,qi)[0]||Tt.findOne(qi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Qi}static get DefaultType(){return Yi}static get NAME(){return Si}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ve(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!_t.trigger(this._element,Mi,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))_t.on(e,"mouseover",Ke);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ji),this._element.classList.add(ji),_t.trigger(this._element,Pi,e)}}hide(){if(Ve(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!_t.trigger(this._element,Di,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))_t.off(e,"mouseover",Ke);this._popper&&this._popper.destroy(),this._menu.classList.remove(ji),this._element.classList.remove(ji),this._element.setAttribute("aria-expanded","false"),Ct.removeDataAttribute(this._menu,"popper"),_t.trigger(this._element,$i,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!qe(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${Si.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===Be)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:qe(this._config.reference)?e=ze(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Pe(e,this._menu,t)}_isShown(){return this._menu.classList.contains(ji)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Ki;if(e.classList.contains("dropstart"))return Xi;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Wi:zi:t?Ui:Vi}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Ct.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...et(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=Tt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>We(e)));i.length&&it(i,t,e===Ni,!i.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Ji.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=Tt.find(Hi);for(const i of t){const t=Ji.getInstance(i);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),n=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!n||"outside"===t._config.autoClose&&n)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:t._element};"click"===e.type&&(o.clickEvent=e),t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,s=[Li,Ni].includes(e.key);if(!s&&!i)return;if(t&&!i)return;e.preventDefault();const n=this.matches(Ri)?this:Tt.prev(this,Ri)[0]||Tt.next(this,Ri)[0]||Tt.findOne(Ri,e.delegateTarget.parentNode),o=Ji.getOrCreateInstance(n);if(s)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),n.focus())}}_t.on(document,Fi,Ri,Ji.dataApiKeydownHandler),_t.on(document,Fi,qi,Ji.dataApiKeydownHandler),_t.on(document,Bi,Ji.clearMenus),_t.on(document,Gi,Ji.clearMenus),_t.on(document,Bi,Ri,(function(e){e.preventDefault(),Ji.getOrCreateInstance(this).toggle()})),Ze(Ji);const Zi="backdrop",es="show",ts=`mousedown.bs.${Zi}`,is={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ss={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ns extends Et{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return is}static get DefaultType(){return ss}static get NAME(){return Zi}show(e){if(!this._config.isVisible)return void et(e);this._append();const t=this._getElement();this._config.isAnimated&&Xe(t),t.classList.add(es),this._emulateAnimation((()=>{et(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(es),this._emulateAnimation((()=>{this.dispose(),et(e)}))):et(e)}dispose(){this._isAppended&&(_t.off(this._element,ts),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=ze(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),_t.on(e,ts,(()=>{et(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){tt(e,this._getElement(),this._config.isAnimated)}}const os=".bs.focustrap",rs=`focusin${os}`,as=`keydown.tab${os}`,ls="backward",hs={autofocus:!0,trapElement:null},cs={autofocus:"boolean",trapElement:"element"};class ds extends Et{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return hs}static get DefaultType(){return cs}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),_t.off(document,os),_t.on(document,rs,(e=>this._handleFocusin(e))),_t.on(document,as,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,_t.off(document,os))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=Tt.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===ls?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?ls:"forward")}}const us=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ps=".sticky-top",fs="padding-right",gs="margin-right";class ms{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,fs,(t=>t+e)),this._setElementAttributes(us,fs,(t=>t+e)),this._setElementAttributes(ps,gs,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,fs),this._resetElementAttributes(us,fs),this._resetElementAttributes(ps,gs)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const n=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(n))}px`)}))}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&Ct.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const i=Ct.getDataAttribute(e,t);null!==i?(Ct.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(qe(e))t(e);else for(const i of Tt.find(e,this._element))t(i)}}const bs=".bs.modal",_s=`hide${bs}`,vs=`hidePrevented${bs}`,ys=`hidden${bs}`,ws=`show${bs}`,Cs=`shown${bs}`,Es=`resize${bs}`,xs=`click.dismiss${bs}`,ks=`mousedown.dismiss${bs}`,Ts=`keydown.dismiss${bs}`,As=`click${bs}.data-api`,Ss="modal-open",Is="show",Os="modal-static",Ls={backdrop:!0,focus:!0,keyboard:!0},Ns={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ds extends xt{constructor(e,t){super(e,t),this._dialog=Tt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ms,this._addEventListeners()}static get Default(){return Ls}static get DefaultType(){return Ns}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;_t.trigger(this._element,ws,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ss),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;_t.trigger(this._element,_s).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Is),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){_t.off(window,bs),_t.off(this._dialog,bs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ns({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ds({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Tt.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),Xe(this._element),this._element.classList.add(Is);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,_t.trigger(this._element,Cs,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){_t.on(this._element,Ts,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),_t.on(window,Es,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),_t.on(this._element,ks,(e=>{_t.one(this._element,xs,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ss),this._resetAdjustments(),this._scrollBar.reset(),_t.trigger(this._element,ys)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(_t.trigger(this._element,vs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Os)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Os),this._queueCallback((()=>{this._element.classList.remove(Os),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=Je()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=Je()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=Ds.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}_t.on(document,As,'[data-bs-toggle="modal"]',(function(e){const t=Tt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),_t.one(t,ws,(e=>{e.defaultPrevented||_t.one(t,ys,(()=>{We(this)&&this.focus()}))}));const i=Tt.findOne(".modal.show");i&&Ds.getInstance(i).hide();Ds.getOrCreateInstance(t).toggle(this)})),At(Ds),Ze(Ds);const $s=".bs.offcanvas",Ms=".data-api",Ps=`load${$s}${Ms}`,Bs="show",Fs="showing",Gs="hiding",js=".offcanvas.show",Rs=`show${$s}`,Hs=`shown${$s}`,qs=`hide${$s}`,zs=`hidePrevented${$s}`,Ws=`hidden${$s}`,Vs=`resize${$s}`,Us=`click${$s}${Ms}`,Ks=`keydown.dismiss${$s}`,Xs={backdrop:!0,keyboard:!0,scroll:!1},Qs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ys extends xt{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Xs}static get DefaultType(){return Qs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(_t.trigger(this._element,Rs,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ms).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fs);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Bs),this._element.classList.remove(Fs),_t.trigger(this._element,Hs,{relatedTarget:e})}),this._element,!0)}hide(){if(!this._isShown)return;if(_t.trigger(this._element,qs).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Gs),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(Bs,Gs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ms).reset(),_t.trigger(this._element,Ws)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new ns({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():_t.trigger(this._element,zs)}:null})}_initializeFocusTrap(){return new ds({trapElement:this._element})}_addEventListeners(){_t.on(this._element,Ks,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():_t.trigger(this._element,zs))}))}static jQueryInterface(e){return this.each((function(){const t=Ys.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}_t.on(document,Us,'[data-bs-toggle="offcanvas"]',(function(e){const t=Tt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Ve(this))return;_t.one(t,Ws,(()=>{We(this)&&this.focus()}));const i=Tt.findOne(js);i&&i!==t&&Ys.getInstance(i).hide();Ys.getOrCreateInstance(t).toggle(this)})),_t.on(window,Ps,(()=>{for(const e of Tt.find(js))Ys.getOrCreateInstance(e).show()})),_t.on(window,Vs,(()=>{for(const e of Tt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ys.getOrCreateInstance(e).hide()})),At(Ys),Ze(Ys);const Js={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Zs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),en=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,tn=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Zs.has(i)||Boolean(en.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(i)))};const sn={allowList:Js,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},nn={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},on={entry:"(string|element|function|null)",selector:"(string|element)"};class rn extends Et{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return sn}static get DefaultType(){return nn}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},on)}_setContent(e,t,i){const s=Tt.findOne(i,e);s&&((t=this._resolvePossibleFunction(t))?qe(t)?this._putElementInTemplate(ze(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(const e of n){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const s=[].concat(...e.attributes),n=[].concat(t["*"]||[],t[i]||[]);for(const t of s)tn(t,n)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return et(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const an=new Set(["sanitize","allowList","sanitizeFn"]),ln="fade",hn="show",cn=".tooltip-inner",dn=".modal",un="hide.bs.modal",pn="hover",fn="focus",gn={AUTO:"auto",TOP:"top",RIGHT:Je()?"left":"right",BOTTOM:"bottom",LEFT:Je()?"right":"left"},mn={allowList:Js,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},bn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class _n extends xt{constructor(e,t){if(void 0===Be)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return mn}static get DefaultType(){return bn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),_t.off(this._element.closest(dn),un,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=_t.trigger(this._element,this.constructor.eventName("show")),t=(Ue(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),_t.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(hn),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))_t.on(e,"mouseover",Ke);this._queueCallback((()=>{_t.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(_t.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(hn),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))_t.off(e,"mouseover",Ke);this._activeTrigger.click=!1,this._activeTrigger[fn]=!1,this._activeTrigger[pn]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),_t.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ln,hn),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(ln),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new rn({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[cn]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ln)}_isShown(){return this.tip&&this.tip.classList.contains(hn)}_createPopper(e){const t=et(this._config.placement,[this,e,this._element]),i=gn[t.toUpperCase()];return Pe(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return et(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...et(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)_t.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===pn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===pn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");_t.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?fn:pn]=!0,t._enter()})),_t.on(this._element,i,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?fn:pn]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},_t.on(this._element.closest(dn),un,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Ct.getDataAttributes(this._element);for(const e of Object.keys(t))an.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:ze(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=_n.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ze(_n);const vn=".popover-header",yn=".popover-body",wn={..._n.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Cn={..._n.DefaultType,content:"(null|string|element|function)"};class En extends _n{static get Default(){return wn}static get DefaultType(){return Cn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[vn]:this._getTitle(),[yn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=En.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ze(En);const xn=".bs.scrollspy",kn=`activate${xn}`,Tn=`click${xn}`,An=`load${xn}.data-api`,Sn="active",In="[href]",On=".nav-link",Ln=`${On}, .nav-item > ${On}, .list-group-item`,Nn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Dn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class $n extends xt{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Nn}static get DefaultType(){return Dn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=ze(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(_t.off(this._config.target,Tn),_t.on(this._config.target,Tn,In,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const e=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&e){if(i(o),!s)return}else n||e||i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Tt.find(In,this._config.target);for(const t of e){if(!t.hash||Ve(t))continue;const e=Tt.findOne(decodeURI(t.hash),this._element);We(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Sn),this._activateParents(e),_t.trigger(this._element,kn,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))Tt.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(Sn);else for(const t of Tt.parents(e,".nav, .list-group"))for(const e of Tt.prev(t,Ln))e.classList.add(Sn)}_clearActiveClass(e){e.classList.remove(Sn);const t=Tt.find(`${In}.${Sn}`,e);for(const e of t)e.classList.remove(Sn)}static jQueryInterface(e){return this.each((function(){const t=$n.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}_t.on(window,An,(()=>{for(const e of Tt.find('[data-bs-spy="scroll"]'))$n.getOrCreateInstance(e)})),Ze($n);const Mn=".bs.tab",Pn=`hide${Mn}`,Bn=`hidden${Mn}`,Fn=`show${Mn}`,Gn=`shown${Mn}`,jn=`click${Mn}`,Rn=`keydown${Mn}`,Hn=`load${Mn}`,qn="ArrowLeft",zn="ArrowRight",Wn="ArrowUp",Vn="ArrowDown",Un="Home",Kn="End",Xn="active",Qn="fade",Yn="show",Jn=".dropdown-toggle",Zn=`:not(${Jn})`,eo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',to=`${`.nav-link${Zn}, .list-group-item${Zn}, [role="tab"]${Zn}`}, ${eo}`,io=`.${Xn}[data-bs-toggle="tab"], .${Xn}[data-bs-toggle="pill"], .${Xn}[data-bs-toggle="list"]`;class so extends xt{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),_t.on(this._element,Rn,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?_t.trigger(t,Pn,{relatedTarget:e}):null;_t.trigger(e,Fn,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Xn),this._activate(Tt.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),_t.trigger(e,Gn,{relatedTarget:t})):e.classList.add(Yn)}),e,e.classList.contains(Qn))}_deactivate(e,t){if(!e)return;e.classList.remove(Xn),e.blur(),this._deactivate(Tt.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),_t.trigger(e,Bn,{relatedTarget:t})):e.classList.remove(Yn)}),e,e.classList.contains(Qn))}_keydown(e){if(![qn,zn,Wn,Vn,Un,Kn].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!Ve(e)));let i;if([Un,Kn].includes(e.key))i=t[e.key===Un?0:t.length-1];else{const s=[zn,Vn].includes(e.key);i=it(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),so.getOrCreateInstance(i).show())}_getChildren(){return Tt.find(to,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Tt.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const s=(e,s)=>{const n=Tt.findOne(e,i);n&&n.classList.toggle(s,t)};s(Jn,Xn),s(".dropdown-menu",Yn),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Xn)}_getInnerElement(e){return e.matches(to)?e:Tt.findOne(to,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=so.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}_t.on(document,jn,eo,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),Ve(this)||so.getOrCreateInstance(this).show()})),_t.on(window,Hn,(()=>{for(const e of Tt.find(io))so.getOrCreateInstance(e)})),Ze(so);const no=".bs.toast",oo=`mouseover${no}`,ro=`mouseout${no}`,ao=`focusin${no}`,lo=`focusout${no}`,ho=`hide${no}`,co=`hidden${no}`,uo=`show${no}`,po=`shown${no}`,fo="hide",go="show",mo="showing",bo={animation:"boolean",autohide:"boolean",delay:"number"},_o={animation:!0,autohide:!0,delay:5e3};class vo extends xt{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return _o}static get DefaultType(){return bo}static get NAME(){return"toast"}show(){if(_t.trigger(this._element,uo).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(fo),Xe(this._element),this._element.classList.add(go,mo),this._queueCallback((()=>{this._element.classList.remove(mo),_t.trigger(this._element,po),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(_t.trigger(this._element,ho).defaultPrevented)return;this._element.classList.add(mo),this._queueCallback((()=>{this._element.classList.add(fo),this._element.classList.remove(mo,go),_t.trigger(this._element,co)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(go),super.dispose()}isShown(){return this._element.classList.contains(go)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){_t.on(this._element,oo,(e=>this._onInteraction(e,!0))),_t.on(this._element,ro,(e=>this._onInteraction(e,!1))),_t.on(this._element,ao,(e=>this._onInteraction(e,!0))),_t.on(this._element,lo,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=vo.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}At(vo),Ze(vo);const yo={font:{normal:"12px sans-serif",bold:"bold 12px sans-serif",monospace:"12px monospace",italic:"italic 12px sans-serif"},text:{color:"#FFF",disabled:"#AAA",label:"#CCC",value:"#0FF"},box:{padding:5,borderRadius:4,background:"rgba(0, 0, 0, 0.7)",border:"#FFF"},selection:{border:"#FFF",fill:"rgba(0, 0, 0, 0.25)",labelBg:"rgba(0, 0, 0, 0.7)",labelText:"#FFF",dashed:[4,3],lineWidth:2,diagonalLineWidth:1,labelFont:"bold 12px sans-serif",labelPadding:5},checkerboard:{light:"#404040",dark:"#303030",size:10},arrows:{color:"#AAA",size:12}};class wo{static fitTextWithinWidth(e,t,i){if(e.measureText(t).width<=i)return t;let s=0,n=t.length;for(;s<n;){const o=Math.floor((s+n)/2),r=t.slice(0,o)+"…";e.measureText(r).width<=i?s=o+1:n=o}return t.slice(0,s-1)+"…"}static drawRoundedRect(e,t,i,s,n,{fill:o=null,stroke:r=null,radius:a=yo.box.borderRadius,lineWidth:l=1,shadowColor:h=null,shadowBlur:c=0,shadowOffsetX:d=0,shadowOffsetY:u=0}={}){(o||r)&&(e.save(),e.lineWidth=l,h&&(e.shadowColor=h,e.shadowBlur=c,e.shadowOffsetX=d,e.shadowOffsetY=u),e.beginPath(),e.roundRect(t,i,s,n,a),o&&(e.fillStyle=o,e.fill()),r&&(e.strokeStyle=r,e.stroke()),e.restore())}static drawText(e,t,i,s,{font:n=yo.font.normal,color:o=yo.text.color,align:r="left",baseline:a="top"}={}){e.save(),e.font=n,e.fillStyle=o,e.textAlign=r,e.textBaseline=a,e.fillText(t,i,s),e.restore()}static drawArrow(e,t,i,s,{height:n=yo.arrows.size,color:o=yo.arrows.color,margin:r=2}={}){const a=n/2;e.save(),e.fillStyle=o,e.beginPath(),"left"===t?(e.moveTo(i-r,s),e.lineTo(i+a-r,s-a),e.lineTo(i+a-r,s+a)):"right"===t&&(e.moveTo(i+r,s),e.lineTo(i-a+r,s-a),e.lineTo(i-a+r,s+a)),e.closePath(),e.fill(),e.restore()}static drawTextBox(e,t,i,s,{font:n=yo.font.bold,padding:o=yo.box.padding,bg:r=yo.box.background,border:a=yo.box.border,fg:l=yo.text.color,radius:h=yo.box.borderRadius}={}){e.save(),e.font=n,e.textAlign="center",e.textBaseline="middle";const c=e.measureText(t).width+2*o;wo.drawRoundedRect(e,i-c/2,s-10,c,20,{fill:r,stroke:a,radius:h}),e.fillStyle=l,e.fillText(t,i,s),e.restore()}}class Co{constructor(e,t,i){this.label=e,this.colorGenerator=i,this._isActive=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.trueIndicatorColor="#39e75f",this.falseIndicatorColor="#777"}get isActive(){return this._isActive}set isActive(e){this._isActive=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){const o=i-2*this.margin;this.drawLabel(e,s,n),this.drawValue(e,o,s,n),this.drawIndicator(e,o,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._isActive?"true":"false",t+this.margin-20,i+.7*s)}drawIndicator(e,t,i,s){const n=this._isActive?this.trueIndicatorColor:this.falseIndicatorColor,o=.6*s,r=e.createRadialGradient(t+this.margin-5,i+.5*s,0,t+this.margin-5,i+.5*s,o);r.addColorStop(0,n),r.addColorStop(1,"rgba(0, 0, 0, 0)"),this._isActive&&(e.fillStyle=r,e.beginPath(),e.arc(t+this.margin-5,i+.5*s,o,0,2*Math.PI),e.fill()),e.fillStyle=n,e.beginPath(),e.arc(t+this.margin-5,i+.5*s,.35*s,0,2*Math.PI),e.fill(),e.strokeStyle="#222",e.stroke()}}class Eo{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){const i=this.listeners[e];if(!i)return;const s=i.indexOf(t);-1!==s&&i.splice(s,1)}emit(e,...t){const i=this.listeners[e];i&&i.forEach((e=>{e(...t)}))}}class xo{constructor(e,t,i){this.eventEmitter=new Eo,this.label=e,this.colorGenerator=i,this._isChecked=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor(),this.checkboxSize=20,this.checkboxMargin=5,this.checkboxColor=this.colorGenerator.getValueColor(),this.checkboxX=0,this.checkboxY=0,this.labelEndPosition=0}get isChecked(){return this._isChecked}set isChecked(e){this._isChecked=e,this.eventEmitter.emit("onChange",this._isChecked)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}isClickInZone(e){return e[0]>=this.checkboxX&&e[0]<=this.checkboxX+this.labelEndPosition&&e[1]>=this.checkboxY&&e[1]<=this.checkboxY+this.checkboxSize}onMouse(e,t){"pointerdown"===e.type&&this.isClickInZone(t)&&(this.isChecked=!this.isChecked)}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){this.drawLabel(e,s,n),this.drawCheckbox(e,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor;const s=2*this.margin+5;e.fillText(this.label,s,t+.7*i);const n=s+e.measureText(this.label).width;this.labelEndPosition=n}drawCheckbox(e,t,i){this.checkboxY=t+(i-this.checkboxSize)/2,this.checkboxX=this.margin,e.fillStyle=this.backgroundColor,e.strokeStyle=this.outlineColor,e.beginPath(),e.roundRect(this.checkboxX,this.checkboxY,this.checkboxSize,this.checkboxSize,2),e.fill(),e.stroke(),this._isChecked&&(e.strokeStyle=this.checkboxColor,e.beginPath(),e.moveTo(this.checkboxX+3,this.checkboxY+this.checkboxSize/2),e.lineTo(this.checkboxX+this.checkboxSize/3,this.checkboxY+this.checkboxSize-3),e.lineTo(this.checkboxX+this.checkboxSize-3,this.checkboxY+3),e.stroke())}}class ko{constructor(e,t,i,s){this.eventEmitter=new Eo,this.label=e,this.options=i,this.colorGenerator=s,this._selection=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get selection(){return this._text}set selection(e){this._selection=e,this.eventEmitter.emit("onChange",this._selection)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}onMouse(t,i){const s=this;if("pointerdown"===t.type){var n=t.target.data.getCanvasWindow();new e.ContextMenu(this.options,{scale:1,event:t,className:"dark",callback:function(e){s.selection=e}},n)}}computeSize(t,i){if(void 0!==t&&void 0!==i)return new Float32Array([t,20]);let s=new Float32Array([220,20]);var n=0;return this.options.forEach((t=>{n=Math.max(n,e.computeTextWidth(t,.6))})),s[0]=n,s[0]+=e.computeTextWidth(this.label),s[0]+=70,s[1]=e.NODE_WIDGET_HEIGHT,s}draw(e,t,i,s,n){e.textAlign="left";const o=i-2*this.margin;this.drawBackground(e,s,o,n),this.drawLabel(e,s,n),this.drawValue(e,o,s,n),this.drawDownArrow(e,s,i,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin+10,t+.7*i)}drawDownArrow(e,t,i,s){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(i-this.margin-12,t+s-5),e.lineTo(i-this.margin-18,t+5),e.lineTo(i-this.margin-6,t+5),e.fill()}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._selection,t-5,i+.7*s)}}class To{constructor(e,t,i,s){this.label=e,this.precision=i,this.colorGenerator=s,this._value=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.valueFont="12px Arial",this.margin=20,this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueTextColor=this.colorGenerator.getValueColor()}get value(){return this._value}set value(e){this._value=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const o=i-2*this.margin;this.drawLabel(e,s,n),this.drawValue(e,o,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(Number(this._value).toFixed(this.precision),t+this.margin-5,i+.7*s)}}class Ao{constructor(e,t,i,s,n){this.eventEmitter=new Eo,this.label=e,this.precision=i,this.limiter=s,this.colorGenerator=n,this.isDragging=!1,this.startX=0,this.step=this.calculateStep(i),this.setupDefaults(),this.limiter.value=t}setupDefaults(){this.labelFont="12px Arial",this.valueFont="12px Arial",this.margin=20,this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueTextColor=this.colorGenerator.getValueColor(),this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor(),this.arrowColor=this.colorGenerator.getValueColor()}get value(){return this.limiter.value}set value(e){e!=this.limiter.value&&(this.limiter.value=e,this.notifyValueChange())}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}computeSize(e,t){return void 0!==e&&void 0!==t?new Float32Array([e,20]):new Float32Array([220,20])}onMouse(e,t,i){const s=t[0],n=i.size[0],o=this.getMultiplier(e);"pointerdown"===e.type?this.handleMouseDown(s,n,o):"pointermove"===e.type?this.handleMouseMove(s,o):"pointerup"===e.type&&this.handleMouseUp(s,n,e)}calculateStep(e){return Math.pow(10,-Math.abs(e))}getMultiplier(e){return e.shiftKey&&e.ctrlKey?100:e.shiftKey?10:1}handleMouseDown(e,t,i){this.isMyMouseEvent=!0,this.isDragging=!1,this.startX=e,this.adjustValueByPosition(e,t,i)}handleMouseMove(e,t){if(this.isMyMouseEvent&&Math.abs(e-this.startX)>1){const i=Math.floor(e-this.startX);this.limiter.incrementBy(i*this.step*t),this.startX=e,this.isDragging=!0}}handleMouseUp(e,t,i){!this.isDragging&&this.isInsideInputArea(e,t)&&this.promptForValue(i),this.isDragging=!1,this.isMyMouseEvent=!1,this.notifyValueChange()}isInsideInputArea(e,t){return e>40&&e<t-40}adjustValueByPosition(e,t,i){e<40?this.limiter.decrementBy(this.step*i):e>t-40&&this.limiter.incrementBy(this.step*i)}promptForValue(e){let t=this;e.target.data.prompt("Value",this.value.toString(),(function(e){const i=Number(e);isNaN(i)?console.error("Invalid input: Input is not a number."):t.value=i}),e)}notifyValueChange(){this.eventEmitter.emit("onChange",this.value)}draw(e,t,i,s,n){e.textAlign="left";const o=i-2*this.margin;this.drawBackground(e,s,o,n),this.drawLeftArrow(e,s,n),this.drawRightArrow(e,s,i,n),this.drawLabel(e,s,n),this.drawValue(e,o,s,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLeftArrow(e,t,i){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(this.margin+16,t+5),e.lineTo(this.margin+6,t+.5*i),e.lineTo(this.margin+16,t+i-5),e.fill()}drawRightArrow(e,t,i,s){e.fillStyle=this.arrowColor,e.beginPath(),e.moveTo(i-this.margin-16,t+5),e.lineTo(i-this.margin-6,t+.5*s),e.lineTo(i-this.margin-16,t+s-5),e.fill()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,2*this.margin+5,t+.7*i)}drawValue(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(Number(this.value).toFixed(this.precision),t-5,i+.7*s)}}class So{constructor(e,t,i){this.label=e,this.colorGenerator=i,this._text=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get text(){return this._text}set text(e){this._text=e}computeSize(){return new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const o=i-2*this.margin;this.drawLabel(e,s,n),this.drawText(e,o,s,n)}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin,t+.7*i)}drawText(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._text,t+this.margin,i+.7*s)}}class Io{constructor(e,t,i){this.eventEmitter=new Eo,this.label=e,this.colorGenerator=i,this._text=t,this.setupDefaults()}setupDefaults(){this.labelFont="12px Arial",this.labelTextColor=this.colorGenerator.getLabelColor(),this.valueFont="12px Arial",this.valueTextColor=this.colorGenerator.getValueColor(),this.margin=20,this.outlineColor=this.colorGenerator.getBorderColor(),this.backgroundColor=this.colorGenerator.getBackgroundColor()}get text(){return this._text}set text(e){this._text=e,this.eventEmitter.emit("onChange",this._text)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}onMouse(e,t){const i=this;"pointerdown"===e.type&&e.target.data.prompt("Value",this._text,(function(e){i.text=e}),e)}computeSize(e,t){return void 0!==e&&void 0!==t?new Float32Array([e,20]):new Float32Array([220,20])}draw(e,t,i,s,n){e.textAlign="left";const o=i-2*this.margin;this.drawBackground(e,s,o,n),this.drawLabel(e,s,n),this.drawText(e,o,s,n)}drawBackground(e,t,i,s){e.strokeStyle=this.outlineColor,e.fillStyle=this.backgroundColor,e.beginPath(),e.roundRect(this.margin,t,i,s,2),e.fill(),e.stroke()}drawLabel(e,t,i){e.font=this.labelFont,e.fillStyle=this.labelTextColor,e.fillText(this.label,this.margin+10,t+.7*i)}drawText(e,t,i,s){e.font=this.valueFont,e.fillStyle=this.valueTextColor,e.textAlign="right",e.fillText(this._text,this.margin+t-10,i+.7*s)}}class Oo{LABEL_BRIGHTNESS=70;LABEL_SATURATION=0;VALUE_BRIGHTNESS=90;VALUE_SATURATION=0;BORDER_BRIGHTNESS=50;BORDER_SATURATION=0;BACKGROUND_BRIGHTNESS=10;BACKGROUND_SATURATION=0;constructor(e,t=""){this.type=e,this.other=t}generateHsl(e,t){let i=0;for(let e=0;e<this.type.length;e++)i=this.type.charCodeAt(e)+((i<<5)-i);for(let e=0;e<this.other.length;e++)i=this.other.charCodeAt(e)+((i<<5)-i);return`hsl(${Math.abs(i)%360}, ${e}%, ${t}%)`}getLabelColor(){return this.generateHsl(this.LABEL_SATURATION,this.LABEL_BRIGHTNESS)}getValueColor(){return this.generateHsl(this.VALUE_SATURATION,this.VALUE_BRIGHTNESS)}getBorderColor(){return this.generateHsl(this.BORDER_SATURATION,this.BORDER_BRIGHTNESS)}getBackgroundColor(){return this.generateHsl(this.BACKGROUND_SATURATION,this.BACKGROUND_BRIGHTNESS)}}class Lo{#e;#t;#i;#s;#n;#o;#r;constructor(e,t,i,s=null,n=2){this.#e=e,this.#t=t,this.#i=i,this.#s=s,this.#n=n,this.#a(),this.value=i}#l(e){return"odd"===this.#s&&e%2==0||"even"===this.#s&&e%2!=0}#h(e,t){return this.#l(e)?e+t:e}#a(){this.#o=this.#h(this.#e,1),this.#r=this.#h(this.#t,-1)}incrementBy(e){let t=this.#i+e;this.#l(t)&&(t+=1),this.value=t}decrementBy(e){let t=this.#i-e;this.#l(t)&&(t-=1),this.value=t}get value(){return this.#i}set value(e){this.#l(e)&&(e+=1),e=parseFloat(e.toFixed(this.#n)),this.#i=Math.min(Math.max(e,this.#o),this.#r)}setValue(e){this.value=e}getValue(){return this.value}}function No(e,t,i){return Math.max(t,Math.min(i,e))}function Do(e,t){if(e===t)return!0;if(null==e||null==t||"object"!=typeof e||"object"!=typeof t)return!1;const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const n of i)if(!s.includes(n)||!Do(e[n],t[n]))return!1;return!0}const $o="display",Mo="control";class Po{eventEmitter=new Eo;_value=null;parent=null;constructor(e,t,i){if(this.name=e,this.parent=t,this.options=i,this.port_name=null,this.parent&&this.options&&this.options.parameter){if(!(this.options.parameter.metadata||[]).some((e=>"suppressInput"===e.name&&!0===e.value))){const t=Go(i.parameter.datatype),s=this.port=this.parent.addInput(e,t);s.widget_name=this.name,this.port_name=s.name}}}get value(){return this._value}set value(e){if(!Do(e,this._value)){const t=this._value;this._value=e,this.eventEmitter.emit("valueChanged",e,t),this.parent&&this.options&&this.options.property&&this.parent.setProperty(this.options.property,e),this.parent?.setDirtyCanvas(!0,!0)}}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}triggerParentResetSize(){this.parent&&this.parent.resetSize()}}class Bo extends Po{static capability=$o;constructor(e,t,i={}){super(e,t,i),i.content&&this.registerForContentUpdates(t,i.content)}registerForContentUpdates(e,t){t&&e&&e.on("nodeStatusUpdated",(i=>{const s=i.contents?.find((e=>e.name===t.name))?.value;this.value=s,e?.setDirtyCanvas(!0,!0)}))}}class Fo extends Po{static capability=Mo;constructor(e,t,i={}){super(e,t,i)}}function Go(e){let t=e.identifier?`${e.typeName} (${e.identifier})`:e.typeName;return e.baseDatatype&&(t+=`,${Go(e.baseDatatype)}`),t}class jo{constructor(){this.widgets=new Map}_createKey(e,t,i=void 0){return`${e}:${t}${i?`:${i}`:""}`}add(e,t,i=void 0){const s=e.capability,n=this._createKey(t,s,i);this.widgets.has(n)||this.widgets.set(n,new Set),this.widgets.get(n).add(e)}_getWidgetsByKey(e){return Array.from(this.widgets.get(e)||[])}get(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*"),o=this._getWidgetsByKey(s),r=this._getWidgetsByKey(n);return Array.from(new Set([...o,...r]))}getDisplaysOfType(e,t=void 0){return this.get(e,$o,t)}getControlsOfType(e,t=void 0){return this.get(e,Mo,t)}has(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*");return this.widgets.has(s)||this.widgets.has(n)}hasDisplay(e,t){return this.has(e,$o,t)}hasControl(e,t){return this.has(e,Mo,t)}remove(e,t,i=void 0){const s=this._createKey(e,t,i),n=this._createKey(e,t,"*");this.widgets.delete(s),this.widgets.delete(n)}[Symbol.iterator](){const e=this.widgets.entries();return{next:()=>{const{done:t,value:i}=e.next();if(t)return{done:t};const[s,n]=i,[o,r,a]=s.split(":");return{value:[o,r,a,Array.from(n)],done:!1}}}}}class Ro{constructor(){this.handlers=[]}addHandler(e){this.handlers.push(e)}removeHandler(e){const t=this.handlers.indexOf(e);t>-1&&this.handlers.splice(t,1)}handle(e,t){let i=0;const s=()=>{if(i<this.handlers.length){this.handlers[i++].handle(e,t,s)}};s()}}class Ho{handle(e,t,i){i()}}function qo(e){let t=e.identifier?`${e.typeName} (${e.identifier})`:e.typeName;return e.baseDatatype&&(t+=`,${qo(e.baseDatatype)}`),t}class zo extends Ho{handle(e,t,i){t.inputPorts&&t.inputPorts.forEach((t=>{const i=qo(t.datatype);e.addInput(t.name,i)})),i()}}class Wo extends Ho{handle(e,t,i){t.outputPorts&&t.outputPorts.forEach((t=>{const i=qo(t.datatype);e.addOutput(t.name,i)})),i()}}class Vo extends Ho{constructor(e){super(),this.widgets=e}handle(e,t,i){const s=new Set(t.contents?t.contents.map((e=>e.name)):[]);t.parameters&&t.parameters.forEach((i=>{const n=i.name,o=i.datatype.typeName,r=i.datatype.identifier,a=i.datatype.identifier?`${i.datatype.typeName} (${i.datatype.identifier})`:i.datatype.typeName,l=i.defaultValue;let h;e.addProperty(n,l,a),s.has(n)&&(h=t.contents.find((e=>e.name===n)));const c=this.widgets.getControlsOfType(o,r);if(!c.length)throw new Error(`Unable to find widget of type :  ${a}`);const d=new c[0](n,e,{property:n,parameter:i,content:h});e.addCustomWidget(d)})),i()}}class Uo extends Ho{constructor(e){super(),this.widgets=e}handle(e,t,i){const s=new Set(t.parameters?t.parameters.map((e=>e.name)):[]);t.contents&&t.contents.forEach((t=>{if(s.has(t.name))return;const i=t.name,n=t.datatype.typeName,o=t.datatype.identifier||"",r=t.datatype.identifier?`${t.datatype.typeName} (${t.datatype.identifier})`:t.datatype.typeName,a=this.widgets.getDisplaysOfType(n,o);if(!a.length)throw new Error(`Unable to find widget of type :  ${r}`);const l=new a[0](i,e,{content:t});e.addCustomWidget(l)})),i()}}class Ko extends t{eventEmitter=new Eo;constructor(e){super(e),this._shape=2,this.extensions=[],this.registerCallbackHandlers();(new Qo).applyExtensions("node",this),this.eventEmitter.emit("constructorComplete",this)}addCustomWidget(e){super.addCustomWidget(e),e.registerWithParent&&e.registerWithParent(this),this.eventEmitter.emit("customWidgetAdded",e)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}update(e){this.eventEmitter.emit("nodeStatusUpdated",e)}setPropertyDefaultValue(e,t){console.log("tried setting default",e,t)}resetSize(){this.setSize(this.computeSize())}onDropFile(t,i=null){if(this.widgets&&this.widgets.length)if(null!==i){const e=this.widgets.find((e=>e.name===i));if(e&&e.onDropFile&&e.onDropFile(t))return void this.eventEmitter.emit("dropFileHandledByWidget",t,e)}else for(const e of this.widgets)if(e.onDropFile&&e.onDropFile(t))return void this.eventEmitter.emit("dropFileHandledByWidget",t,e);e.log_warn(`Node ${this.type} was registered to handle a dropped file, but failed to handle it.`)}onConfigure(){this.widgets&&this.widgets.forEach((e=>{e&&e.postConfigure&&e.postConfigure()}))}registerCallbackHandlers(){this.registerCallbackHandler("onConfigure",(e=>{this.eventEmitter.emit("onConfigure",this)})),this.registerCallbackHandler("onAdded",(e=>{this.eventEmitter.emit("added",this)})),this.registerCallbackHandler("onRemoved",(e=>{this.eventEmitter.emit("removed",this)})),this.registerCallbackHandler("onPropertyChanged",((e,t,i,s)=>{this.eventEmitter.emit("propertyChanged",this,t,i,s)}))}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}}class Xo{constructor(e){this.widgets=e,this.handlers=new Ro}registerHandler(e){this.handlers.addHandler(e)}removeHandler(e){this.handlers.removeHandler(e)}validateBlueprint(e){return[this.checkBlueprintHasPath.bind(this),this.checkBlueprintParametersAreSupported.bind(this),this.checkBlueprintContentsAreSupported.bind(this)].every((t=>t(e)))}getNodeNameFromBlueprint(e){return e.path.split("/").pop()}getNodePathFromBlueprint(e){return e.path.split("/").slice(0,-1).join("/")}getNodeTypeFromBlueprint(e){return e.path}checkBlueprintHasPath(e){return e.path}checkBlueprintParametersAreSupported(e){return!e.node.parameters||e.node.parameters.every((e=>{const{typeName:t,identifier:i}=e.datatype;return this.widgets.hasControl(t,i)}))}checkBlueprintContentsAreSupported(e){if(!e.node.contents)return!0;const t=new Set((e.node?.parameters||[]).map((e=>`${e.datatype.typeName}-${e.datatype.identifier}`)));return e.node.contents.every((e=>{const{typeName:i,identifier:s}=e.datatype,n=`${i}-${s}`;return!(!t.has(n)||!this.widgets.hasControl(i,s))||this.widgets.hasDisplay(i,s)}))}create(e){if(!this.validateBlueprint(e))return;const t=this,i=t.getNodeNameFromBlueprint(e);return class extends Ko{static title=i;static desc="";constructor(){super(i),t.handlers.handle(this,e.node)}}}}class Qo{static instance;constructor(){if(Qo.instance)return Qo.instance;if(void 0===e)throw new Error("LiteGraph is not available in the global scope.");return this.liteGraph=e,this.liteGraph.initialize(),this.nodeExtensions=[],this.canvasExtensions=[],this.editorExtensions=[],this.widgets=new jo,this.nodeClassFactory=new Xo(this.widgets),this.nodeClassFactory.registerHandler(new zo),this.nodeClassFactory.registerHandler(new Wo),this.nodeClassFactory.registerHandler(new Vo(this.widgets)),this.nodeClassFactory.registerHandler(new Uo(this.widgets)),this.liteGraph.computeTextWidth=function(e,t){if(!e)return 0;let i=e.toString();return void 0===t?this.NODE_TEXT_SIZE*i.length*.6:this.NODE_TEXT_SIZE*i.length*t},Qo.instance=new Proxy(this,{get:(e,t,i)=>Reflect.has(e,t)?Reflect.get(e,t,i):(...i)=>"function"==typeof e.liteGraph[t]?e.liteGraph[t].apply(e.liteGraph,i):e.liteGraph[t]}),Qo.instance}install(e,t){e.install(this,t)}installNodeBlueprints(e){e&&Array.isArray(e)&&e.forEach((e=>{this.installNodeBlueprint(e)}))}installNodeBlueprint(e){if(e){const t=this.nodeClassFactory.getNodeTypeFromBlueprint(e);if(!t)return void this.log_warn("Failed to determine node type from blueprint.");const i=this.nodeClassFactory.create(e);if(!i)return void this.log_warn("Unable to create node class from blueprint.",t,e);this.registerNodeType(t,i)}else this.log_warn("No blueprint provided to installNodeBlueprint.")}registerWidgetType(e,t,i){this.widgets.add(e,t,i)}registerFileAssociation(e,t,i=null){for(let s of e)s&&"string"==typeof s&&(this.liteGraph.node_types_by_file_extension[s.toLowerCase()]={type:t,widgetName:i})}registerNodeExtension(e,t={}){this.nodeExtensions.push([e,t])}registerCanvasExtension(e,t={}){this.canvasExtensions.push([e,t])}registerEditorExtension(e,t={}){this.editorExtensions.push([e,t])}applyExtensions(e,t){let i;switch(e){case"node":i=this.nodeExtensions;break;case"canvas":i=this.canvasExtensions;break;case"editor":i=this.editorExtensions;break;default:throw new Error(`Unknown extension type: ${e}`)}i.forEach((([e,i])=>{t.applyExtension(e,i)}))}getVersion(){return this.liteGraph.VERSION}}class Yo extends i{eventEmitter=new Eo;constructor(e,t,i){super(e,t,i),this.extensions=[];(new Qo).applyExtensions("canvas",this)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}setDefaultViewpoint(){if(!this.graph||!this.graph._nodes||0===this.graph._nodes.length)return this.ds.offset[0]=0,this.ds.offset[1]=0,this.ds.scale=1,void this.setDirty(!0,!0);let e,t;this.graph._nodes.forEach((i=>{const s=i.getBounding(undefined,!0);void 0===e||void 0===t?(e=s[0],t=s[1]):(e=Math.min(e,s[0]),t=Math.min(t,s[1]))})),this.ds.offset[0]=10-e,this.ds.offset[1]=10-t,this.ds.scale=1,this.setDirty(!0,!0)}}class Jo{static Convert(e){const t=JSON.parse(JSON.stringify(e.serialize())),i=this.#c(t.nodes),s=this.#d(i,t.links);return this.#u({...t,nodes:i,links:s})}static#c(e){return e.map((e=>({...e,id:String(e.id)})))}static#d(e,t){return t.map((t=>{const[i,s,n,o,r,a]=t,l=String(i),h=String(s),c=String(o),d=e.find((e=>e.id===h)),u=e.find((e=>e.id===c)),p=d&&d.outputs[n]?.name||"unknown",f=u&&u.inputs[r]?.name||"unknown";return[l,h,p,c,f,a]}))}static#u(e){const{extra:t,version:i,config:s,last_node_id:n,last_link_id:o,...r}=e;return r.nodes=r.nodes.map((e=>{const{flags:t,shape:i,size:s,pos:n,properties:o,inputs:r,outputs:a,...l}=e;return o&&Object.keys(o).length&&(l.properties=o),r&&r.length&&(l.inputs=r),a&&a.length&&(l.outputs=a),l})),r}}class Zo extends s{#p=null;emitOnNodePropertyChangeBound=null;constructor(e){super(e),this.eventEmitter=new Eo,this.#p=null,this.isConfiguring=!1,this.emitOnNodePropertyChangeBound=this.emitOnNodePropertyChange.bind(this),this.updateGraphUuid()}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}get uuid(){return this.#p}set uuid(e){this.#p=e}get isEmpty(){return 0===this._nodes.length}updateGraphUuid(){this.#p=e.uuidv4()}update(e){const t=e&&Array.isArray(e.nodes)?new Map(e.nodes.map((e=>[e.id,e]))):new Map;this._nodes.forEach((e=>{const i=t.get(e.id)||{};e.update(i)}))}getMissingNodeTypes(t){const i=t.nodes||[],s=[];return i.forEach((t=>{const i=t.type;e.getNodeType(i)||s.push(i)})),s.length>0?[...new Set(s)]:null}configure(e,t){const i=this.getMissingNodeTypes(e);if(i){const e=i.map((e=>`<li>${e}</li>`)).join("");throw new Error(`${`The following node types are missing:<ul>${e}</ul>Please check that the required blueprints are loaded.`}`)}this.eventEmitter.emit("beforeGraphConfigure",this),this.isConfiguring=!0,super.configure(e,t),this.isConfiguring=!1,this.eventEmitter.emit("graphConfigure",this)}serialize(){let e=super.serialize();return e.uuid=this.#p,e}exportForBackend(){return Jo.Convert(this)}clear(){super.clear(),this.eventEmitter&&this.eventEmitter.emit("clear",this)}onNodeAdded(e){this.isConfiguring||this.updateGraphUuid(),e.on("propertyChanged",this.emitOnNodePropertyChangeBound),this.eventEmitter.emit("nodeAdded",this,e)}onNodeRemoved(e){this.isConfiguring||this.updateGraphUuid(),e.off("propertyChanged",this.emitOnNodePropertyChangeBound),this.eventEmitter.emit("nodeRemoved",this,e)}onConnectionChange(e){this.isConfiguring||this.updateGraphUuid(),this.eventEmitter.emit("connectionChange",this,e)}onBeforeChange(){this.eventEmitter.emit("beforeChange",this)}onAfterChange(){this.eventEmitter.emit("afterChange",this)}emitOnNodePropertyChange(e,t,i,s){this.eventEmitter.emit("nodePropertyChanged",this,e,t,i,s)}}class er{constructor(e){this.toastContainer=e}generateToastId(){const e=Math.floor(1e3*Math.random());return`${(new Date).getTime()}-${e}-toast`}showToast(e,t,i,s={}){const n=this.generateToastId();let o,r,a,l,h,c="";switch(i){case"error":o="bg-danger",r="text-white",a="btn-close-white",l=4e3,h=!0;break;case"warning":o="bg-warning",r="text-black",a="btn-close-black",l=4e3,h=!0;break;case"success":o="bg-success",r="text-white",a="btn-close-white",l=4e3,h=!0;break;case"info":o="bg-light",r="text-black",a="btn-close-black",l=4e3,h=!0;break;case"okCancel":o="bg-light",r="text-black",a="btn-close-black",l=0,h=!1,c=`\n          <div class="d-flex justify-content-end mt-2">\n            <button class="btn btn-primary btn-sm me-2" id="${n}-ok-btn">\n              OK\n            </button>\n            <button class="btn btn-secondary btn-sm" id="${n}-cancel-btn">\n              Cancel\n            </button>\n          </div>\n        `;break;default:o="bg-secondary",r="text-white",a="btn-close-white"}const d=`\n            <div id="${n}" class="toast ${o} ${r}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="${h}" data-bs-delay="${l}">\n                <div class="toast-header ${o} ${r}">\n                    <strong class="me-auto">${e}</strong>\n                    <button type="button" class="btn-close ${a}" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n                <div class="toast-body ${r}">${t}${c}</div>\n            </div>\n        `;let u=document.createElement("div");u.innerHTML=d,this.toastContainer.appendChild(u),$(`#${n}`).toast("show"),this.setupToastEventListeners(n,i,s)}setupToastEventListeners(e,t,i){"okCancel"===t&&(document.getElementById(`${e}-ok-btn`).addEventListener("click",(()=>{i.onOk&&i.onOk(),$(`#${e}`).toast("hide")})),document.getElementById(`${e}-cancel-btn`).addEventListener("click",(()=>{i.onCancel&&i.onCancel(),$(`#${e}`).toast("hide")}))),$(`#${e}`).on("hidden.bs.toast",(function(){this.remove()}))}showWarning(e,t){this.showToast(e,t,"warning")}showError(e,t){this.showToast(e,t,"error")}showSuccess(e,t){this.showToast(e,t,"success")}showInfo(e,t){this.showToast(e,t,"info")}showMessage(e,t){this.showToast(e,t,"")}showOkCancel(e,t,i){this.showToast(e,t,"okCancel",i)}}class tr{constructor(e){this.name=e,this.container=document.createElement("div"),this.container.className="btn-group",this.container.setAttribute("role","group"),this.container.setAttribute("aria-label",`${e} button group`)}addButton(e){const t=e.render();t.classList.add("btn","btn-primary"),this.container.appendChild(t)}render(){return this.container}addSeparator(){const e=document.createElement("div");e.className="vr",this.container.appendChild(e)}}class ir{constructor(e,t,i,s,n){this.id=e,this.label=t,this.iconClass=i,this.onClick=s,this.tooltip=n||t,this.button=null}render(){this.button=document.createElement("button"),this.button.id=this.id,this.button.className="mgui mgui-toolbar-button btn btn-primary",this.button.title=this.tooltip;let e="";return this.iconClass&&(e+=`<i class="${this.iconClass}"></i> `),e+=`<span class="button-label">${this.label}</span>`,this.button.innerHTML=e,this.onClick&&this.button.addEventListener("click",(e=>{this.onClick(e),e.currentTarget.blur()})),this.button}toggleButtonState(e){this.button&&(this.button.disabled=!e,this.button.classList.toggle("disabled",!e))}enable(){this.toggleButtonState(!0)}disable(){this.toggleButtonState(!1)}addClass(e){this.button&&this.button.classList.add(e)}removeClass(e){this.button&&this.button.classList.remove(e)}}class sr{render(){const e=document.createElement("div");return e.className="mgui-toolbar-separator",e}}class nr{constructor(e,t){this.eventEmitter=new Eo,this.connection=t,this.rootElement=null,this.parentDiv=null,this.toolbarElement=null,this.mainWindowElement=null,this.footerElement=null,this.canvasElement=null,this.toastContainer=null,this.toasts=null,this.graphCanvas=null,this.graph=new Zo,this.toolbarControls=[],this.extensions=[],this.makeEditorWindow(e),this.disableScrolling(),this.setGraph(this.graph);return(new Qo).applyExtensions("editor",this),this.eventEmitter.emit("toolbarReady"),this.eventEmitter.emit("instantiated",this),this}handleTouchMove(e){e.preventDefault()}enableScrolling(){this.canvasElement.removeEventListener("touchmove",this.handleTouchMove,{passive:!1})}disableScrolling(){this.canvasElement.addEventListener("touchmove",this.handleTouchMove,{passive:!1})}loadGraph(e){this.eventEmitter.emit("graphLoadInitiated",this.graph),this.graph.configure(e),this.graphCanvas.setDefaultViewpoint(),this.eventEmitter.emit("graphLoaded",this.graph)}clearGraph(){this.eventEmitter.emit("graphClearInitiated",this.graph),this.graph.clear(),this.eventEmitter.emit("graphCleared",this.graph)}serializeGraph(){const e=this.graph.serialize();return this.eventEmitter.emit("graphSerialized",e),e}getGraph(){return this.graph}getGraphCanvas(){return this.graphCanvas}setGraph(e){return this.graph&&this.eventEmitter.emit("graphReplaced",this.graph),this.graph=e,this.graphCanvas.setGraph(this.graph,!0),this.eventEmitter.emit("graphSet",this.graph),e}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}addButton(e,t){const i=new ir(e,t.label,t.iconClass,t.onClick,t.tooltip);if(t.group){this.getOrCreateButtonGroup(t.group,t.section||"left",t.groupPosition).addButton(i)}else this.addToolbarControl(i,{section:t.section,position:t.position,referenceId:t.referenceId});return i}getOrCreateButtonGroup(e,t="left",i="end"){if(this.buttonGroups||(this.buttonGroups={left:{},center:{},right:{}}),!this.buttonGroups[t][e]){const s=new tr(e);this.addToolbarControl(s,{section:t,position:i,referenceId:e}),this.buttonGroups[t][e]=s}return this.buttonGroups[t][e]}addSeparator(e="left"){const t=new sr;return this.addToolbarControl(t,{section:e}),t}addToolbarControl(e,t={}){const{section:i="left",position:s="end",referenceId:n=null}=t,o=this.toolbarElement.querySelector(`.mgui-toolbar-section.${i}`);if(!o)return console.warn(`Toolbar section '${i}' not found. Appending to left.`),this.addToolbarControl(e,{...t,section:"left"});const r=e.render();if(e.section=i,"start"===s)o.insertBefore(r,o.firstChild);else if(n){const e=o.querySelector(`#${n}`);e?o.insertBefore(r,"before"===s?e:e.nextSibling):o.appendChild(r)}else o.appendChild(r);return this.toolbarControls.push(e),this.resizeCanvas(),r}applyExtension(e,t={}){this.eventEmitter.emit("applyExtension",e,t);try{const i=new e(this,t);this.extensions.push(i)}catch(i){if("object"!=typeof e||"function"!=typeof e.apply)throw new Error("Extension must be a class or an object with an apply method");e.apply(this,t),this.extensions.push(e)}}makeEditorWindow(e,t={}){const i=this.rootElement=document.createElement("div");i.className="mgui mgui-editor",i.innerHTML='\n    \n    <div class="mgui-editor-toolbar ">\n      <div class="mgui-toolbar-section left"></div>\n      <div class="mgui-toolbar-section center"></div>\n      <div class="mgui-toolbar-section right"></div>\n    </div>\n    <div class="mgui-editor-main-window">\n        <canvas class="mgui-editor-graphcanvas"></canvas>   \n        <div class="toast-container" aria-live="polite" aria-atomic="true">\n    </div>\n    </div>\n    <div class="mgui-editor-footer">\n        <div class="mgui-editor-tools mgui-editor-tools-left"></div>\n        <div class="mgui-editor-tools mgui-editor-tools-right"></div>\n    </div>\n    <div class="mgui-modal-container"></div>',this.toolbarElement=i.querySelector(".mgui-editor-toolbar"),this.mainWindowElement=i.querySelector(".mgui-editor-main-window"),this.footerElement=i.querySelector(".mgui-editor-footer"),this.toastContainer=i.querySelector(".toast-container"),this.toasts=new er(this.toastContainer);const s=this.canvasElement=i.querySelector(".mgui-editor-graphcanvas");if(this.graphCanvas=new Yo(s),this.graphCanvas.render_canvas_border=!1,this.parentDiv=document.getElementById(e),!this.parentDiv)throw new Error("Editor has no parentElement to bind to");this.parentDiv?.appendChild(i),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this))}resizeCanvas(){const e=window.getComputedStyle(this.toolbarElement),t=window.getComputedStyle(this.footerElement),i=this.toolbarElement.offsetHeight+parseInt(e.marginTop)+parseInt(e.marginBottom),s=this.footerElement.offsetHeight+parseInt(t.marginTop)+parseInt(t.marginBottom),n=this.parentDiv.clientHeight-i-s;this.mainWindowElement.style.height=n+"px",this.canvasElement.height=n,this.canvasElement.style.height=n+"px",this.graphCanvas.resize()}showModal(e){const t=`mgui-modal-${Date.now()}`,i=e.dialogClass?` ${e.dialogClass}`:"",s=e.buttons.map((e=>`\n      <button type="button" \n              class="btn btn-${e.type||"secondary"}"\n              ${e.dismiss?'data-dismiss="modal"':""}>\n        ${e.label}\n      </button>\n    `)).join(""),n=`\n      <div class="modal fade" id="${t}" tabindex="-1" \n           aria-labelledby="${t}-label" aria-hidden="true">\n        <div class="modal-dialog ${i}">\n          <div class="modal-content">\n            <div class="modal-header">\n              <h5 class="modal-title" id="${t}-label">${e.title}</h5>\n              <button type="button" class="btn-close" \n                      data-dismiss="modal" \n                      aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n              ${e.body}\n            </div>\n            <div class="modal-footer">\n              ${s}\n            </div>\n          </div>\n        </div>\n      </div>`;this.rootElement.querySelector(".mgui-modal-container").insertAdjacentHTML("beforeend",n);const o=document.getElementById(t),r=new bootstrap.Modal(o,{keyboard:!0,focus:!1});$(o).on("show.bs.modal",(()=>{e.onShow&&e.onShow(r,o)})),$(o).on("shown.bs.modal",(()=>{o.querySelector("[autofocus]")?.focus(),e.onShown&&e.onShown(r,o)})),$(o).on("hide.bs.modal",(()=>{e.onHide&&e.onHide(r,o)})),$(o).on("hidden.bs.modal",(()=>{e.onHidden&&e.onHidden(r,o),o.remove()})),e.buttons.forEach(((e,t)=>{if(!e.dismiss){o.querySelectorAll(".modal-footer button")[t].addEventListener("click",(t=>{e.onClick?e.onClick(r):r.hide()}))}}));const a=o.querySelector("form");a&&a.addEventListener("submit",(t=>{t.preventDefault();const i=e.buttons.find((e=>"primary"===e.type));i&&(i.onClick?i.onClick(r):r.hide())})),e.preShow&&e.preShow(r,o),r.show()}showWarning(e,t){this.toasts.showWarning(e,t)}showError(e,t){this.toasts.showError(e,t)}showSuccess(e,t){this.toasts.showSuccess(e,t)}showInfo(e,t){this.toasts.showInfo(e,t)}showMessage(e,t){this.toasts.showMessage(e,t)}showOkCancel(e,t,i){this.toasts.showOkCancel(e,t,i)}async apiSend(e,t){return this.connection.send(e,t)}}class or{constructor(e){this.editor=e,this.getBlueprintsButton,this.editor.on("toolbarReady",(()=>{this.getBlueprintsButton=this.editor.addButton("GetBlueprints",{label:"Blueprints",iconClass:"fa-solid fa-layer-group",onClick:this.onBlueprintsClicked.bind(this),tooltip:"Get Blueprints",section:"left"}),this.onBlueprintsClicked()}))}async onBlueprintsClicked(){const e=new Qo;LiteGraph.log_log("api get blueprints"),this.editor.showInfo("Loading Blueprints","Please wait while the blueprints are fetched from the server."),this.getBlueprintsButton.disable();try{const t=await this.editor.apiSend("GetBlueprints");LiteGraph.log_log("api get blueprints reply",t),e.installNodeBlueprints(t.blueprints),t?.blueprints?.length&&this.editor.showSuccess("Blueprints loaded successfully",`${t.blueprints.length} blueprints were received.`)}catch(e){this.editor.showError("Failed to get blueprints",e)}finally{this.getBlueprintsButton.enable()}}}class rr{constructor(e){this.editor=e,this.setupEditorListeners()}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.editor.addButton("New",{label:"New",iconClass:"fa-solid fa-file",onClick:this.onNewClicked.bind(this),tooltip:"New Graph",section:"left",group:"fileOperations"}),this.editor.addButton("Open",{label:"Open",iconClass:"fa-solid fa-folder-open",onClick:this.onOpenClicked.bind(this),tooltip:"Open Graph",section:"left",group:"fileOperations"}),this.editor.addButton("Save",{label:"Save",iconClass:"fa-solid fa-floppy-disk",onClick:this.onSaveClicked.bind(this),tooltip:"Save Graph",section:"left",group:"fileOperations"})}))}onNewClicked(){this.editor.clearGraph()}supportsFilePicker(){return!(!window.showOpenFilePicker||!window.showSaveFilePicker)}getOrCreateGraphFileInput(){const e="graph-upload";let t=document.getElementById(e);return t||(t=document.createElement("input"),t.type="file",t.style.display="none",t.id=e,t.accept=".mgraph",document.body.appendChild(t)),t}async onOpenClicked(){if(this.supportsFilePicker())try{const[e]=await window.showOpenFilePicker({types:[{description:"Graph Files",accept:{"application/mgraph":[".mgraph"]}}],multiple:!1}),t=await e.getFile(),i=await t.text(),s=JSON.parse(i);try{this.editor.loadGraph(s),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${t.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}}catch(e){if("AbortError"===e.name)return;return this.editor.showError("Open Failed : File Access","There was an error while trying to access or read the file. Please check the console for more information."),void console.error(e)}else{const e=this.getOrCreateGraphFileInput();e.value="",e.onchange=async t=>{if(!e.files||!e.files.length)return;const i=e.files[0];if(!i.name.toLowerCase().endsWith(".mgraph"))return this.editor.showError("Open Failed : Wrong File Type",'Please select a ".mgraph" file.'),void(e.value="");try{const e=await i.text(),t=JSON.parse(e);this.editor.loadGraph(t),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${i.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}},e.click()}}sanitizeFilename(e){return e.replace(/[\/\\:*?"<>|]/g,"")}async onSaveClicked(){const e=this.editor.serializeGraph(),t=JSON.stringify(e),i="untitled";let s=i;if(e&&e.extra&&e.extra.filemeta&&e.extra.filemeta.name){const t=e.extra.filemeta.name;s=this.sanitizeFilename(t),s||(s=i)}if(this.supportsFilePicker())try{const e=await window.showSaveFilePicker({suggestedName:s+".mgraph",types:[{description:"Graph Files",accept:{"application/mgraph":[".mgraph"]}}]}),i=await e.createWritable();await i.write(t),await i.close()}catch(e){if("AbortError"===e.name)return;console.error("Failed to save file:",e)}else{const e=new Blob([t],{type:"application/mgraph"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download=s+".mgraph",document.body.appendChild(i),i.click(),setTimeout((()=>{document.body.removeChild(i),URL.revokeObjectURL(i.href)}),0)}}}class ar{constructor(e){this.editor=e,this.currentGraph=null,this.graphIsConfiguring=!1,this.pollingTimeoutId=null,this.pollingPeriodInMs=1e3,this.requestQueueMaxSize=1,this.requestQueue=[],this.processingRequest=!1,this.graphCreatePending=!1,this.graphCreateDirty=!1,this.activeGraphAction=null,this.handleClear=this.handleClear.bind(this),this.handleConnectionChange=this.handleConnectionChange.bind(this),this.handleNodeAdded=this.handleNodeAdded.bind(this),this.handleNodeRemoved=this.handleNodeRemoved.bind(this),this.handlePropertyChange=this.handlePropertyChange.bind(this),this.handleBeforeGraphConfigure=this.handleBeforeGraphConfigure.bind(this),this.handleGraphConfigure=this.handleGraphConfigure.bind(this),this.setupEditorListeners(),this.setupToolbarControls(),this.switchGraph(this.editor.getGraph())}setupEditorListeners(){this.editor.on("graphSet",(e=>{this.switchGraph(e)}))}setupToolbarControls(){}switchGraph(e){this.currentGraph&&this.unregisterGraphListeners(this.currentGraph),this.currentGraph=e,this.currentGraph&&this.registerGraphListeners(e)}unregisterGraphListeners(e){e.off("clear",this.handleClear),e.off("connectionChange",this.handleConnectionChange),e.off("nodeAdded",this.handleNodeAdded),e.off("nodeRemoved",this.handleNodeRemoved),e.off("nodePropertyChanged",this.handlePropertyChange),e.off("beforeGraphConfigure",this.handleBeforeGraphConfigure),e.off("graphConfigure",this.handleGraphConfigure)}registerGraphListeners(e){e.on("clear",this.handleClear),e.on("connectionChange",this.handleConnectionChange),e.on("nodeAdded",this.handleNodeAdded),e.on("nodeRemoved",this.handleNodeRemoved),e.on("nodePropertyChanged",this.handlePropertyChange),e.on("beforeGraphConfigure",this.handleBeforeGraphConfigure),e.on("graphConfigure",this.handleGraphConfigure)}enqueueRequest(e,...t){this.requestQueue.length>=this.requestQueueMaxSize&&(this.requestQueue=this.requestQueue.slice(1-this.requestQueueMaxSize)),this.requestQueue.push({requestFunction:e,args:t}),this.processRequests()}async processRequests(){if(this.processingRequest||0===this.requestQueue.length)return;this.processingRequest=!0;const{requestFunction:e,args:t}=this.requestQueue.shift();try{await e.apply(this,t)}catch(e){console.error("processRequests error",e)}finally{this.processingRequest=!1,this.processRequests()}}handleBeforeGraphConfigure(){this.graphIsConfiguring=!0}handleGraphConfigure(e){this.graphIsConfiguring=!1,this.enqueueGraphCreate(e)}handleClear(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleConnectionChange(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleNodeAdded(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handleNodeRemoved(e){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueGraphCreate(e)}handlePropertyChange(e,t,i,s){this.graphIsConfiguring||e.uuid!==this.currentGraph.uuid||this.enqueueRequest(this.updateParameterValue,e,t,i,s)}enqueueGraphCreate(e){this.graphCreatePending?this.graphCreateDirty=!0:(this.graphCreatePending=!0,this.enqueueRequest((async e=>{await this.createGraph(e),this.graphCreatePending=!1,this.graphCreateDirty&&(this.graphCreateDirty=!1,this.enqueueGraphCreate(e))}),e))}async createGraph(t){this.activeGraphAction=t.uuid,this.stopPolling();const i=t.exportForBackend();e.log_log("api create graph",t.uuid,i);try{const e=await this.editor.apiSend("CreateGraph",{graph:i});e.uuid===t.uuid&&this.currentGraph.uuid===t.uuid&&(t.update(e),this.startPolling())}catch(e){console.error("createGraph error",e)}finally{this.activeGraphAction=null}}async updateParameterValue(t,i,s,n){this.activeGraphAction=t.uuid,this.stopPolling(),e.log_log("api update property",i,s,n);try{const o=await this.editor.apiSend("UpdateParameterValue",{graphUuid:t.uuid,nodeId:i.id,parameterName:s,parameterValue:n});if(o!==this.currentGraph.uuid)return void e.log_info(`Update response UUID (${o}) does not match current graph (${this.currentGraph.uuid}), ignoring.`);this.startPolling()}catch(i){switch(i.code){case"INVALID_GRAPH_INSTANCE_ID":case"NO_GRAPH_INSTANCE_AVAILABLE":case"GRAPH_UUID_MISSMATCH":t.uuid===this.currentGraph.uuid?(e.log_info(`api update failed [${i.code}], resending full graph`),await this.createGraph(t)):e.log_info("Skipped createGraph fallback, graph is no longer active");break;default:console.error("Update parameter value failed:",i)}}finally{this.activeGraphAction=null}}stopPolling(){this.pollingTimeoutId&&(clearTimeout(this.pollingTimeoutId),this.pollingTimeoutId=null,e.log_log("polling stopped"))}isPolling(){return Boolean(this.pollingTimeoutId)}startPolling(){if(this.currentGraph.isEmpty)return void this.stopPolling();const t=this.currentGraph.uuid,i=async()=>{if(this.isPolling())try{const s=await this.editor.apiSend("GetStatus",{graphUuid:t});if(e.log_log("polling reply >",s),s.uuid!==t||this.currentGraph.uuid!==t)return e.log_info("polling response rejected (uuid mismatch)"),void this.stopPolling();this.currentGraph.update(s),this.pollingTimeoutId=setTimeout(i,this.pollingPeriodInMs)}catch(e){console.error("polling error",e),this.stopPolling()}};e.log_log("polling started"),this.pollingTimeoutId=setTimeout(i,this.pollingPeriodInMs)}}class lr{constructor(e){this.editor=e,this.editorCanvas=e.getGraphCanvas(),this.editor.on("toolbarReady",(()=>{this.getBlueprintsButton=this.editor.addButton("ToggleExecuteOrder",{label:"",iconClass:"fa-solid fa-share-nodes",onClick:this.onToggleExecuteOrderClicked.bind(this),tooltip:"Toggle Execution Order Display",section:"left"})}))}onToggleExecuteOrderClicked(){this.editorCanvas.render_execution_order=!this.editorCanvas.render_execution_order,this.editorCanvas.setDirty(!0,!0)}}class hr{constructor(e){this.node=e,this.defaultColor=e.color,this.defaultBgColor=e.bgcolor,this.defaultTooltip=e.properties.tooltip,this.errorStyle={bgcolor:"#96000c",color:"#750000"},e.on("nodeStatusUpdated",this.handleStatusUpdate.bind(this))}hasPrecheckAlarms(e){if(Array.isArray(e.extensions))for(let t of e.extensions)if("precheck"===t.name&&Array.isArray(t.alarms)&&t.alarms.length>0)return!0;return!1}getFirstAlarm(e){for(const t of e.extensions??[])if("precheck"===t.name&&t.alarms?.length>0){const e=t.alarms[0];return`${e.message} : ${e.reason}`}return null}handleStatusUpdate(e){const t=this.node.color,i=this.node.bgcolor;this.hasPrecheckAlarms(e)?(this.node.color=this.errorStyle.color,this.node.bgcolor=this.errorStyle.bgcolor,this.node.properties.tooltip=this.getFirstAlarm(e)):(this.node.color=this.defaultColor,this.node.bgcolor=this.defaultBgColor,this.node.properties.tooltip=this.defaultTooltip),t===this.node.color&&i===this.node.bgcolor||this.node.setDirtyCanvas(!0,!0)}}const cr=[];function dr(e){const t=new Set;return[function(){const i=cr[cr.length-1];return i&&function(e,t){t.add(e),e.dependencies.add(t)}(i,t),e},function(i){e=i;for(const e of[...t])e.execute()}]}function ur(e){const t={execute(){!function(e){for(const t of e.dependencies)t.delete(e);e.dependencies.clear()}(t),cr.push(t),e(),cr.pop()},dependencies:new Set};t.execute()}function pr(e,t){return e.length===t.length&&e.every(((e,i)=>e===t[i]))}function fr(e,t){e.value=t,e.dispatchEvent(new Event("change"))}function gr(e,t){const i=document.createElement(e);return Object.assign(i,t)}function mr(e,t){return"string"==typeof e?e.split(t):Array.isArray(e)?e.flatMap((e=>"string"==typeof e?e.split(t):[])):[]}const br="use-bootstrap-tag",_r=`${br}-target`;function vr(e){const t=e,i=t.nextElementSibling;i&&i.classList.contains(br)&&i.remove();const s=gr("div");t.insertAdjacentElement("afterend",s);const n=t.dataset,o={separator:n.ubTagSeparator||",",variant:n.ubTagVariant||"secondary",xPosition:n.ubTagXPosition||"right",isDuplicate:void 0!==n.ubTagDuplicate,max:+n.ubTagMax>0?+n.ubTagMax:void 0,noInputOnblur:void 0!==n.ubTagNoInputOnblur},r=()=>s.querySelectorAll("button"),a=e=>{e.classList.add("duplicate"),setTimeout((()=>{e.classList.remove("duplicate")}),150)},l=()=>t.value,h=()=>l().split(o.separator).filter((e=>""!==e)),c=e=>{const i=h(),s=mr(e,o.separator);if(!o.max||i.length<o.max){const e=[];!o.isDuplicate&&i.forEach(((t,i)=>s.includes(t)&&e.push(i)));const n=[];s.forEach((e=>{i.includes(e)?o.isDuplicate&&n.push(e):n.push(e)})),i.push(...n),pr(h(),i)||(fr(t,i.join(o.separator)),n.forEach((e=>{const t=r()[i.lastIndexOf(e)],s=t.offsetHeight;t.style.height=0,setTimeout((()=>t.style.height=`${s}px`),0),setTimeout((()=>t.style.removeProperty("height")),150)}))),o.isDuplicate||e.forEach((e=>a(r()[e])))}else s.length>0&&r().forEach(a)},d=e=>{const i=h();mr(e,o.separator).forEach((e=>function(e,t){const i=e.lastIndexOf(t);-1!==i&&e.splice(i,1)}(i,e))),pr(h(),i)||fr(t,i.join(o.separator))},u=t.classList,p=t.disabled;t.tabIndex=-1,u.add(_r);const[f,g]=dr(t.value),[m,b]=dr(!1),[_,v]=dr(""),y=()=>f().split(o.separator).filter((e=>""!==e.trim())),w=()=>y().length?"":t.placeholder;s.className=`${br} d-flex flex-wrap align-items-center gap-1 ${u.value}`.replace(_r,""),ur((()=>{m()?s.classList.add("focus"):s.classList.remove("focus")}));const C=()=>{var e;return null==(e=s.querySelector("input"))?void 0:e.focus()},E=e=>{e>=0&&d(y()[e])},x=(e=!1)=>{const t=_().trim();""===t&&v(""),(_().includes(o.separator)||e&&""!==_())&&(c(t.split(o.separator).filter((e=>""!==e.trim()))),v(""))},k=gr("button",{type:"button",className:`align-items-center gap-1 d-inline-flex py-0 border-0 btn btn-${o.variant}`,disabled:p});u.contains("form-control-sm")&&k.classList.add("btn-sm"),u.contains("form-control-lg")&&k.classList.add("btn-lg"),"left"===o.xPosition&&k.classList.add("flex-row-reverse");const T=gr("span",{className:"d-inline-flex",role:"button",tabIndex:-1,innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>'});if(ur((()=>{var e;e=y(),r().forEach((e=>e.remove())),e.reverse().forEach(((t,i)=>{const n=e.length-1-i,o=k.cloneNode();if(o.innerHTML=t,o.onfocus=()=>{o.classList.add("active"),b(!0)},o.onblur=()=>{o.classList.remove("active"),b(!1)},o.onkeydown=({key:e})=>{if("Backspace"===e||"Delete"===e){E(n);const t="Backspace"===e?n-1:y().length===n?-1:n;-1===t?C():r()[t].focus()}},!p){const e=T.cloneNode(!0);e.onclick=()=>{E(n),C()},o.append(e)}s.prepend(o)}))})),!p){const e=gr("div",{className:"input-wrapper"}),t=gr("span"),i=gr("input",{type:"text"});i.onfocus=()=>{b(!0)},i.onblur=()=>{b(!1),o.noInputOnblur?v(""):x(!0)},i.onkeydown=e=>{""===_()&&"Backspace"===e.key&&E(y().length-1),""!==_()&&"Enter"===e.key&&(x(!0),e.preventDefault())},i.oninput=()=>{v(i.value),x()},ur((()=>{t.innerHTML=_()||w()||"i",i.placeholder=w(),i.value=_()})),e.append(t,i),s.append(e)}return s.onclick=e=>{"BUTTON"!==e.target.tagName&&C()},t.addEventListener("change",(()=>{g(t.value)})),t.addEventListener("focus",C),{getValue:l,getValues:h,addValue:c,removeValue:d}}class yr{constructor(e){this.editor=e,this.setupEditorListeners()}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.fileMetaDisplayControl=new wr("FileMetaDisplayControl",this.onClick.bind(this)),this.editor.addToolbarControl(this.fileMetaDisplayControl,{section:"right"}),this.editor.on("graphSet",(e=>{this.fileMetaDisplayControl.update(e)})),this.editor.on("graphLoaded",(e=>{this.fileMetaDisplayControl.update(e)})),this.editor.on("graphCleared",(e=>{this.fileMetaDisplayControl.update(e)}))}))}onClick(){const e=this.editor.graph;if(!e)return;const t=e.extra&&e.extra.filemeta&&e.extra.filemeta.name||"",i=e.extra&&e.extra.filemeta&&e.extra.filemeta.description||"",s=(e.extra&&e.extra.filemeta&&e.extra.filemeta.tags||[]).join(", ");this.editor.showModal({title:"Edit Graph Details",body:`\n    <form id="metadataForm">\n        <div class="mgui mb-3">\n          <label for="fileMetaName" class="form-label">Name</label>\n          <input type="text" class="form-control" id="fileMetaName" placeholder="Enter name" required value="${t}" autofocus>\n        </div>\n        <div class="mgui mb-3">\n          <label for="fileMetaDescription" class="form-label">Description</label>\n          <textarea class="form-control" id="fileMetaDescription" rows="2" placeholder="Enter description">${i}</textarea>\n        </div>\n        <div class="mgui mb-3 active">\n          <label for="fileMetaTags" class="form-label">Tags</label>\n          <div class="input-wrapper">\n            <input type="text" class="form-control active" id="fileMetaTags" placeholder="Enter tags (comma separated)" value="${s}" \n            data-ub-tag-separator=","\n            data-ub-tag-variant="primary"\n            data-ub-tag-x-position="left"\n            data-ub-tag-no-input-onblur>\n          </div>\n        </div>\n        <button type="submit" class="d-none"></button>\n      </form>\n\n  `,buttons:[{label:"Cancel",type:"secondary",onClick:e=>{e.hide()}},{label:"Ok",type:"primary",onClick:e=>{const t=e._element.querySelector("#fileMetaName").value,i=e._element.querySelector("#fileMetaDescription").value,s=e._element.querySelector("#fileMetaTags").value,n=this.editor.graph;n.extra.filemeta=n.extra.filemeta||{},n.extra.filemeta.name=t.trim()&&t||"Untitled",n.extra.filemeta.description=i,n.extra.filemeta.tags=s.split(",").map((e=>e.trim())),this.fileMetaDisplayControl.update(n),e.hide()}}],preShow:(e,t)=>{vr(e._element.querySelector("#fileMetaTags"))}})}}class wr{constructor(e,t){this.container=document.createElement("div"),this.container.id=e,this.container.innerHTML='\n      <div class="metadata-summary" style="cursor: pointer;">\n        <div class="d-flex align-items-center">\n          <span class="summary-name text-truncate">Untitled</span>\n          <i class="far fa-edit edit-icon" style="margin-left: 10px;"></i>\n        </div>\n      </div>',this.summaryName=this.container.querySelector(".summary-name"),this.metadataSummary=this.container.querySelector(".metadata-summary"),"function"==typeof t&&this.metadataSummary.addEventListener("click",(()=>t()))}render(){return this.container}update(e){const t=e&&e.extra&&e.extra.filemeta||{};this.summaryName.textContent=t.name||"Untitled",this.metadataSummary.onclick=()=>{"function"==typeof this.onClickSummary&&this.onClickSummary()}}}class Cr{constructor(e,t={}){this.editor=e,this.examplesPath=t.ServerExamplesEditorExtensionUrl||"./example/list",this.setupEditorListeners(),this.examples=[],this.modal=null,this.searchInputField=null,this.resultsContainer=null,this.resultsCount=null,this.searchInTitle=null,this.searchInDescription=null,this.searchInTags=null,this.searchInNodes=null,this.sortSelect=null,this.currentSortMode="latest",localStorage.setItem("searchInTitle","true"),localStorage.setItem("searchInDescription","true"),localStorage.setItem("searchInTags","true"),localStorage.setItem("searchInNodes","false")}setupEditorListeners(){this.editor.on("toolbarReady",(()=>{this.editor.addButton("Examples",{label:"Examples",iconClass:"fa-solid fa-book-open",onClick:this.onExampleButtonClicked.bind(this),tooltip:"Open Examples Search",section:"left"});const e=this;!function t(i=20,s=2e3){fetch(e.examplesPath).then((e=>{if(503!==e.status){if(e.ok)return e.json();throw new Error(`Server responded with status: ${e.status}`)}if(!(i>0))throw new Error("Maximum retries reached. Server still busy.");console.warn("Server busy. Retrying in 2 seconds..."),setTimeout((()=>t(i-1,s)),s)})).then((t=>{if(t){const i=t.examples.map((e=>({name:e?.name||"Untitled Example",description:e?.description||"No description available",tags:e?.tags||[],url:e?.url||"#",nodes:e?.nodes||[],lastModified:e?.lastModified||null})));e.examples=i}})).catch((t=>{console.error("Error fetching examples:",t),this.editor.showError("Error fetching examples:",t.message),e.examples=[]}))}()}))}async onExampleButtonClicked(){this.editor.showModal({title:"Example Search",body:'\n      <form id="exampleSearch">\n        <div class="input-group mb-4">\n          <input\n            type="text"\n            id="searchInput"\n            class="form-control form-control-lg"\n            placeholder="Search examples..."\n            aria-label="Search graphs"\n            autofocus\n          />\n        </div>\n        <div class="row">\n          \x3c!-- Left Panel - Search Criteria --\x3e\n          <div class="col-md-3">\n            <div class="border-end pe-3">\n              <h6 class="mb-3 text-muted">Search In</h6>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="titleCheck" checked />\n                <label class="form-check-label" for="titleCheck">Title</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="descCheck" checked />\n                <label class="form-check-label" for="descCheck">Description</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="tagsCheck" checked />\n                <label class="form-check-label" for="tagsCheck">Tags</label>\n              </div>\n              <div class="form-check mb-2">\n                <input class="form-check-input" type="checkbox" id="nodesCheck" />\n                <label class="form-check-label" for="nodesCheck">Node Types</label>\n              </div>\n            </div>\n          </div>\n  \n          \x3c!-- Right Panel - Search Results --\x3e\n          <div class="col-md-9 search-results">\n            <div class="d-flex justify-content-between align-items-center mb-2">\n              <h6 class="text-muted m-0">\n                Results (<span id="resultsCount">0</span>)\n              </h6>\n\n              <div class="d-flex align-items-center">\n                <label for="sortSelect" class="me-2 mb-0 text-muted small">Sort by:</label>\n                <select id="sortSelect" class="form-select form-select-sm w-auto">\n                  <option value="latest">Latest</option>\n                  <option value="alpha">Alphabetical</option>\n                </select>\n              </div>\n            </div>\n\n            <div class="mb-2 text-muted small">\n              Click on a result to open\n            </div>\n\n            <div id="resultsContainer" class="d-flex flex-column border rounded p-2" style="max-height: 60vh; overflow-y: auto;">\n              \x3c!-- Results will be dynamically inserted here --\x3e\n            </div>\n          </div>\n        <button type="submit" class="d-none"></button>\n      </form>\n      ',buttons:[{label:"Close",type:"primary",onClick:e=>{e.hide()}}],dialogClass:"modal-lg",preShow:(e,t)=>{this.modal=e,this.searchInputField=e._element.querySelector("#searchInput"),this.resultsContainer=e._element.querySelector("#resultsContainer"),this.resultsCount=e._element.querySelector("#resultsCount"),this.searchInTitle=e._element.querySelector("#titleCheck"),this.searchInDescription=e._element.querySelector("#descCheck"),this.searchInTags=e._element.querySelector("#tagsCheck"),this.searchInNodes=e._element.querySelector("#nodesCheck"),this.sortSelect=e._element.querySelector("#sortSelect"),this.currentSortMode=localStorage.getItem("exampleSortMode")||"latest",this.sortSelect.value=this.currentSortMode,this.sortSelect.addEventListener("change",(()=>{this.currentSortMode=this.sortSelect.value,this.search()})),this.searchInTitle.checked="true"===localStorage.getItem("searchInTitle"),this.searchInDescription.checked="true"===localStorage.getItem("searchInDescription"),this.searchInTags.checked="true"===localStorage.getItem("searchInTags"),this.searchInNodes.checked="true"===localStorage.getItem("searchInNodes"),this.searchInputField.addEventListener("input",this.handleInputChange),this.searchInputField.addEventListener("keypress",this.handleKeypress),this.searchInTitle.addEventListener("change",this.handleCheckboxChange),this.searchInDescription.addEventListener("change",this.handleCheckboxChange),this.searchInTags.addEventListener("change",this.handleCheckboxChange),this.searchInNodes.addEventListener("change",this.handleCheckboxChange)},onShow:()=>{this.search()},onHidden:()=>{localStorage.setItem("searchInTitle",this.searchInTitle.checked?"true":"false"),localStorage.setItem("searchInDescription",this.searchInDescription.checked?"true":"false"),localStorage.setItem("searchInTags",this.searchInTags.checked?"true":"false"),localStorage.setItem("searchInNodes",this.searchInNodes.checked?"true":"false"),localStorage.setItem("exampleSortMode",this.currentSortMode),this.searchInputField.removeEventListener("input",this.handleInputChange),this.searchInputField.removeEventListener("keypress",this.handleKeypress),this.searchInTitle.removeEventListener("change",this.handleCheckboxChange),this.searchInDescription.removeEventListener("change",this.handleCheckboxChange),this.searchInTags.removeEventListener("change",this.handleCheckboxChange),this.searchInNodes.removeEventListener("change",this.handleCheckboxChange),this.modal=null,this.searchInputField=null,this.resultsContainer=null,this.resultsCount=null,this.searchInTitle=null,this.searchInDescription=null,this.searchInTags=null,this.searchInNodes=null,this.sortSelect=null}})}handleInputChange=e=>{this.search()};handleCheckboxChange=()=>{this.search()};handleKeypress=e=>{if("Enter"===e.key){e.preventDefault();const t=this.resultsContainer.firstChild;t&&t.click()}};search(){const e=this.searchInputField.value.trim().toLowerCase();this.resultsContainer.innerHTML="";let t=this.examples.filter((t=>{let i=!1;return this.searchInTitle.checked&&t.name&&t.name.toLowerCase().includes(e)&&(i=!0),this.searchInDescription.checked&&t.description&&t.description.toLowerCase().includes(e)&&(i=!0),this.searchInTags.checked&&t.tags&&t.tags.some((t=>t.toLowerCase().includes(e)))&&(i=!0),this.searchInNodes.checked&&t.nodes&&t.nodes.some((t=>t.toLowerCase().includes(e)))&&(i=!0),i}));"alpha"===this.currentSortMode?t.sort(((e,t)=>e.name.localeCompare(t.name))):"latest"===this.currentSortMode&&t.sort(((e,t)=>{const i=new Date(e.lastModified||0).getTime();return new Date(t.lastModified||0).getTime()-i})),t.forEach((t=>{const i=document.createElement("div");i.className="card shadow-sm mb-3  example-card position-relative",i.innerHTML=`\n       ${this.isNew(t.lastModified)?'<div class="ribbon-new"><span>NEW</span></div>':""}\n        <div class="card-body">\n       \n          <h5 class="card-title">${this.highlight(t.name,e,this.searchInTitle.checked)}\n          </h5>\n          <p class="card-text">${this.highlight(t.description,e,this.searchInDescription.checked)}</p>\n          ${this.searchInTags.checked?t.tags.map((t=>`<span class="badge bg-info me-1">${this.highlight(t,e,this.searchInTags.checked)}</span>`)).join(""):""}\n            ${this.searchInNodes.checked?t.nodes.map((t=>`<span class="badge bg-secondary me-1">${this.highlight(t,e,!0)}</span>`)).join(""):""}\n        <p class="card-text text-muted small mt-2 mb-0">\n          Last modified: ${this.formatDate(t.lastModified)}\n        </p>\n        </div>\n      `,this.resultsContainer.appendChild(i),i.onclick=()=>{this.modal.hide(),this.onExampleClicked(t)}})),this.resultsCount.innerHTML=`${t.length}`}isNew(e){if(!e)return!1;return(new Date-new Date(e))/864e5<=14}formatDate(e){if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}highlight(e,t,i){if(!i)return e;if(!t)return e;const s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`(${s})`,"gi");return e.replace(n,(e=>`<mark>${e}</mark>`))}async onExampleClicked(e){try{const t=await fetch(`${e.url}`),i=await t.json();try{this.editor.loadGraph(i),this.editor.showSuccess("Graph Loaded",`Successfully loaded "${e.name}"`)}catch(e){this.editor.showError("Open Failed : Configuration Error",`Error during graph configuration: ${e.message}`)}}catch(e){return this.editor.showError("Open Failed : Fetch Error","There was an error while trying to download the file. Please check the console for more information."),void console.error(e)}}}class Er{install(e=new Qo,t){this.registerBundledPacks(e,t),this.registerGraphExtensions(e,t),this.registerCanvasExtensions(e,t),this.registerEditorExtensions(e,t),this.registerNodeExtensions(e,t),this.registerWidgets(e,t)}registerBundledPacks(e,t={}){}registerGraphExtensions(e,t={}){}registerCanvasExtensions(e,t={}){}registerEditorExtensions(e,t={}){const i={GetBlueprintsExtension:!0,FileOperationsExtension:!0,EditorAutoUpdateExtension:!0,ShowExecuteOrderExtension:!0,FileMetaExtension:!0,ServerExamplesEditorExtension:!1,...t};i.GetBlueprintsExtension&&e.registerEditorExtension(or),i.FileOperationsExtension&&e.registerEditorExtension(rr),i.EditorAutoUpdateExtension&&e.registerEditorExtension(ar),i.ShowExecuteOrderExtension&&e.registerEditorExtension(lr),i.FileMetaExtension&&e.registerEditorExtension(yr),i.ServerExamplesEditorExtension&&e.registerEditorExtension(Cr,i)}registerNodeExtensions(e,t={}){({PreExecutionCheckExtension:!0,...t}).PreExecutionCheckExtension&&e.registerNodeExtension(hr)}registerWidgets(e,t={}){}registerFileAssociation(e,t={}){}}export{xo as CheckboxComponent,Oo as ColorGenerator,ko as ComboboxComponent,Fo as ControlWidget,Er as DefaultPack,Bo as DisplayWidget,Yo as GraphCanvas,nr as GraphEditor,Qo as GraphFramework,Co as LedComponent,Lo as NumberLimiter,To as NumericDisplayComponent,Ao as NumericInputComponent,So as SingleLineTextDisplayComponent,Io as SingleLineTextInputComponent,ir as ToolbarButton,wo as UiDraw,yo as UiTheme,No as clamp};
